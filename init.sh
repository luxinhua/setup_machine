#!/bin/bash

set -v

# echo  ${USER} | sudo apt update
# if [ $? -ne 0 ]; then echo 'sudo apt update' &&  exit 1 ;fi

echo  ${USER} | sudo apt install net-tools
if [ $? -ne 0 ]; then echo 'sudo apt install net-tools' &&  exit 1 ;fi

cmd='ping github.com -c2'
${cmd}; if [ $? -ne 0 ]; then echo ${cmd} &&  exit 1 ;fi

ifconfig 
if [ $? -ne 0 ]; then echo 'ifconfig' &&  exit 1 ;fi

echo  ${USER} | sudo apt install -y git openssh-server openssh-client curl aria2 neovim dos2unix binutils tree curl
if [ $? -ne 0 ]; then echo ${cmd} &&  exit 1 ;fi

rm -rf ~/.ssh
rm -rf ~/.gitconfig 

mkdir -p ~/.ssh
if [ $? -ne 0 ]; then echo 'mkdir -p ~/.ssh' && exit 1 ;fi

echo -n "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBemVMc0FDdUZv
dnMrRTJNZzJzSXFDMkNTOGFGUUwyS0dac3EwbWYzeS9WdENmTHkzClNFRGJPSENLRW1uZEUxd254
dFQ0UDdMbXhZRERZRmtERHQ2T2gvZ3h4YXphUSsxQU43YXg2cGdYNG0vM2hSdkQKMFY3ZU5MUFZ2
YWdoVno4ZTlnODFmSGEyNUU5WjhzUnZBSmJNcXl5aThMcTliWUJSSitvMWJmSjNuZFhMeVdPZQpR
Zjh0bWpTbVRpR3hXVmJKNEtaTmJWWmg2ZHA4UDByVmJtYW9FSlBzRTU4MVB2T1ZoOTRvY1FESTdq
SytReHNVCkdvUXA0eWZxM01DM0xESlN2NG5mYms2c3BPQm9CV2I4eHVHdWM3M05UWFB5TEFUYU1J
U2NLSEdTc04xREU1WmUKdGtKREZJem1CTHRVL3prdytoeWtzSjZTWGlmdU9CckJQQU8zeVFJREFR
QUJBb0lCQUFMajVKdzhBQ3hCaXFXTApCck1MZHJ1aUoyM3M3Y3M4ZnRhQ2tmWjNjaW5NVmlxYUc1
aVFFSVBDVUszaGZwRC9BaS93WFd2SGZ5WFdvT2VCCldHR2xEaXNxZU1obG5NckhVZGQyWVJrQita
UGNMb1ZYMW0vaC9ReVFXYmZIM0cvMUd1SXBaSDdTeTg1NHJyS1IKdjEwcXdNVEdZNk10ZSt0Rm1k
NE5rNkp2Zk81aVEzL2ZKNy9LNjNhL1B1UmhZM0dRTHVJWk9GaUtyZ2NKMXljSgo1cW5iWmdDT1Zi
R2IwZXBNSlNNMXhqOHBrTm9YQUZ4MmVYY0hVZ3czQ2ZWOWdxSXJKR016YTZDWGMrVURNZ1ZaCjlV
Qm5IYlBDeDV6R2RndEFHTDJGdFYyMDQ3UU95clA5dG1GbTRPZENoQ0MzZ2JJdnZXcUxXWTc2ZmlP
elV4VmYKOVp5czZHRUNnWUVBNkZaVWw4SVp1dVZTcXN1TWhGT2tBd0t5OGVQdy8yUEFNb1AvRHVw
SjZmVzF3NVROMHlRNQp1K0RONWdvNmp2THozNmZWdm9RaFhlNFJJWXh5cVJ2UURPTXJNempYcGNQ
dWR6VG9UWTc2QjFXVzRyWlhpZjVlCkhVcWVqbDN2MjAzbUV5YmhQMUtiWGtkeFRBT3dCcWk3Mno0
ZjJZaEVGdUsvWkNDTjNuMWJDbnNDZ1lFQTR0cnkKTVJhSEM5ZS9CYUdyZkZjTjdCTlpFOC9KOVBl
cmZLL2ZWaXArdXNkTHVUVHZrV0JHUUR0bXErRkM0aVdWQVVLTgpKVTd1dlozNElSak02RTlWVVhQ
TUU3ZnljSDBHUHBOSWlMZk5kNUhHUVlnUWZmYUVQSEtTNG91TWRGY2tEY0pMCjFpekRNUUdWRi8z
T2g3NjNVdDlrUnl1dHBrZk5EVHlNRGZvUDVZc0NnWUEzMjJtREFydEUzNVU4VXF0NXROSWQKbHl5
R1V4TEJrNjNGZDA1K3UzMEJybjBBaEdubmRUSWNKVFBiTm1KVnM3dEY3Z2ZKUWVMenZpU0lPRWZv
dURNUQpwaHpndDYzQXdKWTRPcFFPOFd6VERwU3o5THFmQm5TQi9rcVlWNlV1eUUra0V4amNMSFFG
K284V2cxeHlmV2FNCmt5YjlHWEdsUHVaY29DYjdjby9NdVFLQmdRQ0R0b0cyRkpGV1ErNko4NE1n
ajE3cStaVFhsdVo0VDdDR2xZcUQKZWVyWXdVdnEvWncyK1FIdzIweFNjVmltK3hFWGlTOXdRUE1H
cndoWkZ4QXB0WjRneTYzcXFQdWZha2ZNM3pEWApDSGpJZXAvMGZtNnM1QXVGR1RURlNpYkRpYkRL
T0V4Vnp1bUpzNVNBT0lISWVPZnh1dmg3QmhZdG5EU25BY2VECmVmUHUzd0tCZ0Z4bllmOWM1UGVk
UFVuTVJuRVhveDBjTkhXOXQ0ampXMTlsOHVqNFpCaUUwUytHZkNoM1RMR2UKTFRORUR6RThKcGpp
UlozWk1uL1N3U0grWkVCU1NuWUlnS2U5YjNaMDhMR2t4NjZLbjlGd2ZyUDVHWWJZdUI5NAp1SHkx
OWxqcmxScUQ0MlcxSXA3akM3RTZsWDZlRWJqMUJ6VDVTZzF4ME1Gb05oZWRlQUN3Ci0tLS0tRU5E
IFJTQSBQUklWQVRFIEtFWS0tLS0tCgo="| base64 -d | tee ~/.ssh/id_rsa
if [ $? -ne 0 ]; then echo '~/.ssh/id_rsa' &&  exit 1 ;fi

echo -n "c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFETjR1d0FLNFdpK3o0VFl5RGF3
aW9MWUpMeG9WQXZZb1pteXJTWi9mTDlXMEo4dkxkSVFOczRjSW9TYWQwVFhDZkcxUGcvc3ViRmdN
TmdXUU1PM282SCtESEZyTnBEN1VBM3RySHFtQmZpYi9lRkc4UFJYdDQwczlXOXFDRlhQeDcyRHpW
OGRyYmtUMW55eEc4QWxzeXJMS0x3dXIxdGdGRW42alZ0OG5lZDFjdkpZNTVCL3kyYU5LWk9JYkZa
VnNuZ3BrMXRWbUhwMm53L1N0VnVacWdRayt3VG56VSs4NVdIM2loeEFNanVNcjVER3hRYWhDbmpK
K3Jjd0xjc01sSy9pZDl1VHF5azRHZ0ZadnpHNGE1enZjMU5jL0lzQk5vd2hKd29jWkt3M1VNVGxs
NjJRa01Vak9ZRXUxVC9PVEQ2SEtTd25wSmVKKzQ0R3NFOEE3ZkogWGluaHVhLEx1QGFtZC5jb20K
Cg===="| base64 -d | tee ~/.ssh/id_rsa.pub
if [ $? -ne 0 ]; then echo '~/.ssh/id_rsa.pub' &&  exit 1 ;fi

echo -n "SG9zdCBnaXRodWIuY29tCiAgICAgICAgVXNlciB4aGx1CiAgICAgICAgSG9zdG5hbWUgZ2l0aHVi
LmNvbQogICAgICAgIElkZW50aXR5RmlsZSAvaG9tZS94aGx1Ly5zc2gvaWRfcnNhCiAgICAgICAg
SWRlbnRpdHlGaWxlIC9ob21lL3hobHUvLnNzaC9pZF9lZDI1NTE5Cg===="| base64 -d | tee ~/.ssh/config
if [ $? -ne 0 ]; then echo '~/.ssh/config' &&  exit 1 ;fi

echo -n "W3VzZXJdCgllbWFpbCA9IDI4NDYxNTQ1OTZAcXEuY29tCgluYW1lID0geGhsdQpbY29yZV0KCWF1
dG9jcmxmID0gdHJ1ZQoJc3NoQ29tbWFuZCA9IHNzaCAtaSB+Ly5zc2gvaWRfcnNhCltodHRwXQoJ
c3NsVmVyaWZ5ID0gZmFsc2UKCg=="| base64 -d | tee ~/.gitconfig
if [ $? -ne 0 ]; then echo '~/.gitconfig' &&  exit 1 ;fi

cmd='ping github.com -c2'
${cmd}; if [ $? -ne 0 ]; then echo ${cmd} &&  exit 1 ;fi

echo  ${USER} | sudo systemctl status sshd.service
if [ $? -ne 0 ]; then echo 'systemctl status sshd.service' &&  exit 1 ;fi

echo  ${USER} | sudo systemctl restart sshd.service
if [ $? -ne 0 ]; then echo 'systemctl restart sshd.service' &&  exit 1 ;fi

ssh -o stricthostkeychecking=no github.com
echo -e "\n" | ssh -vT git@github.com
# ${cmd}; if [ $? -ne 0 ]; then echo ${cmd} &&  exit 1 ;fi

rm -rf ~/.config/nvim
mkdir -p  ~/.config/nvim/autoload

echo -n "IiB2aW0tcGx1ZzogVmltIHBsdWdpbiBtYW5hZ2VyCiIgPT09PT09PT09PT09PT09PT09PT09PT09
PT09PQoiCiIgRG93bmxvYWQgcGx1Zy52aW0gYW5kIHB1dCBpdCBpbiB+Ly52aW0vYXV0b2xvYWQK
IgoiICAgY3VybCAtZkxvIH4vLnZpbS9hdXRvbG9hZC9wbHVnLnZpbSAtLWNyZWF0ZS1kaXJzIFwK
IiAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2p1bmVndW5uL3ZpbS1wbHVn
L21hc3Rlci9wbHVnLnZpbQoiCiIgRWRpdCB5b3VyIC52aW1yYwoiCiIgICBjYWxsIHBsdWcjYmVn
aW4oJ34vLnZpbS9wbHVnZ2VkJykKIgoiICAgIiBNYWtlIHN1cmUgeW91IHVzZSBzaW5nbGUgcXVv
dGVzCiIKIiAgICIgU2hvcnRoYW5kIG5vdGF0aW9uOyBmZXRjaGVzIGh0dHBzOi8vZ2l0aHViLmNv
bS9qdW5lZ3Vubi92aW0tZWFzeS1hbGlnbgoiICAgUGx1ZyAnanVuZWd1bm4vdmltLWVhc3ktYWxp
Z24nCiIKIiAgICIgQW55IHZhbGlkIGdpdCBVUkwgaXMgYWxsb3dlZAoiICAgUGx1ZyAnaHR0cHM6
Ly9naXRodWIuY29tL2p1bmVndW5uL3ZpbS1naXRodWItZGFzaGJvYXJkLmdpdCcKIgoiICAgIiBN
dWx0aXBsZSBQbHVnIGNvbW1hbmRzIGNhbiBiZSB3cml0dGVuIGluIGEgc2luZ2xlIGxpbmUgdXNp
bmcgfCBzZXBhcmF0b3JzCiIgICBQbHVnICdTaXJWZXIvdWx0aXNuaXBzJyB8IFBsdWcgJ2hvbnph
L3ZpbS1zbmlwcGV0cycKIgoiICAgIiBPbi1kZW1hbmQgbG9hZGluZwoiICAgUGx1ZyAnc2Nyb29s
b29zZS9uZXJkdHJlZScsIHsgJ29uJzogICdORVJEVHJlZVRvZ2dsZScgfQoiICAgUGx1ZyAndHBv
cGUvdmltLWZpcmVwbGFjZScsIHsgJ2Zvcic6ICdjbG9qdXJlJyB9CiIKIiAgICIgVXNpbmcgYSBu
b24tZGVmYXVsdCBicmFuY2gKIiAgIFBsdWcgJ3JkbmV0dG8vWUNNLUdlbmVyYXRvcicsIHsgJ2Jy
YW5jaCc6ICdzdGFibGUnIH0KIgoiICAgIiBVc2luZyBhIHRhZ2dlZCByZWxlYXNlOyB3aWxkY2Fy
ZCBhbGxvd2VkIChyZXF1aXJlcyBnaXQgMS45LjIgb3IgYWJvdmUpCiIgICBQbHVnICdmYXRpaC92
aW0tZ28nLCB7ICd0YWcnOiAnKicgfQoiCiIgICAiIFBsdWdpbiBvcHRpb25zCiIgICBQbHVnICdu
c2YvZ29jb2RlJywgeyAndGFnJzogJ3YuMjAxNTAzMDMnLCAncnRwJzogJ3ZpbScgfQoiCiIgICAi
IFBsdWdpbiBvdXRzaWRlIH4vLnZpbS9wbHVnZ2VkIHdpdGggcG9zdC11cGRhdGUgaG9vawoiICAg
UGx1ZyAnanVuZWd1bm4vZnpmJywgeyAnZGlyJzogJ34vLmZ6ZicsICdkbyc6ICcuL2luc3RhbGwg
LS1hbGwnIH0KIgoiICAgIiBVbm1hbmFnZWQgcGx1Z2luIChtYW51YWxseSBpbnN0YWxsZWQgYW5k
IHVwZGF0ZWQpCiIgICBQbHVnICd+L215LXByb3RvdHlwZS1wbHVnaW4nCiIKIiAgICIgSW5pdGlh
bGl6ZSBwbHVnaW4gc3lzdGVtCiIgICBjYWxsIHBsdWcjZW5kKCkKIgoiIFRoZW4gcmVsb2FkIC52
aW1yYyBhbmQgOlBsdWdJbnN0YWxsIHRvIGluc3RhbGwgcGx1Z2lucy4KIgoiIFBsdWcgb3B0aW9u
czoKIgoifCBPcHRpb24gICAgICAgICAgICAgICAgICB8IERlc2NyaXB0aW9uICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB8CiJ8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwg
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwKInwgYGJy
YW5jaGAvYHRhZ2AvYGNvbW1pdGAgfCBCcmFuY2gvdGFnL2NvbW1pdCBvZiB0aGUgcmVwb3NpdG9y
eSB0byB1c2UgICAgICAgfAoifCBgcnRwYCAgICAgICAgICAgICAgICAgICB8IFN1YmRpcmVjdG9y
eSB0aGF0IGNvbnRhaW5zIFZpbSBwbHVnaW4gICAgICAgICAgICB8CiJ8IGBkaXJgICAgICAgICAg
ICAgICAgICAgIHwgQ3VzdG9tIGRpcmVjdG9yeSBmb3IgdGhlIHBsdWdpbiAgICAgICAgICAgICAg
ICAgIHwKInwgYGFzYCAgICAgICAgICAgICAgICAgICAgfCBVc2UgZGlmZmVyZW50IG5hbWUgZm9y
IHRoZSBwbHVnaW4gICAgICAgICAgICAgICAgfAoifCBgZG9gICAgICAgICAgICAgICAgICAgICB8
IFBvc3QtdXBkYXRlIGhvb2sgKHN0cmluZyBvciBmdW5jcmVmKSAgICAgICAgICAgICB8CiJ8IGBv
bmAgICAgICAgICAgICAgICAgICAgIHwgT24tZGVtYW5kIGxvYWRpbmc6IENvbW1hbmRzIG9yIGA8
UGx1Zz5gLW1hcHBpbmdzIHwKInwgYGZvcmAgICAgICAgICAgICAgICAgICAgfCBPbi1kZW1hbmQg
bG9hZGluZzogRmlsZSB0eXBlcyAgICAgICAgICAgICAgICAgICAgfAoifCBgZnJvemVuYCAgICAg
ICAgICAgICAgICB8IERvIG5vdCB1cGRhdGUgdW5sZXNzIGV4cGxpY2l0bHkgc3BlY2lmaWVkICAg
ICAgICB8CiIKIiBNb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vanVuZWd1bm4v
dmltLXBsdWcKIgoiCiIgQ29weXJpZ2h0IChjKSAyMDE3IEp1bmVndW5uIENob2kKIgoiIE1JVCBM
aWNlbnNlCiIKIiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwg
dG8gYW55IHBlcnNvbiBvYnRhaW5pbmcKIiBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNz
b2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKIiAiU29mdHdhcmUiKSwgdG8gZGVhbCBp
biB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCiIgd2l0aG91dCBs
aW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNo
LAoiIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29m
dHdhcmUsIGFuZCB0bwoiIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1
cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0bwoiIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoK
IgoiIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNl
IHNoYWxsIGJlCiIgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9u
cyBvZiB0aGUgU29mdHdhcmUuCiIKIiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwg
V0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwKIiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xV
RElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKIiBNRVJDSEFOVEFCSUxJ
VFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORAoiIE5PTklORlJJTkdFTUVO
VC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUK
IiBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRI
RVIgSU4gQU4gQUNUSU9OCiIgT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5H
IEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OCiIgV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhF
IFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgppZiBleGlzdHMoJ2c6bG9h
ZGVkX3BsdWcnKQogIGZpbmlzaAplbmRpZgpsZXQgZzpsb2FkZWRfcGx1ZyA9IDEKCmxldCBzOmNw
b19zYXZlID0gJmNwbwpzZXQgY3BvJnZpbQoKbGV0IHM6cGx1Z19zcmMgPSAnaHR0cHM6Ly9naXRo
dWIuY29tL2p1bmVndW5uL3ZpbS1wbHVnLmdpdCcKbGV0IHM6cGx1Z190YWIgPSBnZXQoczosICdw
bHVnX3RhYicsIC0xKQpsZXQgczpwbHVnX2J1ZiA9IGdldChzOiwgJ3BsdWdfYnVmJywgLTEpCmxl
dCBzOm1hY19ndWkgPSBoYXMoJ2d1aV9tYWN2aW0nKSAmJiBoYXMoJ2d1aV9ydW5uaW5nJykKbGV0
IHM6aXNfd2luID0gaGFzKCd3aW4zMicpCmxldCBzOm52aW0gPSBoYXMoJ252aW0tMC4yJykgfHwg
KGhhcygnbnZpbScpICYmIGV4aXN0cygnKmpvYndhaXQnKSAmJiAhczppc193aW4pCmxldCBzOnZp
bTggPSBoYXMoJ3BhdGNoLTguMC4wMDM5JykgJiYgZXhpc3RzKCcqam9iX3N0YXJ0JykKaWYgczpp
c193aW4gJiYgJnNoZWxsc2xhc2gKICBzZXQgbm9zaGVsbHNsYXNoCiAgbGV0IHM6bWUgPSByZXNv
bHZlKGV4cGFuZCgnPHNmaWxlPjpwJykpCiAgc2V0IHNoZWxsc2xhc2gKZWxzZQogIGxldCBzOm1l
ID0gcmVzb2x2ZShleHBhbmQoJzxzZmlsZT46cCcpKQplbmRpZgpsZXQgczpiYXNlX3NwZWMgPSB7
ICdicmFuY2gnOiAnJywgJ2Zyb3plbic6IDAgfQpsZXQgczpUWVBFID0gewpcICAgJ3N0cmluZyc6
ICB0eXBlKCcnKSwKXCAgICdsaXN0JzogICAgdHlwZShbXSksClwgICAnZGljdCc6ICAgIHR5cGUo
e30pLApcICAgJ2Z1bmNyZWYnOiB0eXBlKGZ1bmN0aW9uKCdjYWxsJykpClwgfQpsZXQgczpsb2Fk
ZWQgPSBnZXQoczosICdsb2FkZWQnLCB7fSkKbGV0IHM6dHJpZ2dlcnMgPSBnZXQoczosICd0cmln
Z2VycycsIHt9KQoKZnVuY3Rpb24hIHM6aXNfcG93ZXJzaGVsbChzaGVsbCkKICByZXR1cm4gYTpz
aGVsbCA9fiMgJ3Bvd2Vyc2hlbGxcKFwuZXhlXClcPyQnIHx8IGE6c2hlbGwgPX4jICdwd3NoXChc
LmV4ZVwpXD8kJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aXNhYnNvbHV0ZShkaXIpIGFib3J0
CiAgcmV0dXJuIGE6ZGlyID1+IyAnXi8nIHx8IChoYXMoJ3dpbjMyJykgJiYgYTpkaXIgPX4/ICde
XCUoXFxcfFtBLVpdOlwpJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdpdF9kaXIoZGlyKSBh
Ym9ydAogIGxldCBnaXRkaXIgPSBzOnRyaW0oYTpkaXIpIC4gJy8uZ2l0JwogIGlmIGlzZGlyZWN0
b3J5KGdpdGRpcikKICAgIHJldHVybiBnaXRkaXIKICBlbmRpZgogIGlmICFmaWxlcmVhZGFibGUo
Z2l0ZGlyKQogICAgcmV0dXJuICcnCiAgZW5kaWYKICBsZXQgZ2l0ZGlyID0gbWF0Y2hzdHIoZ2V0
KHJlYWRmaWxlKGdpdGRpciksIDAsICcnKSwgJ15naXRkaXI6IFx6cy4qJykKICBpZiBsZW4oZ2l0
ZGlyKSAmJiAhczppc2Fic29sdXRlKGdpdGRpcikKICAgIGxldCBnaXRkaXIgPSBhOmRpciAuICcv
JyAuIGdpdGRpcgogIGVuZGlmCiAgcmV0dXJuIGlzZGlyZWN0b3J5KGdpdGRpcikgPyBnaXRkaXIg
OiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Z2l0X29yaWdpbl91cmwoZGlyKSBhYm9ydAog
IGxldCBnaXRkaXIgPSBzOmdpdF9kaXIoYTpkaXIpCiAgbGV0IGNvbmZpZyA9IGdpdGRpciAuICcv
Y29uZmlnJwogIGlmIGVtcHR5KGdpdGRpcikgfHwgIWZpbGVyZWFkYWJsZShjb25maWcpCiAgICBy
ZXR1cm4gJycKICBlbmRpZgogIHJldHVybiBtYXRjaHN0cihqb2luKHJlYWRmaWxlKGNvbmZpZykp
LCAnXFtyZW1vdGUgIm9yaWdpbiJcXS5cey19dXJsXHMqPVxzKlx6c1xTKlx6ZScpCmVuZGZ1bmN0
aW9uCgpmdW5jdGlvbiEgczpnaXRfcmV2aXNpb24oZGlyKSBhYm9ydAogIGxldCBnaXRkaXIgPSBz
OmdpdF9kaXIoYTpkaXIpCiAgbGV0IGhlYWQgPSBnaXRkaXIgLiAnL0hFQUQnCiAgaWYgZW1wdHko
Z2l0ZGlyKSB8fCAhZmlsZXJlYWRhYmxlKGhlYWQpCiAgICByZXR1cm4gJycKICBlbmRpZgoKICBs
ZXQgbGluZSA9IGdldChyZWFkZmlsZShoZWFkKSwgMCwgJycpCiAgbGV0IHJlZiA9IG1hdGNoc3Ry
KGxpbmUsICdecmVmOiBcenMuKicpCiAgaWYgZW1wdHkocmVmKQogICAgcmV0dXJuIGxpbmUKICBl
bmRpZgoKICBpZiBmaWxlcmVhZGFibGUoZ2l0ZGlyIC4gJy8nIC4gcmVmKQogICAgcmV0dXJuIGdl
dChyZWFkZmlsZShnaXRkaXIgLiAnLycgLiByZWYpLCAwLCAnJykKICBlbmRpZgoKICBpZiBmaWxl
cmVhZGFibGUoZ2l0ZGlyIC4gJy9wYWNrZWQtcmVmcycpCiAgICBmb3IgbGluZSBpbiByZWFkZmls
ZShnaXRkaXIgLiAnL3BhY2tlZC1yZWZzJykKICAgICAgaWYgbGluZSA9fiMgJyAnIC4gcmVmCiAg
ICAgICAgcmV0dXJuIG1hdGNoc3RyKGxpbmUsICdeWzAtOWEtZl0qJykKICAgICAgZW5kaWYKICAg
IGVuZGZvcgogIGVuZGlmCgogIHJldHVybiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Z2l0
X2xvY2FsX2JyYW5jaChkaXIpIGFib3J0CiAgbGV0IGdpdGRpciA9IHM6Z2l0X2RpcihhOmRpcikK
ICBsZXQgaGVhZCA9IGdpdGRpciAuICcvSEVBRCcKICBpZiBlbXB0eShnaXRkaXIpIHx8ICFmaWxl
cmVhZGFibGUoaGVhZCkKICAgIHJldHVybiAnJwogIGVuZGlmCiAgbGV0IGJyYW5jaCA9IG1hdGNo
c3RyKGdldChyZWFkZmlsZShoZWFkKSwgMCwgJycpLCAnXnJlZjogcmVmcy9oZWFkcy9cenMuKicp
CiAgcmV0dXJuIGxlbihicmFuY2gpID8gYnJhbmNoIDogJ0hFQUQnCmVuZGZ1bmN0aW9uCgpmdW5j
dGlvbiEgczpnaXRfb3JpZ2luX2JyYW5jaChzcGVjKQogIGlmIGxlbihhOnNwZWMuYnJhbmNoKQog
ICAgcmV0dXJuIGE6c3BlYy5icmFuY2gKICBlbmRpZgoKICAiIFRoZSBmaWxlIG1heSBub3QgYmUg
cHJlc2VudCBpZiB0aGlzIGlzIGEgbG9jYWwgcmVwb3NpdG9yeQogIGxldCBnaXRkaXIgPSBzOmdp
dF9kaXIoYTpzcGVjLmRpcikKICBsZXQgb3JpZ2luX2hlYWQgPSBnaXRkaXIuJy9yZWZzL3JlbW90
ZXMvb3JpZ2luL0hFQUQnCiAgaWYgbGVuKGdpdGRpcikgJiYgZmlsZXJlYWRhYmxlKG9yaWdpbl9o
ZWFkKQogICAgcmV0dXJuIG1hdGNoc3RyKGdldChyZWFkZmlsZShvcmlnaW5faGVhZCksIDAsICcn
KSwKICAgICAgICAgICAgICAgICAgXCAnXnJlZjogcmVmcy9yZW1vdGVzL29yaWdpbi9cenMuKicp
CiAgZW5kaWYKCiAgIiBUaGUgY29tbWFuZCBtYXkgbm90IHJldHVybiB0aGUgbmFtZSBvZiBhIGJy
YW5jaCBpbiBkZXRhY2hlZCBIRUFEIHN0YXRlCiAgbGV0IHJlc3VsdCA9IHM6bGluZXMoczpzeXN0
ZW0oJ2dpdCBzeW1ib2xpYy1yZWYgLS1zaG9ydCBIRUFEJywgYTpzcGVjLmRpcikpCiAgcmV0dXJu
IHY6c2hlbGxfZXJyb3IgPyAnJyA6IHJlc3VsdFstMV0KZW5kZnVuY3Rpb24KCmlmIHM6aXNfd2lu
CiAgZnVuY3Rpb24hIHM6cGx1Z19jYWxsKGZuLCAuLi4pCiAgICBsZXQgc2hlbGxzbGFzaCA9ICZz
aGVsbHNsYXNoCiAgICB0cnkKICAgICAgc2V0IG5vc2hlbGxzbGFzaAogICAgICByZXR1cm4gY2Fs
bChhOmZuLCBhOjAwMCkKICAgIGZpbmFsbHkKICAgICAgbGV0ICZzaGVsbHNsYXNoID0gc2hlbGxz
bGFzaAogICAgZW5kdHJ5CiAgZW5kZnVuY3Rpb24KZWxzZQogIGZ1bmN0aW9uISBzOnBsdWdfY2Fs
bChmbiwgLi4uKQogICAgcmV0dXJuIGNhbGwoYTpmbiwgYTowMDApCiAgZW5kZnVuY3Rpb24KZW5k
aWYKCmZ1bmN0aW9uISBzOnBsdWdfZ2V0Y3dkKCkKICByZXR1cm4gczpwbHVnX2NhbGwoJ2dldGN3
ZCcpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwbHVnX2ZuYW1lbW9kaWZ5KGZuYW1lLCBtb2Rz
KQogIHJldHVybiBzOnBsdWdfY2FsbCgnZm5hbWVtb2RpZnknLCBhOmZuYW1lLCBhOm1vZHMpCmVu
ZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwbHVnX2V4cGFuZChmbXQpCiAgcmV0dXJuIHM6cGx1Z19j
YWxsKCdleHBhbmQnLCBhOmZtdCwgMSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnBsdWdfdGVt
cG5hbWUoKQogIHJldHVybiBzOnBsdWdfY2FsbCgndGVtcG5hbWUnKQplbmRmdW5jdGlvbgoKZnVu
Y3Rpb24hIHBsdWcjYmVnaW4oLi4uKQogIGlmIGE6MCA+IDAKICAgIGxldCBzOnBsdWdfaG9tZV9v
cmcgPSBhOjEKICAgIGxldCBob21lID0gczpwYXRoKHM6cGx1Z19mbmFtZW1vZGlmeShzOnBsdWdf
ZXhwYW5kKGE6MSksICc6cCcpKQogIGVsc2VpZiBleGlzdHMoJ2c6cGx1Z19ob21lJykKICAgIGxl
dCBob21lID0gczpwYXRoKGc6cGx1Z19ob21lKQogIGVsc2VpZiAhZW1wdHkoJnJ0cCkKICAgIGxl
dCBob21lID0gczpwYXRoKHNwbGl0KCZydHAsICcsJylbMF0pIC4gJy9wbHVnZ2VkJwogIGVsc2UK
ICAgIHJldHVybiBzOmVycignVW5hYmxlIHRvIGRldGVybWluZSBwbHVnIGhvbWUuIFRyeSBjYWxs
aW5nIHBsdWcjYmVnaW4oKSB3aXRoIGEgcGF0aCBhcmd1bWVudC4nKQogIGVuZGlmCiAgaWYgczpw
bHVnX2ZuYW1lbW9kaWZ5KGhvbWUsICc6dCcpID09IyAncGx1Z2luJyAmJiBzOnBsdWdfZm5hbWVt
b2RpZnkoaG9tZSwgJzpoJykgPT0jIHM6Zmlyc3RfcnRwCiAgICByZXR1cm4gczplcnIoJ0ludmFs
aWQgcGx1ZyBob21lLiAnLmhvbWUuJyBpcyBhIHN0YW5kYXJkIFZpbSBydW50aW1lIHBhdGggYW5k
IGlzIG5vdCBhbGxvd2VkLicpCiAgZW5kaWYKCiAgbGV0IGc6cGx1Z19ob21lID0gaG9tZQogIGxl
dCBnOnBsdWdzID0ge30KICBsZXQgZzpwbHVnc19vcmRlciA9IFtdCiAgbGV0IHM6dHJpZ2dlcnMg
PSB7fQoKICBjYWxsIHM6ZGVmaW5lX2NvbW1hbmRzKCkKICByZXR1cm4gMQplbmRmdW5jdGlvbgoK
ZnVuY3Rpb24hIHM6ZGVmaW5lX2NvbW1hbmRzKCkKICBjb21tYW5kISAtbmFyZ3M9KyAtYmFyIFBs
dWcgY2FsbCBwbHVnIyg8YXJncz4pCiAgaWYgIWV4ZWN1dGFibGUoJ2dpdCcpCiAgICByZXR1cm4g
czplcnIoJ2BnaXRgIGV4ZWN1dGFibGUgbm90IGZvdW5kLiBNb3N0IGNvbW1hbmRzIHdpbGwgbm90
IGJlIGF2YWlsYWJsZS4gVG8gc3VwcHJlc3MgdGhpcyBtZXNzYWdlLCBwcmVwZW5kIGBzaWxlbnQh
YCB0byBgY2FsbCBwbHVnI2JlZ2luKC4uLilgLicpCiAgZW5kaWYKICBpZiBoYXMoJ3dpbjMyJykK
ICBcICYmICZzaGVsbHNsYXNoCiAgXCAmJiAoJnNoZWxsID1+IyAnY21kXChcLmV4ZVwpXD8kJyB8
fCBzOmlzX3Bvd2Vyc2hlbGwoJnNoZWxsKSkKICAgIHJldHVybiBzOmVycigndmltLXBsdWcgZG9l
cyBub3Qgc3VwcG9ydCBzaGVsbCwgJyAuICZzaGVsbCAuICcsIHdoZW4gc2hlbGxzbGFzaCBpcyBz
ZXQuJykKICBlbmRpZgogIGlmICFoYXMoJ252aW0nKQogICAgXCAmJiAoaGFzKCd3aW4zMicpIHx8
IGhhcygnd2luMzJ1bml4JykpCiAgICBcICYmICFoYXMoJ211bHRpX2J5dGUnKQogICAgcmV0dXJu
IHM6ZXJyKCdWaW0gbmVlZHMgK211bHRpX2J5dGUgZmVhdHVyZSBvbiBXaW5kb3dzIHRvIHJ1biBz
aGVsbCBjb21tYW5kcy4gRW5hYmxlICtpY29udiBmb3IgYmVzdCByZXN1bHRzLicpCiAgZW5kaWYK
ICBjb21tYW5kISAtbmFyZ3M9KiAtYmFyIC1iYW5nIC1jb21wbGV0ZT1jdXN0b21saXN0LHM6bmFt
ZXMgUGx1Z0luc3RhbGwgY2FsbCBzOmluc3RhbGwoPGJhbmc+MCwgWzxmLWFyZ3M+XSkKICBjb21t
YW5kISAtbmFyZ3M9KiAtYmFyIC1iYW5nIC1jb21wbGV0ZT1jdXN0b21saXN0LHM6bmFtZXMgUGx1
Z1VwZGF0ZSAgY2FsbCBzOnVwZGF0ZSg8YmFuZz4wLCBbPGYtYXJncz5dKQogIGNvbW1hbmQhIC1u
YXJncz0wIC1iYXIgLWJhbmcgUGx1Z0NsZWFuIGNhbGwgczpjbGVhbig8YmFuZz4wKQogIGNvbW1h
bmQhIC1uYXJncz0wIC1iYXIgUGx1Z1VwZ3JhZGUgaWYgczp1cGdyYWRlKCkgfCBleGVjdXRlICdz
b3VyY2UnIHM6ZXNjKHM6bWUpIHwgZW5kaWYKICBjb21tYW5kISAtbmFyZ3M9MCAtYmFyIFBsdWdT
dGF0dXMgIGNhbGwgczpzdGF0dXMoKQogIGNvbW1hbmQhIC1uYXJncz0wIC1iYXIgUGx1Z0RpZmYg
ICAgY2FsbCBzOmRpZmYoKQogIGNvbW1hbmQhIC1uYXJncz0/IC1iYXIgLWJhbmcgLWNvbXBsZXRl
PWZpbGUgUGx1Z1NuYXBzaG90IGNhbGwgczpzbmFwc2hvdCg8YmFuZz4wLCA8Zi1hcmdzPikKZW5k
ZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnRvX2EodikKICByZXR1cm4gdHlwZShhOnYpID09IHM6VFlQ
RS5saXN0ID8gYTp2IDogW2E6dl0KZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnRvX3ModikKICBy
ZXR1cm4gdHlwZShhOnYpID09IHM6VFlQRS5zdHJpbmcgPyBhOnYgOiBqb2luKGE6diwgIlxuIikg
LiAiXG4iCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpnbG9iKGZyb20sIHBhdHRlcm4pCiAgcmV0
dXJuIHM6bGluZXMoZ2xvYnBhdGgoYTpmcm9tLCBhOnBhdHRlcm4pKQplbmRmdW5jdGlvbgoKZnVu
Y3Rpb24hIHM6c291cmNlKGZyb20sIC4uLikKICBsZXQgZm91bmQgPSAwCiAgZm9yIHBhdHRlcm4g
aW4gYTowMDAKICAgIGZvciB2aW0gaW4gczpnbG9iKGE6ZnJvbSwgcGF0dGVybikKICAgICAgZXhl
Y3V0ZSAnc291cmNlJyBzOmVzYyh2aW0pCiAgICAgIGxldCBmb3VuZCA9IDEKICAgIGVuZGZvcgog
IGVuZGZvcgogIHJldHVybiBmb3VuZAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXNzb2MoZGlj
dCwga2V5LCB2YWwpCiAgbGV0IGE6ZGljdFthOmtleV0gPSBhZGQoZ2V0KGE6ZGljdCwgYTprZXks
IFtdKSwgYTp2YWwpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczphc2sobWVzc2FnZSwgLi4uKQog
IGNhbGwgaW5wdXRzYXZlKCkKICBlY2hvaGwgV2FybmluZ01zZwogIGxldCBhbnN3ZXIgPSBpbnB1
dChhOm1lc3NhZ2UuKGE6MCA/ICcgKHkvTi9hKSAnIDogJyAoeS9OKSAnKSkKICBlY2hvaGwgTm9u
ZQogIGNhbGwgaW5wdXRyZXN0b3JlKCkKICBlY2hvICJcciIKICByZXR1cm4gKGE6MCAmJiBhbnN3
ZXIgPX4/ICdeYScpID8gMiA6IChhbnN3ZXIgPX4/ICdeeScpID8gMSA6IDAKZW5kZnVuY3Rpb24K
CmZ1bmN0aW9uISBzOmFza19ub19pbnRlcnJ1cHQoLi4uKQogIHRyeQogICAgcmV0dXJuIGNhbGwo
J3M6YXNrJywgYTowMDApCiAgY2F0Y2gKICAgIHJldHVybiAwCiAgZW5kdHJ5CmVuZGZ1bmN0aW9u
CgpmdW5jdGlvbiEgczpsYXp5KHBsdWcsIG9wdCkKICByZXR1cm4gaGFzX2tleShhOnBsdWcsIGE6
b3B0KSAmJgogICAgICAgIFwgKGVtcHR5KHM6dG9fYShhOnBsdWdbYTpvcHRdKSkgICAgICAgICB8
fAogICAgICAgIFwgICFpc2RpcmVjdG9yeShhOnBsdWcuZGlyKSAgICAgICAgICAgICB8fAogICAg
ICAgIFwgIGxlbihzOmdsb2IoczpydHAoYTpwbHVnKSwgJ3BsdWdpbicpKSB8fAogICAgICAgIFwg
IGxlbihzOmdsb2IoczpydHAoYTpwbHVnKSwgJ2FmdGVyL3BsdWdpbicpKSkKZW5kZnVuY3Rpb24K
CmZ1bmN0aW9uISBwbHVnI2VuZCgpCiAgaWYgIWV4aXN0cygnZzpwbHVncycpCiAgICByZXR1cm4g
czplcnIoJ3BsdWcjZW5kKCkgY2FsbGVkIHdpdGhvdXQgY2FsbGluZyBwbHVnI2JlZ2luKCkgZmly
c3QnKQogIGVuZGlmCgogIGlmIGV4aXN0cygnI1BsdWdMT0QnKQogICAgYXVncm91cCBQbHVnTE9E
CiAgICAgIGF1dG9jbWQhCiAgICBhdWdyb3VwIEVORAogICAgYXVncm91cCEgUGx1Z0xPRAogIGVu
ZGlmCiAgbGV0IGxvZCA9IHsgJ2Z0Jzoge30sICdtYXAnOiB7fSwgJ2NtZCc6IHt9IH0KCiAgaWYg
ZXhpc3RzKCdnOmRpZF9sb2FkX2ZpbGV0eXBlcycpCiAgICBmaWxldHlwZSBvZmYKICBlbmRpZgog
IGZvciBuYW1lIGluIGc6cGx1Z3Nfb3JkZXIKICAgIGlmICFoYXNfa2V5KGc6cGx1Z3MsIG5hbWUp
CiAgICAgIGNvbnRpbnVlCiAgICBlbmRpZgogICAgbGV0IHBsdWcgPSBnOnBsdWdzW25hbWVdCiAg
ICBpZiBnZXQoczpsb2FkZWQsIG5hbWUsIDApIHx8ICFzOmxhenkocGx1ZywgJ29uJykgJiYgIXM6
bGF6eShwbHVnLCAnZm9yJykKICAgICAgbGV0IHM6bG9hZGVkW25hbWVdID0gMQogICAgICBjb250
aW51ZQogICAgZW5kaWYKCiAgICBpZiBoYXNfa2V5KHBsdWcsICdvbicpCiAgICAgIGxldCBzOnRy
aWdnZXJzW25hbWVdID0geyAnbWFwJzogW10sICdjbWQnOiBbXSB9CiAgICAgIGZvciBjbWQgaW4g
czp0b19hKHBsdWcub24pCiAgICAgICAgaWYgY21kID1+PyAnXjxQbHVnPi5cKycKICAgICAgICAg
IGlmIGVtcHR5KG1hcGNoZWNrKGNtZCkpICYmIGVtcHR5KG1hcGNoZWNrKGNtZCwgJ2knKSkKICAg
ICAgICAgICAgY2FsbCBzOmFzc29jKGxvZC5tYXAsIGNtZCwgbmFtZSkKICAgICAgICAgIGVuZGlm
CiAgICAgICAgICBjYWxsIGFkZChzOnRyaWdnZXJzW25hbWVdLm1hcCwgY21kKQogICAgICAgIGVs
c2VpZiBjbWQgPX4jICdeW0EtWl0nCiAgICAgICAgICBsZXQgY21kID0gc3Vic3RpdHV0ZShjbWQs
ICchKiQnLCAnJywgJycpCiAgICAgICAgICBpZiBleGlzdHMoJzonLmNtZCkgIT0gMgogICAgICAg
ICAgICBjYWxsIHM6YXNzb2MobG9kLmNtZCwgY21kLCBuYW1lKQogICAgICAgICAgZW5kaWYKICAg
ICAgICAgIGNhbGwgYWRkKHM6dHJpZ2dlcnNbbmFtZV0uY21kLCBjbWQpCiAgICAgICAgZWxzZQog
ICAgICAgICAgY2FsbCBzOmVycignSW52YWxpZCBgb25gIG9wdGlvbjogJy5jbWQuCiAgICAgICAg
ICBcICcuIFNob3VsZCBzdGFydCB3aXRoIGFuIHVwcGVyY2FzZSBsZXR0ZXIgb3IgYDxQbHVnPmAu
JykKICAgICAgICBlbmRpZgogICAgICBlbmRmb3IKICAgIGVuZGlmCgogICAgaWYgaGFzX2tleShw
bHVnLCAnZm9yJykKICAgICAgbGV0IHR5cGVzID0gczp0b19hKHBsdWcuZm9yKQogICAgICBpZiAh
ZW1wdHkodHlwZXMpCiAgICAgICAgYXVncm91cCBmaWxldHlwZWRldGVjdAogICAgICAgIGNhbGwg
czpzb3VyY2UoczpydHAocGx1ZyksICdmdGRldGVjdC8qKi8qLnZpbScsICdhZnRlci9mdGRldGVj
dC8qKi8qLnZpbScpCiAgICAgICAgYXVncm91cCBFTkQKICAgICAgZW5kaWYKICAgICAgZm9yIHR5
cGUgaW4gdHlwZXMKICAgICAgICBjYWxsIHM6YXNzb2MobG9kLmZ0LCB0eXBlLCBuYW1lKQogICAg
ICBlbmRmb3IKICAgIGVuZGlmCiAgZW5kZm9yCgogIGZvciBbY21kLCBuYW1lc10gaW4gaXRlbXMo
bG9kLmNtZCkKICAgIGV4ZWN1dGUgcHJpbnRmKAogICAgXCAnY29tbWFuZCEgLW5hcmdzPSogLXJh
bmdlIC1iYW5nIC1jb21wbGV0ZT1maWxlICVzIGNhbGwgczpsb2RfY21kKCVzLCAiPGJhbmc+Iiwg
PGxpbmUxPiwgPGxpbmUyPiwgPHEtYXJncz4sICVzKScsCiAgICBcIGNtZCwgc3RyaW5nKGNtZCks
IHN0cmluZyhuYW1lcykpCiAgZW5kZm9yCgogIGZvciBbbWFwLCBuYW1lc10gaW4gaXRlbXMobG9k
Lm1hcCkKICAgIGZvciBbbW9kZSwgbWFwX3ByZWZpeCwga2V5X3ByZWZpeF0gaW4KICAgICAgICAg
IFwgW1snaScsICc8Qy1PPicsICcnXSwgWyduJywgJycsICcnXSwgWyd2JywgJycsICdndiddLCBb
J28nLCAnJywgJyddXQogICAgICBleGVjdXRlIHByaW50ZigKICAgICAgXCAnJXNub3JlbWFwIDxz
aWxlbnQ+ICVzICVzOjxDLVU+Y2FsbCA8U0lEPmxvZF9tYXAoJXMsICVzLCAlcywgIiVzIik8Q1I+
JywKICAgICAgXCBtb2RlLCBtYXAsIG1hcF9wcmVmaXgsIHN0cmluZyhtYXApLCBzdHJpbmcobmFt
ZXMpLCBtb2RlICE9ICdpJywga2V5X3ByZWZpeCkKICAgIGVuZGZvcgogIGVuZGZvcgoKICBmb3Ig
W2Z0LCBuYW1lc10gaW4gaXRlbXMobG9kLmZ0KQogICAgYXVncm91cCBQbHVnTE9ECiAgICAgIGV4
ZWN1dGUgcHJpbnRmKCdhdXRvY21kIEZpbGVUeXBlICVzIGNhbGwgPFNJRD5sb2RfZnQoJXMsICVz
KScsCiAgICAgICAgICAgIFwgZnQsIHN0cmluZyhmdCksIHN0cmluZyhuYW1lcykpCiAgICBhdWdy
b3VwIEVORAogIGVuZGZvcgoKICBjYWxsIHM6cmVvcmdfcnRwKCkKICBmaWxldHlwZSBwbHVnaW4g
aW5kZW50IG9uCiAgaWYgaGFzKCd2aW1fc3RhcnRpbmcnKQogICAgaWYgaGFzKCdzeW50YXgnKSAm
JiAhZXhpc3RzKCdnOnN5bnRheF9vbicpCiAgICAgIHN5bnRheCBlbmFibGUKICAgIGVuZAogIGVs
c2UKICAgIGNhbGwgczpyZWxvYWRfcGx1Z2lucygpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0
aW9uISBzOmxvYWRlZF9uYW1lcygpCiAgcmV0dXJuIGZpbHRlcihjb3B5KGc6cGx1Z3Nfb3JkZXIp
LCAnZ2V0KHM6bG9hZGVkLCB2OnZhbCwgMCknKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9h
ZF9wbHVnaW4oc3BlYykKICBjYWxsIHM6c291cmNlKHM6cnRwKGE6c3BlYyksICdwbHVnaW4vKiov
Ki52aW0nLCAnYWZ0ZXIvcGx1Z2luLyoqLyoudmltJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBz
OnJlbG9hZF9wbHVnaW5zKCkKICBmb3IgbmFtZSBpbiBzOmxvYWRlZF9uYW1lcygpCiAgICBjYWxs
IHM6bG9hZF9wbHVnaW4oZzpwbHVnc1tuYW1lXSkKICBlbmRmb3IKZW5kZnVuY3Rpb24KCmZ1bmN0
aW9uISBzOnRyaW0oc3RyKQogIHJldHVybiBzdWJzdGl0dXRlKGE6c3RyLCAnW1wvXVwrJCcsICcn
LCAnJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnZlcnNpb25fcmVxdWlyZW1lbnQodmFsLCBt
aW4pCiAgZm9yIGlkeCBpbiByYW5nZSgwLCBsZW4oYTptaW4pIC0gMSkKICAgIGxldCB2ID0gZ2V0
KGE6dmFsLCBpZHgsIDApCiAgICBpZiAgICAgdiA8IGE6bWluW2lkeF0gfCByZXR1cm4gMAogICAg
ZWxzZWlmIHYgPiBhOm1pbltpZHhdIHwgcmV0dXJuIDEKICAgIGVuZGlmCiAgZW5kZm9yCiAgcmV0
dXJuIDEKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdpdF92ZXJzaW9uX3JlcXVpcmVtZW50KC4u
LikKICBpZiAhZXhpc3RzKCdzOmdpdF92ZXJzaW9uJykKICAgIGxldCBzOmdpdF92ZXJzaW9uID0g
bWFwKHNwbGl0KHNwbGl0KHM6c3lzdGVtKFsnZ2l0JywgJy0tdmVyc2lvbiddKSlbMl0sICdcLicp
LCAnc3RyMm5yKHY6dmFsKScpCiAgZW5kaWYKICByZXR1cm4gczp2ZXJzaW9uX3JlcXVpcmVtZW50
KHM6Z2l0X3ZlcnNpb24sIGE6MDAwKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJvZ3Jlc3Nf
b3B0KGJhc2UpCiAgcmV0dXJuIGE6YmFzZSAmJiAhczppc193aW4gJiYKICAgICAgICBcIHM6Z2l0
X3ZlcnNpb25fcmVxdWlyZW1lbnQoMSwgNywgMSkgPyAnLS1wcm9ncmVzcycgOiAnJwplbmRmdW5j
dGlvbgoKZnVuY3Rpb24hIHM6cnRwKHNwZWMpCiAgcmV0dXJuIHM6cGF0aChhOnNwZWMuZGlyIC4g
Z2V0KGE6c3BlYywgJ3J0cCcsICcnKSkKZW5kZnVuY3Rpb24KCmlmIHM6aXNfd2luCiAgZnVuY3Rp
b24hIHM6cGF0aChwYXRoKQogICAgcmV0dXJuIHM6dHJpbShzdWJzdGl0dXRlKGE6cGF0aCwgJy8n
LCAnXCcsICdnJykpCiAgZW5kZnVuY3Rpb24KCiAgZnVuY3Rpb24hIHM6ZGlycGF0aChwYXRoKQog
ICAgcmV0dXJuIHM6cGF0aChhOnBhdGgpIC4gJ1wnCiAgZW5kZnVuY3Rpb24KCiAgZnVuY3Rpb24h
IHM6aXNfbG9jYWxfcGx1ZyhyZXBvKQogICAgcmV0dXJuIGE6cmVwbyA9fj8gJ15bYS16XTpcfF5b
JX5dJwogIGVuZGZ1bmN0aW9uCgogICIgQ29waWVkIGZyb20gZnpmCiAgZnVuY3Rpb24hIHM6d3Jh
cF9jbWRzKGNtZHMpCiAgICBsZXQgY21kcyA9IFsKICAgICAgXCAnQGVjaG8gb2ZmJywKICAgICAg
XCAnc2V0bG9jYWwgZW5hYmxlZGVsYXllZGV4cGFuc2lvbiddCiAgICBcICsgKHR5cGUoYTpjbWRz
KSA9PSB0eXBlKFtdKSA/IGE6Y21kcyA6IFthOmNtZHNdKQogICAgXCArIFsnZW5kbG9jYWwnXQog
ICAgaWYgaGFzKCdpY29udicpCiAgICAgIGlmICFleGlzdHMoJ3M6Y29kZXBhZ2UnKQogICAgICAg
IGxldCBzOmNvZGVwYWdlID0gbGliY2FsbG5yKCdrZXJuZWwzMi5kbGwnLCAnR2V0QUNQJywgMCkK
ICAgICAgZW5kaWYKICAgICAgcmV0dXJuIG1hcChjbWRzLCBwcmludGYoJ2ljb252KHY6dmFsLiJc
ciIsICIlcyIsICJjcCVkIiknLCAmZW5jb2RpbmcsIHM6Y29kZXBhZ2UpKQogICAgZW5kaWYKICAg
IHJldHVybiBtYXAoY21kcywgJ3Y6dmFsLiJcciInKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9u
ISBzOmJhdGNoZmlsZShjbWQpCiAgICBsZXQgYmF0Y2hmaWxlID0gczpwbHVnX3RlbXBuYW1lKCku
Jy5iYXQnCiAgICBjYWxsIHdyaXRlZmlsZShzOndyYXBfY21kcyhhOmNtZCksIGJhdGNoZmlsZSkK
ICAgIGxldCBjbWQgPSBwbHVnI3NoZWxsZXNjYXBlKGJhdGNoZmlsZSwgeydzaGVsbCc6ICZzaGVs
bCwgJ3NjcmlwdCc6IDB9KQogICAgaWYgczppc19wb3dlcnNoZWxsKCZzaGVsbCkKICAgICAgbGV0
IGNtZCA9ICcmICcgLiBjbWQKICAgIGVuZGlmCiAgICByZXR1cm4gW2JhdGNoZmlsZSwgY21kXQog
IGVuZGZ1bmN0aW9uCmVsc2UKICBmdW5jdGlvbiEgczpwYXRoKHBhdGgpCiAgICByZXR1cm4gczp0
cmltKGE6cGF0aCkKICBlbmRmdW5jdGlvbgoKICBmdW5jdGlvbiEgczpkaXJwYXRoKHBhdGgpCiAg
ICByZXR1cm4gc3Vic3RpdHV0ZShhOnBhdGgsICdbL1xcXSokJywgJy8nLCAnJykKICBlbmRmdW5j
dGlvbgoKICBmdW5jdGlvbiEgczppc19sb2NhbF9wbHVnKHJlcG8pCiAgICByZXR1cm4gYTpyZXBv
WzBdID1+ICdbLyR+XScKICBlbmRmdW5jdGlvbgplbmRpZgoKZnVuY3Rpb24hIHM6ZXJyKG1zZykK
ICBlY2hvaGwgRXJyb3JNc2cKICBlY2hvbSAnW3ZpbS1wbHVnXSAnLmE6bXNnCiAgZWNob2hsIE5v
bmUKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOndhcm4oY21kLCBtc2cpCiAgZWNob2hsIFdhcm5p
bmdNc2cKICBleGVjdXRlIGE6Y21kICdhOm1zZycKICBlY2hvaGwgTm9uZQplbmRmdW5jdGlvbgoK
ZnVuY3Rpb24hIHM6ZXNjKHBhdGgpCiAgcmV0dXJuIGVzY2FwZShhOnBhdGgsICcgJykKZW5kZnVu
Y3Rpb24KCmZ1bmN0aW9uISBzOmVzY3J0cChwYXRoKQogIHJldHVybiBlc2NhcGUoYTpwYXRoLCAn
ICwnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cmVtb3ZlX3J0cCgpCiAgZm9yIG5hbWUgaW4g
czpsb2FkZWRfbmFtZXMoKQogICAgbGV0IHJ0cCA9IHM6cnRwKGc6cGx1Z3NbbmFtZV0pCiAgICBl
eGVjdXRlICdzZXQgcnRwLT0nLnM6ZXNjcnRwKHJ0cCkKICAgIGxldCBhZnRlciA9IGdsb2JwYXRo
KHJ0cCwgJ2FmdGVyJykKICAgIGlmIGlzZGlyZWN0b3J5KGFmdGVyKQogICAgICBleGVjdXRlICdz
ZXQgcnRwLT0nLnM6ZXNjcnRwKGFmdGVyKQogICAgZW5kaWYKICBlbmRmb3IKZW5kZnVuY3Rpb24K
CmZ1bmN0aW9uISBzOnJlb3JnX3J0cCgpCiAgaWYgIWVtcHR5KHM6Zmlyc3RfcnRwKQogICAgZXhl
Y3V0ZSAnc2V0IHJ0cC09Jy5zOmZpcnN0X3J0cAogICAgZXhlY3V0ZSAnc2V0IHJ0cC09Jy5zOmxh
c3RfcnRwCiAgZW5kaWYKCiAgIiAmcnRwIGlzIG1vZGlmaWVkIGZyb20gb3V0c2lkZQogIGlmIGV4
aXN0cygnczpwcnRwJykgJiYgczpwcnRwICE9IyAmcnRwCiAgICBjYWxsIHM6cmVtb3ZlX3J0cCgp
CiAgICB1bmxldCEgczptaWRkbGUKICBlbmRpZgoKICBsZXQgczptaWRkbGUgPSBnZXQoczosICdt
aWRkbGUnLCAmcnRwKQogIGxldCBydHBzICAgICA9IG1hcChzOmxvYWRlZF9uYW1lcygpLCAnczpy
dHAoZzpwbHVnc1t2OnZhbF0pJykKICBsZXQgYWZ0ZXJzICAgPSBmaWx0ZXIobWFwKGNvcHkocnRw
cyksICdnbG9icGF0aCh2OnZhbCwgImFmdGVyIiknKSwgJyFlbXB0eSh2OnZhbCknKQogIGxldCBy
dHAgICAgICA9IGpvaW4obWFwKHJ0cHMsICdlc2NhcGUodjp2YWwsICIsIiknKSwgJywnKQogICAg
ICAgICAgICAgICAgIFwgLiAnLCcuczptaWRkbGUuJywnCiAgICAgICAgICAgICAgICAgXCAuIGpv
aW4obWFwKGFmdGVycywgJ2VzY2FwZSh2OnZhbCwgIiwiKScpLCAnLCcpCiAgbGV0ICZydHAgICAg
ID0gc3Vic3RpdHV0ZShzdWJzdGl0dXRlKHJ0cCwgJywsKicsICcsJywgJ2cnKSwgJ14sXHwsJCcs
ICcnLCAnZycpCiAgbGV0IHM6cHJ0cCAgID0gJnJ0cAoKICBpZiAhZW1wdHkoczpmaXJzdF9ydHAp
CiAgICBleGVjdXRlICdzZXQgcnRwXj0nLnM6Zmlyc3RfcnRwCiAgICBleGVjdXRlICdzZXQgcnRw
Kz0nLnM6bGFzdF9ydHAKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZG9hdXRvY21k
KC4uLikKICBpZiBleGlzdHMoJyMnLmpvaW4oYTowMDAsICcjJykpCiAgICBleGVjdXRlICdkb2F1
dG9jbWQnICgodjp2ZXJzaW9uID4gNzAzIHx8IGhhcygncGF0Y2g0NDInKSkgPyAnPG5vbW9kZWxp
bmU+JyA6ICcnKSBqb2luKGE6MDAwKQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpk
b2J1ZnJlYWQobmFtZXMpCiAgZm9yIG5hbWUgaW4gYTpuYW1lcwogICAgbGV0IHBhdGggPSBzOnJ0
cChnOnBsdWdzW25hbWVdKQogICAgZm9yIGRpciBpbiBbJ2Z0ZGV0ZWN0JywgJ2Z0cGx1Z2luJywg
J2FmdGVyL2Z0ZGV0ZWN0JywgJ2FmdGVyL2Z0cGx1Z2luJ10KICAgICAgaWYgbGVuKGZpbmRkaXIo
ZGlyLCBwYXRoKSkKICAgICAgICBpZiBleGlzdHMoJyNCdWZSZWFkJykKICAgICAgICAgIGRvYXV0
b2NtZCBCdWZSZWFkCiAgICAgICAgZW5kaWYKICAgICAgICByZXR1cm4KICAgICAgZW5kaWYKICAg
IGVuZGZvcgogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHBsdWcjbG9hZCguLi4pCiAg
aWYgYTowID09IDAKICAgIHJldHVybiBzOmVycignQXJndW1lbnQgbWlzc2luZzogcGx1Z2luIG5h
bWUocykgcmVxdWlyZWQnKQogIGVuZGlmCiAgaWYgIWV4aXN0cygnZzpwbHVncycpCiAgICByZXR1
cm4gczplcnIoJ3BsdWcjYmVnaW4gd2FzIG5vdCBjYWxsZWQnKQogIGVuZGlmCiAgbGV0IG5hbWVz
ID0gYTowID09IDEgJiYgdHlwZShhOjEpID09IHM6VFlQRS5saXN0ID8gYToxIDogYTowMDAKICBs
ZXQgdW5rbm93bnMgPSBmaWx0ZXIoY29weShuYW1lcyksICchaGFzX2tleShnOnBsdWdzLCB2OnZh
bCknKQogIGlmICFlbXB0eSh1bmtub3ducykKICAgIGxldCBzID0gbGVuKHVua25vd25zKSA+IDEg
PyAncycgOiAnJwogICAgcmV0dXJuIHM6ZXJyKHByaW50ZignVW5rbm93biBwbHVnaW4lczogJXMn
LCBzLCBqb2luKHVua25vd25zLCAnLCAnKSkpCiAgZW5kCiAgbGV0IHVubG9hZGVkID0gZmlsdGVy
KGNvcHkobmFtZXMpLCAnIWdldChzOmxvYWRlZCwgdjp2YWwsIDApJykKICBpZiAhZW1wdHkodW5s
b2FkZWQpCiAgICBmb3IgbmFtZSBpbiB1bmxvYWRlZAogICAgICBjYWxsIHM6bG9kKFtuYW1lXSwg
WydmdGRldGVjdCcsICdhZnRlci9mdGRldGVjdCcsICdwbHVnaW4nLCAnYWZ0ZXIvcGx1Z2luJ10p
CiAgICBlbmRmb3IKICAgIGNhbGwgczpkb2J1ZnJlYWQodW5sb2FkZWQpCiAgICByZXR1cm4gMQog
IGVuZAogIHJldHVybiAwCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZW1vdmVfdHJpZ2dlcnMo
bmFtZSkKICBpZiAhaGFzX2tleShzOnRyaWdnZXJzLCBhOm5hbWUpCiAgICByZXR1cm4KICBlbmRp
ZgogIGZvciBjbWQgaW4gczp0cmlnZ2Vyc1thOm5hbWVdLmNtZAogICAgZXhlY3V0ZSAnc2lsZW50
ISBkZWxjJyBjbWQKICBlbmRmb3IKICBmb3IgbWFwIGluIHM6dHJpZ2dlcnNbYTpuYW1lXS5tYXAK
ICAgIGV4ZWN1dGUgJ3NpbGVudCEgdW5tYXAnIG1hcAogICAgZXhlY3V0ZSAnc2lsZW50ISBpdW5t
YXAnIG1hcAogIGVuZGZvcgogIGNhbGwgcmVtb3ZlKHM6dHJpZ2dlcnMsIGE6bmFtZSkKZW5kZnVu
Y3Rpb24KCmZ1bmN0aW9uISBzOmxvZChuYW1lcywgdHlwZXMsIC4uLikKICBmb3IgbmFtZSBpbiBh
Om5hbWVzCiAgICBjYWxsIHM6cmVtb3ZlX3RyaWdnZXJzKG5hbWUpCiAgICBsZXQgczpsb2FkZWRb
bmFtZV0gPSAxCiAgZW5kZm9yCiAgY2FsbCBzOnJlb3JnX3J0cCgpCgogIGZvciBuYW1lIGluIGE6
bmFtZXMKICAgIGxldCBydHAgPSBzOnJ0cChnOnBsdWdzW25hbWVdKQogICAgZm9yIGRpciBpbiBh
OnR5cGVzCiAgICAgIGNhbGwgczpzb3VyY2UocnRwLCBkaXIuJy8qKi8qLnZpbScpCiAgICBlbmRm
b3IKICAgIGlmIGE6MAogICAgICBpZiAhczpzb3VyY2UocnRwLCBhOjEpICYmICFlbXB0eShzOmds
b2IocnRwLCBhOjIpKQogICAgICAgIGV4ZWN1dGUgJ3J1bnRpbWUnIGE6MQogICAgICBlbmRpZgog
ICAgICBjYWxsIHM6c291cmNlKHJ0cCwgYToyKQogICAgZW5kaWYKICAgIGNhbGwgczpkb2F1dG9j
bWQoJ1VzZXInLCBuYW1lKQogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9kX2Z0
KHBhdCwgbmFtZXMpCiAgbGV0IHN5biA9ICdzeW50YXgvJy5hOnBhdC4nLnZpbScKICBjYWxsIHM6
bG9kKGE6bmFtZXMsIFsncGx1Z2luJywgJ2FmdGVyL3BsdWdpbiddLCBzeW4sICdhZnRlci8nLnN5
bikKICBleGVjdXRlICdhdXRvY21kISBQbHVnTE9EIEZpbGVUeXBlJyBhOnBhdAogIGNhbGwgczpk
b2F1dG9jbWQoJ2ZpbGV0eXBlcGx1Z2luJywgJ0ZpbGVUeXBlJykKICBjYWxsIHM6ZG9hdXRvY21k
KCdmaWxldHlwZWluZGVudCcsICdGaWxlVHlwZScpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczps
b2RfY21kKGNtZCwgYmFuZywgbDEsIGwyLCBhcmdzLCBuYW1lcykKICBjYWxsIHM6bG9kKGE6bmFt
ZXMsIFsnZnRkZXRlY3QnLCAnYWZ0ZXIvZnRkZXRlY3QnLCAncGx1Z2luJywgJ2FmdGVyL3BsdWdp
biddKQogIGNhbGwgczpkb2J1ZnJlYWQoYTpuYW1lcykKICBleGVjdXRlIHByaW50ZignJXMlcyVz
ICVzJywgKGE6bDEgPT0gYTpsMiA/ICcnIDogKGE6bDEuJywnLmE6bDIpKSwgYTpjbWQsIGE6YmFu
ZywgYTphcmdzKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9kX21hcChtYXAsIG5hbWVzLCB3
aXRoX3ByZWZpeCwgcHJlZml4KQogIGNhbGwgczpsb2QoYTpuYW1lcywgWydmdGRldGVjdCcsICdh
ZnRlci9mdGRldGVjdCcsICdwbHVnaW4nLCAnYWZ0ZXIvcGx1Z2luJ10pCiAgY2FsbCBzOmRvYnVm
cmVhZChhOm5hbWVzKQogIGxldCBleHRyYSA9ICcnCiAgd2hpbGUgMQogICAgbGV0IGMgPSBnZXRj
aGFyKDApCiAgICBpZiBjID09IDAKICAgICAgYnJlYWsKICAgIGVuZGlmCiAgICBsZXQgZXh0cmEg
Lj0gbnIyY2hhcihjKQogIGVuZHdoaWxlCgogIGlmIGE6d2l0aF9wcmVmaXgKICAgIGxldCBwcmVm
aXggPSB2OmNvdW50ID8gdjpjb3VudCA6ICcnCiAgICBsZXQgcHJlZml4IC49ICciJy52OnJlZ2lz
dGVyLmE6cHJlZml4CiAgICBpZiBtb2RlKDEpID09ICdubycKICAgICAgaWYgdjpvcGVyYXRvciA9
PSAnYycKICAgICAgICBsZXQgcHJlZml4ID0gIlw8ZXNjPiIgLiBwcmVmaXgKICAgICAgZW5kaWYK
ICAgICAgbGV0IHByZWZpeCAuPSB2Om9wZXJhdG9yCiAgICBlbmRpZgogICAgY2FsbCBmZWVka2V5
cyhwcmVmaXgsICduJykKICBlbmRpZgogIGNhbGwgZmVlZGtleXMoc3Vic3RpdHV0ZShhOm1hcCwg
J148UGx1Zz4nLCAiXDxQbHVnPiIsICcnKSAuIGV4dHJhKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24h
IHBsdWcjKHJlcG8sIC4uLikKICBpZiBhOjAgPiAxCiAgICByZXR1cm4gczplcnIoJ0ludmFsaWQg
bnVtYmVyIG9mIGFyZ3VtZW50cyAoMS4uMiknKQogIGVuZGlmCgogIHRyeQogICAgbGV0IHJlcG8g
PSBzOnRyaW0oYTpyZXBvKQogICAgbGV0IG9wdHMgPSBhOjAgPT0gMSA/IHM6cGFyc2Vfb3B0aW9u
cyhhOjEpIDogczpiYXNlX3NwZWMKICAgIGxldCBuYW1lID0gZ2V0KG9wdHMsICdhcycsIHM6cGx1
Z19mbmFtZW1vZGlmeShyZXBvLCAnOnQ6cz9cLmdpdCQ/PycpKQogICAgbGV0IHNwZWMgPSBleHRl
bmQoczppbmZlcl9wcm9wZXJ0aWVzKG5hbWUsIHJlcG8pLCBvcHRzKQogICAgaWYgIWhhc19rZXko
ZzpwbHVncywgbmFtZSkKICAgICAgY2FsbCBhZGQoZzpwbHVnc19vcmRlciwgbmFtZSkKICAgIGVu
ZGlmCiAgICBsZXQgZzpwbHVnc1tuYW1lXSA9IHNwZWMKICAgIGxldCBzOmxvYWRlZFtuYW1lXSA9
IGdldChzOmxvYWRlZCwgbmFtZSwgMCkKICBjYXRjaAogICAgcmV0dXJuIHM6ZXJyKHJlcG8gLiAn
ICcgLiB2OmV4Y2VwdGlvbikKICBlbmR0cnkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnBhcnNl
X29wdGlvbnMoYXJnKQogIGxldCBvcHRzID0gY29weShzOmJhc2Vfc3BlYykKICBsZXQgdHlwZSA9
IHR5cGUoYTphcmcpCiAgbGV0IG9wdF9lcnJmbXQgPSAnSW52YWxpZCBhcmd1bWVudCBmb3IgIiVz
IiBvcHRpb24gb2YgOlBsdWcgKGV4cGVjdGVkOiAlcyknCiAgaWYgdHlwZSA9PSBzOlRZUEUuc3Ry
aW5nCiAgICBpZiBlbXB0eShhOmFyZykKICAgICAgdGhyb3cgcHJpbnRmKG9wdF9lcnJmbXQsICd0
YWcnLCAnc3RyaW5nJykKICAgIGVuZGlmCiAgICBsZXQgb3B0cy50YWcgPSBhOmFyZwogIGVsc2Vp
ZiB0eXBlID09IHM6VFlQRS5kaWN0CiAgICBmb3Igb3B0IGluIFsnYnJhbmNoJywgJ3RhZycsICdj
b21taXQnLCAncnRwJywgJ2RpcicsICdhcyddCiAgICAgIGlmIGhhc19rZXkoYTphcmcsIG9wdCkK
ICAgICAgXCAmJiAodHlwZShhOmFyZ1tvcHRdKSAhPSBzOlRZUEUuc3RyaW5nIHx8IGVtcHR5KGE6
YXJnW29wdF0pKQogICAgICAgIHRocm93IHByaW50ZihvcHRfZXJyZm10LCBvcHQsICdzdHJpbmcn
KQogICAgICBlbmRpZgogICAgZW5kZm9yCiAgICBmb3Igb3B0IGluIFsnb24nLCAnZm9yJ10KICAg
ICAgaWYgaGFzX2tleShhOmFyZywgb3B0KQogICAgICBcICYmIHR5cGUoYTphcmdbb3B0XSkgIT0g
czpUWVBFLmxpc3QKICAgICAgXCAmJiAodHlwZShhOmFyZ1tvcHRdKSAhPSBzOlRZUEUuc3RyaW5n
IHx8IGVtcHR5KGE6YXJnW29wdF0pKQogICAgICAgIHRocm93IHByaW50ZihvcHRfZXJyZm10LCBv
cHQsICdzdHJpbmcgb3IgbGlzdCcpCiAgICAgIGVuZGlmCiAgICBlbmRmb3IKICAgIGlmIGhhc19r
ZXkoYTphcmcsICdkbycpCiAgICAgIFwgJiYgdHlwZShhOmFyZy5kbykgIT0gczpUWVBFLmZ1bmNy
ZWYKICAgICAgXCAmJiAodHlwZShhOmFyZy5kbykgIT0gczpUWVBFLnN0cmluZyB8fCBlbXB0eShh
OmFyZy5kbykpCiAgICAgICAgdGhyb3cgcHJpbnRmKG9wdF9lcnJmbXQsICdkbycsICdzdHJpbmcg
b3IgZnVuY3JlZicpCiAgICBlbmRpZgogICAgY2FsbCBleHRlbmQob3B0cywgYTphcmcpCiAgICBp
ZiBoYXNfa2V5KG9wdHMsICdkaXInKQogICAgICBsZXQgb3B0cy5kaXIgPSBzOmRpcnBhdGgoczpw
bHVnX2V4cGFuZChvcHRzLmRpcikpCiAgICBlbmRpZgogIGVsc2UKICAgIHRocm93ICdJbnZhbGlk
IGFyZ3VtZW50IHR5cGUgKGV4cGVjdGVkOiBzdHJpbmcgb3IgZGljdGlvbmFyeSknCiAgZW5kaWYK
ICByZXR1cm4gb3B0cwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aW5mZXJfcHJvcGVydGllcyhu
YW1lLCByZXBvKQogIGxldCByZXBvID0gYTpyZXBvCiAgaWYgczppc19sb2NhbF9wbHVnKHJlcG8p
CiAgICByZXR1cm4geyAnZGlyJzogczpkaXJwYXRoKHM6cGx1Z19leHBhbmQocmVwbykpIH0KICBl
bHNlCiAgICBpZiByZXBvID1+ICc6JwogICAgICBsZXQgdXJpID0gcmVwbwogICAgZWxzZQogICAg
ICBpZiByZXBvICF+ICcvJwogICAgICAgIHRocm93IHByaW50ZignSW52YWxpZCBhcmd1bWVudDog
JXMgKGltcGxpY2l0IGB2aW0tc2NyaXB0cycnIGV4cGFuc2lvbiBpcyBkZXByZWNhdGVkKScsIHJl
cG8pCiAgICAgIGVuZGlmCiAgICAgIGxldCBmbXQgPSBnZXQoZzosICdwbHVnX3VybF9mb3JtYXQn
LCAnaHR0cHM6Ly9naXQ6OkBnaXRodWIuY29tLyVzLmdpdCcpCiAgICAgIGxldCB1cmkgPSBwcmlu
dGYoZm10LCByZXBvKQogICAgZW5kaWYKICAgIHJldHVybiB7ICdkaXInOiBzOmRpcnBhdGgoZzpw
bHVnX2hvbWUuJy8nLmE6bmFtZSksICd1cmknOiB1cmkgfQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpm
dW5jdGlvbiEgczppbnN0YWxsKGZvcmNlLCBuYW1lcykKICBjYWxsIHM6dXBkYXRlX2ltcGwoMCwg
YTpmb3JjZSwgYTpuYW1lcykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZGF0ZShmb3JjZSwg
bmFtZXMpCiAgY2FsbCBzOnVwZGF0ZV9pbXBsKDEsIGE6Zm9yY2UsIGE6bmFtZXMpCmVuZGZ1bmN0
aW9uCgpmdW5jdGlvbiEgcGx1ZyNoZWxwdGFncygpCiAgaWYgIWV4aXN0cygnZzpwbHVncycpCiAg
ICByZXR1cm4gczplcnIoJ3BsdWcjYmVnaW4gd2FzIG5vdCBjYWxsZWQnKQogIGVuZGlmCiAgZm9y
IHNwZWMgaW4gdmFsdWVzKGc6cGx1Z3MpCiAgICBsZXQgZG9jZCA9IGpvaW4oW3M6cnRwKHNwZWMp
LCAnZG9jJ10sICcvJykKICAgIGlmIGlzZGlyZWN0b3J5KGRvY2QpCiAgICAgIHNpbGVudCEgZXhl
Y3V0ZSAnaGVscHRhZ3MnIHM6ZXNjKGRvY2QpCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiAx
CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzeW50YXgoKQogIHN5bnRheCBjbGVhcgogIHN5bnRh
eCByZWdpb24gcGx1ZzEgc3RhcnQ9L1wlMWwvIGVuZD0vXCUybC8gY29udGFpbnM9cGx1Z051bWJl
cgogIHN5bnRheCByZWdpb24gcGx1ZzIgc3RhcnQ9L1wlMmwvIGVuZD0vXCUzbC8gY29udGFpbnM9
cGx1Z0JyYWNrZXQscGx1Z1gKICBzeW4gbWF0Y2ggcGx1Z051bWJlciAvWzAtOV1cK1swLTkuXSov
IGNvbnRhaW5lZAogIHN5biBtYXRjaCBwbHVnQnJhY2tldCAvW1tcXV0vIGNvbnRhaW5lZAogIHN5
biBtYXRjaCBwbHVnWCAveC8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdEYXNoIC9eLVx7MX1c
IC8KICBzeW4gbWF0Y2ggcGx1Z1BsdXMgL14rLwogIHN5biBtYXRjaCBwbHVnU3RhciAvXiovCiAg
c3luIG1hdGNoIHBsdWdNZXNzYWdlIC9cKF4tIFwpXEA8PS4qLwogIHN5biBtYXRjaCBwbHVnTmFt
ZSAvXCheLSBcKVxAPD1bXiBdKjovCiAgc3luIG1hdGNoIHBsdWdTaGEgL1wlKDogXClcQDw9WzAt
OWEtZl1cezQsfSQvCiAgc3luIG1hdGNoIHBsdWdUYWcgLyh0YWc6IFteKV1cKykvCiAgc3luIG1h
dGNoIHBsdWdJbnN0YWxsIC9cKF4rIFwpXEA8PVteOl0qLwogIHN5biBtYXRjaCBwbHVnVXBkYXRl
IC9cKF4qIFwpXEA8PVteOl0qLwogIHN5biBtYXRjaCBwbHVnQ29tbWl0IC9eICBcWCpbMC05YS1m
XVx7Nyw5fSAuKi8gY29udGFpbnM9cGx1Z1JlbERhdGUscGx1Z0VkZ2UscGx1Z1RhZwogIHN5biBt
YXRjaCBwbHVnRWRnZSAvXiAgXFhcKyQvCiAgc3luIG1hdGNoIHBsdWdFZGdlIC9eICBcWCovIGNv
bnRhaW5lZCBuZXh0Z3JvdXA9cGx1Z1NoYQogIHN5biBtYXRjaCBwbHVnU2hhIC9bMC05YS1mXVx7
Nyw5fS8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdSZWxEYXRlIC8oW14pXSopJC8gY29udGFp
bmVkCiAgc3luIG1hdGNoIHBsdWdOb3RMb2FkZWQgLyhub3QgbG9hZGVkKSQvCiAgc3luIG1hdGNo
IHBsdWdFcnJvciAvXnguKi8KICBzeW4gcmVnaW9uIHBsdWdEZWxldGVkIHN0YXJ0PS9eXH4gLiov
IGVuZD0vXlx6ZVxTLwogIHN5biBtYXRjaCBwbHVnSDIgL14uKjpcbi1cKyQvCiAgc3luIG1hdGNo
IHBsdWdIMiAvXi1cezIsfS8KICBzeW4ga2V5d29yZCBGdW5jdGlvbiBQbHVnSW5zdGFsbCBQbHVn
U3RhdHVzIFBsdWdVcGRhdGUgUGx1Z0NsZWFuCiAgaGkgZGVmIGxpbmsgcGx1ZzEgICAgICAgVGl0
bGUKICBoaSBkZWYgbGluayBwbHVnMiAgICAgICBSZXBlYXQKICBoaSBkZWYgbGluayBwbHVnSDIg
ICAgICBUeXBlCiAgaGkgZGVmIGxpbmsgcGx1Z1ggICAgICAgRXhjZXB0aW9uCiAgaGkgZGVmIGxp
bmsgcGx1Z0JyYWNrZXQgU3RydWN0dXJlCiAgaGkgZGVmIGxpbmsgcGx1Z051bWJlciAgTnVtYmVy
CgogIGhpIGRlZiBsaW5rIHBsdWdEYXNoICAgIFNwZWNpYWwKICBoaSBkZWYgbGluayBwbHVnUGx1
cyAgICBDb25zdGFudAogIGhpIGRlZiBsaW5rIHBsdWdTdGFyICAgIEJvb2xlYW4KCiAgaGkgZGVm
IGxpbmsgcGx1Z01lc3NhZ2UgRnVuY3Rpb24KICBoaSBkZWYgbGluayBwbHVnTmFtZSAgICBMYWJl
bAogIGhpIGRlZiBsaW5rIHBsdWdJbnN0YWxsIEZ1bmN0aW9uCiAgaGkgZGVmIGxpbmsgcGx1Z1Vw
ZGF0ZSAgVHlwZQoKICBoaSBkZWYgbGluayBwbHVnRXJyb3IgICBFcnJvcgogIGhpIGRlZiBsaW5r
IHBsdWdEZWxldGVkIElnbm9yZQogIGhpIGRlZiBsaW5rIHBsdWdSZWxEYXRlIENvbW1lbnQKICBo
aSBkZWYgbGluayBwbHVnRWRnZSAgICBQcmVQcm9jCiAgaGkgZGVmIGxpbmsgcGx1Z1NoYSAgICAg
SWRlbnRpZmllcgogIGhpIGRlZiBsaW5rIHBsdWdUYWcgICAgIENvbnN0YW50CgogIGhpIGRlZiBs
aW5rIHBsdWdOb3RMb2FkZWQgQ29tbWVudAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bHBhZChz
dHIsIGxlbikKICByZXR1cm4gYTpzdHIgLiByZXBlYXQoJyAnLCBhOmxlbiAtIGxlbihhOnN0cikp
CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsaW5lcyhtc2cpCiAgcmV0dXJuIHNwbGl0KGE6bXNn
LCAiW1xyXG5dIikKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxhc3RsaW5lKG1zZykKICByZXR1
cm4gZ2V0KHM6bGluZXMoYTptc2cpLCAtMSwgJycpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpu
ZXdfd2luZG93KCkKICBleGVjdXRlIGdldChnOiwgJ3BsdWdfd2luZG93JywgJ3ZlcnRpY2FsIHRv
cGxlZnQgbmV3JykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnBsdWdfd2luZG93X2V4aXN0cygp
CiAgbGV0IGJ1Zmxpc3QgPSB0YWJwYWdlYnVmbGlzdChzOnBsdWdfdGFiKQogIHJldHVybiAhZW1w
dHkoYnVmbGlzdCkgJiYgaW5kZXgoYnVmbGlzdCwgczpwbHVnX2J1ZikgPj0gMAplbmRmdW5jdGlv
bgoKZnVuY3Rpb24hIHM6c3dpdGNoX2luKCkKICBpZiAhczpwbHVnX3dpbmRvd19leGlzdHMoKQog
ICAgcmV0dXJuIDAKICBlbmRpZgoKICBpZiB3aW5idWZucigwKSAhPSBzOnBsdWdfYnVmCiAgICBs
ZXQgczpwb3MgPSBbdGFicGFnZW5yKCksIHdpbm5yKCksIHdpbnNhdmV2aWV3KCldCiAgICBleGVj
dXRlICdub3JtYWwhJyBzOnBsdWdfdGFiLidndCcKICAgIGxldCB3aW5uciA9IGJ1Zndpbm5yKHM6
cGx1Z19idWYpCiAgICBleGVjdXRlIHdpbm5yLid3aW5jbWQgdycKICAgIGNhbGwgYWRkKHM6cG9z
LCB3aW5zYXZldmlldygpKQogIGVsc2UKICAgIGxldCBzOnBvcyA9IFt3aW5zYXZldmlldygpXQog
IGVuZGlmCgogIHNldGxvY2FsIG1vZGlmaWFibGUKICByZXR1cm4gMQplbmRmdW5jdGlvbgoKZnVu
Y3Rpb24hIHM6c3dpdGNoX291dCguLi4pCiAgY2FsbCB3aW5yZXN0dmlldyhzOnBvc1stMV0pCiAg
c2V0bG9jYWwgbm9tb2RpZmlhYmxlCiAgaWYgYTowID4gMAogICAgZXhlY3V0ZSBhOjEKICBlbmRp
ZgoKICBpZiBsZW4oczpwb3MpID4gMQogICAgZXhlY3V0ZSAnbm9ybWFsIScgczpwb3NbMF0uJ2d0
JwogICAgZXhlY3V0ZSBzOnBvc1sxXSAnd2luY21kIHcnCiAgICBjYWxsIHdpbnJlc3R2aWV3KHM6
cG9zWzJdKQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpmaW5pc2hfYmluZGluZ3Mo
KQogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFIgIDpjYWxsIDxTSUQ+cmV0cnkoKTxjcj4K
ICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBEICA6UGx1Z0RpZmY8Y3I+CiAgbm5vcmVtYXAg
PHNpbGVudD4gPGJ1ZmZlcj4gUyAgOlBsdWdTdGF0dXM8Y3I+CiAgbm5vcmVtYXAgPHNpbGVudD4g
PGJ1ZmZlcj4gVSAgOmNhbGwgPFNJRD5zdGF0dXNfdXBkYXRlKCk8Y3I+CiAgeG5vcmVtYXAgPHNp
bGVudD4gPGJ1ZmZlcj4gVSAgOmNhbGwgPFNJRD5zdGF0dXNfdXBkYXRlKCk8Y3I+CiAgbm5vcmVt
YXAgPHNpbGVudD4gPGJ1ZmZlcj4gXV0gOnNpbGVudCEgY2FsbCA8U0lEPnNlY3Rpb24oJycpPGNy
PgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFtbIDpzaWxlbnQhIGNhbGwgPFNJRD5zZWN0
aW9uKCdiJyk8Y3I+CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwcmVwYXJlKC4uLikKICBpZiBl
bXB0eShzOnBsdWdfZ2V0Y3dkKCkpCiAgICB0aHJvdyAnSW52YWxpZCBjdXJyZW50IHdvcmtpbmcg
ZGlyZWN0b3J5LiBDYW5ub3QgcHJvY2VlZC4nCiAgZW5kaWYKCiAgZm9yIGV2YXIgaW4gWyckR0lU
X0RJUicsICckR0lUX1dPUktfVFJFRSddCiAgICBpZiBleGlzdHMoZXZhcikKICAgICAgdGhyb3cg
ZXZhci4nIGRldGVjdGVkLiBDYW5ub3QgcHJvY2VlZC4nCiAgICBlbmRpZgogIGVuZGZvcgoKICBj
YWxsIHM6am9iX2Fib3J0KCkKICBpZiBzOnN3aXRjaF9pbigpCiAgICBpZiBiOnBsdWdfcHJldmll
dyA9PSAxCiAgICAgIHBjCiAgICBlbmRpZgogICAgZW5ldwogIGVsc2UKICAgIGNhbGwgczpuZXdf
d2luZG93KCkKICBlbmRpZgoKICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBxIDpjYWxsIDxT
SUQ+Y2xvc2VfcGFuZSgpPGNyPgogIGlmIGE6MCA9PSAwCiAgICBjYWxsIHM6ZmluaXNoX2JpbmRp
bmdzKCkKICBlbmRpZgogIGxldCBiOnBsdWdfcHJldmlldyA9IC0xCiAgbGV0IHM6cGx1Z190YWIg
PSB0YWJwYWdlbnIoKQogIGxldCBzOnBsdWdfYnVmID0gd2luYnVmbnIoMCkKICBjYWxsIHM6YXNz
aWduX25hbWUoKQoKICBmb3IgayBpbiBbJzxjcj4nLCAnTCcsICdvJywgJ1gnLCAnZCcsICdkZCdd
CiAgICBleGVjdXRlICdzaWxlbnQhIHVubWFwIDxidWZmZXI+JyBrCiAgZW5kZm9yCiAgc2V0bG9j
YWwgYnVmdHlwZT1ub2ZpbGUgYnVmaGlkZGVuPXdpcGUgbm9idWZsaXN0ZWQgbm9saXN0IG5vc3dh
cGZpbGUgbm93cmFwIGN1cnNvcmxpbmUgbW9kaWZpYWJsZSBub3NwZWxsCiAgaWYgZXhpc3RzKCcr
Y29sb3Jjb2x1bW4nKQogICAgc2V0bG9jYWwgY29sb3Jjb2x1bW49CiAgZW5kaWYKICBzZXRmIHZp
bS1wbHVnCiAgaWYgZXhpc3RzKCdnOnN5bnRheF9vbicpCiAgICBjYWxsIHM6c3ludGF4KCkKICBl
bmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Y2xvc2VfcGFuZSgpCiAgaWYgYjpwbHVnX3By
ZXZpZXcgPT0gMQogICAgcGMKICAgIGxldCBiOnBsdWdfcHJldmlldyA9IC0xCiAgZWxzZQogICAg
YmQKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXNzaWduX25hbWUoKQogICIgQXNz
aWduIGJ1ZmZlciBuYW1lCiAgbGV0IHByZWZpeCA9ICdbUGx1Z2luc10nCiAgbGV0IG5hbWUgICA9
IHByZWZpeAogIGxldCBpZHggICAgPSAyCiAgd2hpbGUgYnVmZXhpc3RzKG5hbWUpCiAgICBsZXQg
bmFtZSA9IHByaW50ZignJXMgKCVzKScsIHByZWZpeCwgaWR4KQogICAgbGV0IGlkeCA9IGlkeCAr
IDEKICBlbmR3aGlsZQogIHNpbGVudCEgZXhlY3V0ZSAnZicgZm5hbWVlc2NhcGUobmFtZSkKZW5k
ZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNoc2goc3dhcCkKICBsZXQgcHJldiA9IFsmc2hlbGwsICZz
aGVsbGNtZGZsYWcsICZzaGVsbHJlZGlyXQogIGlmICFzOmlzX3dpbgogICAgc2V0IHNoZWxsPXNo
CiAgZW5kaWYKICBpZiBhOnN3YXAKICAgIGlmIHM6aXNfcG93ZXJzaGVsbCgmc2hlbGwpCiAgICAg
IGxldCAmc2hlbGxyZWRpciA9ICcyPiYxIHwgT3V0LUZpbGUgLUVuY29kaW5nIFVURjggJXMnCiAg
ICBlbHNlaWYgJnNoZWxsID1+IyAnc2gnIHx8ICZzaGVsbCA9fiMgJ2NtZFwoXC5leGVcKVw/JCcK
ICAgICAgc2V0IHNoZWxscmVkaXI9PiVzXCAyPiYxCiAgICBlbmRpZgogIGVuZGlmCiAgcmV0dXJu
IHByZXYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmJhbmcoY21kLCAuLi4pCiAgbGV0IGJhdGNo
ZmlsZSA9ICcnCiAgdHJ5CiAgICBsZXQgW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdID0gczpjaHNo
KGE6MCkKICAgICIgRklYTUU6IEVzY2FwaW5nIGlzIGluY29tcGxldGUuIFdlIGNvdWxkIHVzZSBz
aGVsbGVzY2FwZSB3aXRoIGV2YWwsCiAgICAiICAgICAgICBidXQgaXQgd29uJ3Qgd29yayBvbiBX
aW5kb3dzLgogICAgbGV0IGNtZCA9IGE6MCA/IHM6d2l0aF9jZChhOmNtZCwgYToxKSA6IGE6Y21k
CiAgICBpZiBzOmlzX3dpbgogICAgICBsZXQgW2JhdGNoZmlsZSwgY21kXSA9IHM6YmF0Y2hmaWxl
KGNtZCkKICAgIGVuZGlmCiAgICBsZXQgZzpfcGx1Z19iYW5nID0gKHM6aXNfd2luICYmIGhhcygn
Z3VpX3J1bm5pbmcnKSA/ICdzaWxlbnQgJyA6ICcnKS4nIScuZXNjYXBlKGNtZCwgJyMhJScpCiAg
ICBleGVjdXRlICJub3JtYWwhIDpleGVjdXRlIGc6X3BsdWdfYmFuZ1w8Y3I+XDxjcj4iCiAgZmlu
YWxseQogICAgdW5sZXQgZzpfcGx1Z19iYW5nCiAgICBsZXQgWyZzaGVsbCwgJnNoZWxsY21kZmxh
ZywgJnNoZWxscmVkaXJdID0gW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdCiAgICBpZiBzOmlzX3dp
biAmJiBmaWxlcmVhZGFibGUoYmF0Y2hmaWxlKQogICAgICBjYWxsIGRlbGV0ZShiYXRjaGZpbGUp
CiAgICBlbmRpZgogIGVuZHRyeQogIHJldHVybiB2OnNoZWxsX2Vycm9yID8gJ0V4aXQgc3RhdHVz
OiAnIC4gdjpzaGVsbF9lcnJvciA6ICcnCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZWdyZXNz
X2JhcigpCiAgbGV0IGJhciA9IHN1YnN0aXR1dGUoZ2V0bGluZSgyKVsxOi0yXSwgJy4qXHpzPScs
ICd4JywgJycpCiAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCBiYXIsIGxlbihiYXIpKQplbmRmdW5j
dGlvbgoKZnVuY3Rpb24hIHM6aXNfdXBkYXRlZChkaXIpCiAgcmV0dXJuICFlbXB0eShzOnN5c3Rl
bV9jaG9tcChbJ2dpdCcsICdsb2cnLCAnLS1wcmV0dHk9Zm9ybWF0OiVoJywgJ0hFQUQuLi5IRUFE
QHsxfSddLCBhOmRpcikpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpkbyhwdWxsLCBmb3JjZSwg
dG9kbykKICBmb3IgW25hbWUsIHNwZWNdIGluIGl0ZW1zKGE6dG9kbykKICAgIGlmICFpc2RpcmVj
dG9yeShzcGVjLmRpcikKICAgICAgY29udGludWUKICAgIGVuZGlmCiAgICBsZXQgaW5zdGFsbGVk
ID0gaGFzX2tleShzOnVwZGF0ZS5uZXcsIG5hbWUpCiAgICBsZXQgdXBkYXRlZCA9IGluc3RhbGxl
ZCA/IDAgOgogICAgICBcIChhOnB1bGwgJiYgaW5kZXgoczp1cGRhdGUuZXJyb3JzLCBuYW1lKSA8
IDAgJiYgczppc191cGRhdGVkKHNwZWMuZGlyKSkKICAgIGlmIGE6Zm9yY2UgfHwgaW5zdGFsbGVk
IHx8IHVwZGF0ZWQKICAgICAgZXhlY3V0ZSAnY2QnIHM6ZXNjKHNwZWMuZGlyKQogICAgICBjYWxs
IGFwcGVuZCgzLCAnLSBQb3N0LXVwZGF0ZSBob29rIGZvciAnLiBuYW1lIC4nIC4uLiAnKQogICAg
ICBsZXQgZXJyb3IgPSAnJwogICAgICBsZXQgdHlwZSA9IHR5cGUoc3BlYy5kbykKICAgICAgaWYg
dHlwZSA9PSBzOlRZUEUuc3RyaW5nCiAgICAgICAgaWYgc3BlYy5kb1swXSA9PSAnOicKICAgICAg
ICAgIGlmICFnZXQoczpsb2FkZWQsIG5hbWUsIDApCiAgICAgICAgICAgIGxldCBzOmxvYWRlZFtu
YW1lXSA9IDEKICAgICAgICAgICAgY2FsbCBzOnJlb3JnX3J0cCgpCiAgICAgICAgICBlbmRpZgog
ICAgICAgICAgY2FsbCBzOmxvYWRfcGx1Z2luKHNwZWMpCiAgICAgICAgICB0cnkKICAgICAgICAg
ICAgZXhlY3V0ZSBzcGVjLmRvWzE6XQogICAgICAgICAgY2F0Y2gKICAgICAgICAgICAgbGV0IGVy
cm9yID0gdjpleGNlcHRpb24KICAgICAgICAgIGVuZHRyeQogICAgICAgICAgaWYgIXM6cGx1Z193
aW5kb3dfZXhpc3RzKCkKICAgICAgICAgICAgY2QgLQogICAgICAgICAgICB0aHJvdyAnV2Fybmlu
ZzogdmltLXBsdWcgd2FzIHRlcm1pbmF0ZWQgYnkgdGhlIHBvc3QtdXBkYXRlIGhvb2sgb2YgJy5u
YW1lCiAgICAgICAgICBlbmRpZgogICAgICAgIGVsc2UKICAgICAgICAgIGxldCBlcnJvciA9IHM6
YmFuZyhzcGVjLmRvKQogICAgICAgIGVuZGlmCiAgICAgIGVsc2VpZiB0eXBlID09IHM6VFlQRS5m
dW5jcmVmCiAgICAgICAgdHJ5CiAgICAgICAgICBjYWxsIHM6bG9hZF9wbHVnaW4oc3BlYykKICAg
ICAgICAgIGxldCBzdGF0dXMgPSBpbnN0YWxsZWQgPyAnaW5zdGFsbGVkJyA6ICh1cGRhdGVkID8g
J3VwZGF0ZWQnIDogJ3VuY2hhbmdlZCcpCiAgICAgICAgICBjYWxsIHNwZWMuZG8oeyAnbmFtZSc6
IG5hbWUsICdzdGF0dXMnOiBzdGF0dXMsICdmb3JjZSc6IGE6Zm9yY2UgfSkKICAgICAgICBjYXRj
aAogICAgICAgICAgbGV0IGVycm9yID0gdjpleGNlcHRpb24KICAgICAgICBlbmR0cnkKICAgICAg
ZWxzZQogICAgICAgIGxldCBlcnJvciA9ICdJbnZhbGlkIGhvb2sgdHlwZScKICAgICAgZW5kaWYK
ICAgICAgY2FsbCBzOnN3aXRjaF9pbigpCiAgICAgIGNhbGwgc2V0bGluZSg0LCBlbXB0eShlcnJv
cikgPyAoZ2V0bGluZSg0KSAuICdPSycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFwgOiAoJ3gnIC4gZ2V0bGluZSg0KVsxOl0gLiBlcnJvcikpCiAgICAgIGlmICFlbXB0eShlcnJv
cikKICAgICAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpCiAgICAgICAgY2FsbCBz
OnJlZ3Jlc3NfYmFyKCkKICAgICAgZW5kaWYKICAgICAgY2QgLQogICAgZW5kaWYKICBlbmRmb3IK
ZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmhhc2hfbWF0Y2goYSwgYikKICByZXR1cm4gc3RyaWR4
KGE6YSwgYTpiKSA9PSAwIHx8IHN0cmlkeChhOmIsIGE6YSkgPT0gMAplbmRmdW5jdGlvbgoKZnVu
Y3Rpb24hIHM6Y2hlY2tvdXQoc3BlYykKICBsZXQgc2hhID0gYTpzcGVjLmNvbW1pdAogIGxldCBv
dXRwdXQgPSBzOmdpdF9yZXZpc2lvbihhOnNwZWMuZGlyKQogIGlmICFlbXB0eShvdXRwdXQpICYm
ICFzOmhhc2hfbWF0Y2goc2hhLCBzOmxpbmVzKG91dHB1dClbMF0pCiAgICBsZXQgY3JlZGVudGlh
bF9oZWxwZXIgPSBzOmdpdF92ZXJzaW9uX3JlcXVpcmVtZW50KDIpID8gJy1jIGNyZWRlbnRpYWwu
aGVscGVyPSAnIDogJycKICAgIGxldCBvdXRwdXQgPSBzOnN5c3RlbSgKICAgICAgICAgIFwgJ2dp
dCAnLmNyZWRlbnRpYWxfaGVscGVyLidmZXRjaCAtLWRlcHRoIDk5OTk5OSAmJiBnaXQgY2hlY2tv
dXQgJy5wbHVnI3NoZWxsZXNjYXBlKHNoYSkuJyAtLScsIGE6c3BlYy5kaXIpCiAgZW5kaWYKICBy
ZXR1cm4gb3V0cHV0CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpmaW5pc2gocHVsbCkKICBsZXQg
bmV3X2Zyb3plbiA9IGxlbihmaWx0ZXIoa2V5cyhzOnVwZGF0ZS5uZXcpLCAnZzpwbHVnc1t2OnZh
bF0uZnJvemVuJykpCiAgaWYgbmV3X2Zyb3plbgogICAgbGV0IHMgPSBuZXdfZnJvemVuID4gMSA/
ICdzJyA6ICcnCiAgICBjYWxsIGFwcGVuZCgzLCBwcmludGYoJy0gSW5zdGFsbGVkICVkIGZyb3pl
biBwbHVnaW4lcycsIG5ld19mcm96ZW4sIHMpKQogIGVuZGlmCiAgY2FsbCBhcHBlbmQoMywgJy0g
RmluaXNoaW5nIC4uLiAnKSB8IDQKICByZWRyYXcKICBjYWxsIHBsdWcjaGVscHRhZ3MoKQogIGNh
bGwgcGx1ZyNlbmQoKQogIGNhbGwgc2V0bGluZSg0LCBnZXRsaW5lKDQpIC4gJ0RvbmUhJykKICBy
ZWRyYXcKICBsZXQgbXNncyA9IFtdCiAgaWYgIWVtcHR5KHM6dXBkYXRlLmVycm9ycykKICAgIGNh
bGwgYWRkKG1zZ3MsICJQcmVzcyAnUicgdG8gcmV0cnkuIikKICBlbmRpZgogIGlmIGE6cHVsbCAm
JiBsZW4oczp1cGRhdGUubmV3KSA8IGxlbihmaWx0ZXIoZ2V0bGluZSg1LCAnJCcpLAogICAgICAg
ICAgICAgICAgXCAidjp2YWwgPX4gJ14tICcgJiYgdjp2YWwgIX4jICdBbHJlYWR5IHVwLnRvLmRh
dGUnIikpCiAgICBjYWxsIGFkZChtc2dzLCAiUHJlc3MgJ0QnIHRvIHNlZSB0aGUgdXBkYXRlZCBj
aGFuZ2VzLiIpCiAgZW5kaWYKICBlY2hvIGpvaW4obXNncywgJyAnKQogIGNhbGwgczpmaW5pc2hf
YmluZGluZ3MoKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cmV0cnkoKQogIGlmIGVtcHR5KHM6
dXBkYXRlLmVycm9ycykKICAgIHJldHVybgogIGVuZGlmCiAgZWNobwogIGNhbGwgczp1cGRhdGVf
aW1wbChzOnVwZGF0ZS5wdWxsLCBzOnVwZGF0ZS5mb3JjZSwKICAgICAgICBcIGV4dGVuZChjb3B5
KHM6dXBkYXRlLmVycm9ycyksIFtzOnVwZGF0ZS50aHJlYWRzXSkpCmVuZGZ1bmN0aW9uCgpmdW5j
dGlvbiEgczppc19tYW5hZ2VkKG5hbWUpCiAgcmV0dXJuIGhhc19rZXkoZzpwbHVnc1thOm5hbWVd
LCAndXJpJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOm5hbWVzKC4uLikKICByZXR1cm4gc29y
dChmaWx0ZXIoa2V5cyhnOnBsdWdzKSwgJ3N0cmlkeCh2OnZhbCwgYToxKSA9PSAwICYmIHM6aXNf
bWFuYWdlZCh2OnZhbCknKSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNoZWNrX3J1YnkoKQog
IHNpbGVudCEgcnVieSByZXF1aXJlICd0aHJlYWQnOyBWSU06OmNvbW1hbmQoImxldCBnOnBsdWdf
cnVieSA9ICcje1JVQllfVkVSU0lPTn0nIikKICBpZiAhZXhpc3RzKCdnOnBsdWdfcnVieScpCiAg
ICByZWRyYXchCiAgICByZXR1cm4gczp3YXJuKCdlY2hvbScsICdXYXJuaW5nOiBSdWJ5IGludGVy
ZmFjZSBpcyBicm9rZW4nKQogIGVuZGlmCiAgbGV0IHJ1YnlfdmVyc2lvbiA9IHNwbGl0KGc6cGx1
Z19ydWJ5LCAnXC4nKQogIHVubGV0IGc6cGx1Z19ydWJ5CiAgcmV0dXJuIHM6dmVyc2lvbl9yZXF1
aXJlbWVudChydWJ5X3ZlcnNpb24sIFsxLCA4LCA3XSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBz
OnVwZGF0ZV9pbXBsKHB1bGwsIGZvcmNlLCBhcmdzKSBhYm9ydAogIGxldCBzeW5jID0gaW5kZXgo
YTphcmdzLCAnLS1zeW5jJykgPj0gMCB8fCBoYXMoJ3ZpbV9zdGFydGluZycpCiAgbGV0IGFyZ3Mg
PSBmaWx0ZXIoY29weShhOmFyZ3MpLCAndjp2YWwgIT0gIi0tc3luYyInKQogIGxldCB0aHJlYWRz
ID0gKGxlbihhcmdzKSA+IDAgJiYgYXJnc1stMV0gPX4gJ15bMS05XVswLTldKiQnKSA/CiAgICAg
ICAgICAgICAgICAgIFwgcmVtb3ZlKGFyZ3MsIC0xKSA6IGdldChnOiwgJ3BsdWdfdGhyZWFkcycs
IDE2KQoKICBsZXQgbWFuYWdlZCA9IGZpbHRlcihjb3B5KGc6cGx1Z3MpLCAnczppc19tYW5hZ2Vk
KHY6a2V5KScpCiAgbGV0IHRvZG8gPSBlbXB0eShhcmdzKSA/IGZpbHRlcihtYW5hZ2VkLCAnIXY6
dmFsLmZyb3plbiB8fCAhaXNkaXJlY3Rvcnkodjp2YWwuZGlyKScpIDoKICAgICAgICAgICAgICAg
ICAgICAgICAgIFwgZmlsdGVyKG1hbmFnZWQsICdpbmRleChhcmdzLCB2OmtleSkgPj0gMCcpCgog
IGlmIGVtcHR5KHRvZG8pCiAgICByZXR1cm4gczp3YXJuKCdlY2hvJywgJ05vIHBsdWdpbiB0byAn
LiAoYTpwdWxsID8gJ3VwZGF0ZScgOiAnaW5zdGFsbCcpKQogIGVuZGlmCgogIGlmICFzOmlzX3dp
biAmJiBzOmdpdF92ZXJzaW9uX3JlcXVpcmVtZW50KDIsIDMpCiAgICBsZXQgczpnaXRfdGVybWlu
YWxfcHJvbXB0ID0gZXhpc3RzKCckR0lUX1RFUk1JTkFMX1BST01QVCcpID8gJEdJVF9URVJNSU5B
TF9QUk9NUFQgOiAnJwogICAgbGV0ICRHSVRfVEVSTUlOQUxfUFJPTVBUID0gMAogICAgZm9yIHBs
dWcgaW4gdmFsdWVzKHRvZG8pCiAgICAgIGxldCBwbHVnLnVyaSA9IHN1YnN0aXR1dGUocGx1Zy51
cmksCiAgICAgICAgICAgIFwgJ15odHRwczovL2dpdDo6QGdpdGh1YlwuY29tJywgJ2h0dHBzOi8v
Z2l0aHViLmNvbScsICcnKQogICAgZW5kZm9yCiAgZW5kaWYKCiAgaWYgIWlzZGlyZWN0b3J5KGc6
cGx1Z19ob21lKQogICAgdHJ5CiAgICAgIGNhbGwgbWtkaXIoZzpwbHVnX2hvbWUsICdwJykKICAg
IGNhdGNoCiAgICAgIHJldHVybiBzOmVycihwcmludGYoJ0ludmFsaWQgcGx1ZyBkaXJlY3Rvcnk6
ICVzLiAnLgogICAgICAgICAgICAgIFwgJ1RyeSB0byBjYWxsIHBsdWcjYmVnaW4gd2l0aCBhIHZh
bGlkIGRpcmVjdG9yeScsIGc6cGx1Z19ob21lKSkKICAgIGVuZHRyeQogIGVuZGlmCgogIGlmIGhh
cygnbnZpbScpICYmICFleGlzdHMoJypqb2J3YWl0JykgJiYgdGhyZWFkcyA+IDEKICAgIGNhbGwg
czp3YXJuKCdlY2hvbScsICdbdmltLXBsdWddIFVwZGF0ZSBOZW92aW0gZm9yIHBhcmFsbGVsIGlu
c3RhbGxlcicpCiAgZW5kaWYKCiAgbGV0IHVzZV9qb2IgPSBzOm52aW0gfHwgczp2aW04CiAgbGV0
IHB5dGhvbiA9IChoYXMoJ3B5dGhvbicpIHx8IGhhcygncHl0aG9uMycpKSAmJiAhdXNlX2pvYgog
IGxldCBydWJ5ID0gaGFzKCdydWJ5JykgJiYgIXVzZV9qb2IgJiYgKHY6dmVyc2lvbiA+PSA3MDMg
fHwgdjp2ZXJzaW9uID09IDcwMiAmJiBoYXMoJ3BhdGNoMzc0JykpICYmICEoczppc193aW4gJiYg
aGFzKCdndWlfcnVubmluZycpKSAmJiB0aHJlYWRzID4gMSAmJiBzOmNoZWNrX3J1YnkoKQoKICBs
ZXQgczp1cGRhdGUgPSB7CiAgICBcICdzdGFydCc6ICAgcmVsdGltZSgpLAogICAgXCAnYWxsJzog
ICAgIHRvZG8sCiAgICBcICd0b2RvJzogICAgY29weSh0b2RvKSwKICAgIFwgJ2Vycm9ycyc6ICBb
XSwKICAgIFwgJ3B1bGwnOiAgICBhOnB1bGwsCiAgICBcICdmb3JjZSc6ICAgYTpmb3JjZSwKICAg
IFwgJ25ldyc6ICAgICB7fSwKICAgIFwgJ3RocmVhZHMnOiAocHl0aG9uIHx8IHJ1YnkgfHwgdXNl
X2pvYikgPyBtaW4oW2xlbih0b2RvKSwgdGhyZWFkc10pIDogMSwKICAgIFwgJ2Jhcic6ICAgICAn
JywKICAgIFwgJ2Zpbic6ICAgICAwCiAgXCB9CgogIGNhbGwgczpwcmVwYXJlKDEpCiAgY2FsbCBh
cHBlbmQoMCwgWycnLCAnJ10pCiAgbm9ybWFsISAyRwogIHNpbGVudCEgcmVkcmF3CgogICIgU2V0
IHJlbW90ZSBuYW1lLCBvdmVycmlkaW5nIGEgcG9zc2libGUgdXNlciBnaXQgY29uZmlnJ3MgY2xv
bmUuZGVmYXVsdFJlbW90ZU5hbWUKICBsZXQgczpjbG9uZV9vcHQgPSBbJy0tb3JpZ2luJywgJ29y
aWdpbiddCiAgaWYgZ2V0KGc6LCAncGx1Z19zaGFsbG93JywgMSkKICAgIGNhbGwgZXh0ZW5kKHM6
Y2xvbmVfb3B0LCBbJy0tZGVwdGgnLCAnMSddKQogICAgaWYgczpnaXRfdmVyc2lvbl9yZXF1aXJl
bWVudCgxLCA3LCAxMCkKICAgICAgY2FsbCBhZGQoczpjbG9uZV9vcHQsICctLW5vLXNpbmdsZS1i
cmFuY2gnKQogICAgZW5kaWYKICBlbmRpZgoKICBpZiBoYXMoJ3dpbjMydW5peCcpIHx8IGhhcygn
d3NsJykKICAgIGNhbGwgZXh0ZW5kKHM6Y2xvbmVfb3B0LCBbJy1jJywgJ2NvcmUuZW9sPWxmJywg
Jy1jJywgJ2NvcmUuYXV0b2NybGY9aW5wdXQnXSkKICBlbmRpZgoKICBsZXQgczpzdWJtb2R1bGVf
b3B0ID0gczpnaXRfdmVyc2lvbl9yZXF1aXJlbWVudCgyLCA4KSA/ICcgLS1qb2JzPScudGhyZWFk
cyA6ICcnCgogICIgUHl0aG9uIHZlcnNpb24gcmVxdWlyZW1lbnQgKD49IDIuNykKICBpZiBweXRo
b24gJiYgIWhhcygncHl0aG9uMycpICYmICFydWJ5ICYmICF1c2Vfam9iICYmIHM6dXBkYXRlLnRo
cmVhZHMgPiAxCiAgICByZWRpciA9PiBweXYKICAgIHNpbGVudCBweXRob24gaW1wb3J0IHBsYXRm
b3JtOyBwcmludCBwbGF0Zm9ybS5weXRob25fdmVyc2lvbigpCiAgICByZWRpciBFTkQKICAgIGxl
dCBweXRob24gPSBzOnZlcnNpb25fcmVxdWlyZW1lbnQoCiAgICAgICAgICBcIG1hcChzcGxpdChz
cGxpdChweXYpWzBdLCAnXC4nKSwgJ3N0cjJucih2OnZhbCknKSwgWzIsIDZdKQogIGVuZGlmCgog
IGlmIChweXRob24gfHwgcnVieSkgJiYgczp1cGRhdGUudGhyZWFkcyA+IDEKICAgIHRyeQogICAg
ICBsZXQgaW1kID0gJmltZAogICAgICBpZiBzOm1hY19ndWkKICAgICAgICBzZXQgbm9pbWQKICAg
ICAgZW5kaWYKICAgICAgaWYgcnVieQogICAgICAgIGNhbGwgczp1cGRhdGVfcnVieSgpCiAgICAg
IGVsc2UKICAgICAgICBjYWxsIHM6dXBkYXRlX3B5dGhvbigpCiAgICAgIGVuZGlmCiAgICBjYXRj
aAogICAgICBsZXQgbGluZXMgPSBnZXRsaW5lKDQsICckJykKICAgICAgbGV0IHByaW50ZWQgPSB7
fQogICAgICBzaWxlbnQhIDQsJGQgXwogICAgICBmb3IgbGluZSBpbiBsaW5lcwogICAgICAgIGxl
dCBuYW1lID0gczpleHRyYWN0X25hbWUobGluZSwgJy4nLCAnJykKICAgICAgICBpZiBlbXB0eShu
YW1lKSB8fCAhaGFzX2tleShwcmludGVkLCBuYW1lKQogICAgICAgICAgY2FsbCBhcHBlbmQoJyQn
LCBsaW5lKQogICAgICAgICAgaWYgIWVtcHR5KG5hbWUpCiAgICAgICAgICAgIGxldCBwcmludGVk
W25hbWVdID0gMQogICAgICAgICAgICBpZiBsaW5lWzBdID09ICd4JyAmJiBpbmRleChzOnVwZGF0
ZS5lcnJvcnMsIG5hbWUpIDwgMAogICAgICAgICAgICAgIGNhbGwgYWRkKHM6dXBkYXRlLmVycm9y
cywgbmFtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGlmCiAg
ICAgIGVuZGZvcgogICAgZmluYWxseQogICAgICBsZXQgJmltZCA9IGltZAogICAgICBjYWxsIHM6
dXBkYXRlX2ZpbmlzaCgpCiAgICBlbmR0cnkKICBlbHNlCiAgICBjYWxsIHM6dXBkYXRlX3ZpbSgp
CiAgICB3aGlsZSB1c2Vfam9iICYmIHN5bmMKICAgICAgc2xlZXAgMTAwbQogICAgICBpZiBzOnVw
ZGF0ZS5maW4KICAgICAgICBicmVhawogICAgICBlbmRpZgogICAgZW5kd2hpbGUKICBlbmRpZgpl
bmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9nNChuYW1lLCBtc2cpCiAgY2FsbCBzZXRsaW5lKDQs
IHByaW50ZignLSAlcyAoJXMpJywgYTptc2csIGE6bmFtZSkpCiAgcmVkcmF3CmVuZGZ1bmN0aW9u
CgpmdW5jdGlvbiEgczp1cGRhdGVfZmluaXNoKCkKICBpZiBleGlzdHMoJ3M6Z2l0X3Rlcm1pbmFs
X3Byb21wdCcpCiAgICBsZXQgJEdJVF9URVJNSU5BTF9QUk9NUFQgPSBzOmdpdF90ZXJtaW5hbF9w
cm9tcHQKICBlbmRpZgogIGlmIHM6c3dpdGNoX2luKCkKICAgIGNhbGwgYXBwZW5kKDMsICctIFVw
ZGF0aW5nIC4uLicpIHwgNAogICAgZm9yIFtuYW1lLCBzcGVjXSBpbiBpdGVtcyhmaWx0ZXIoY29w
eShzOnVwZGF0ZS5hbGwpLCAnaW5kZXgoczp1cGRhdGUuZXJyb3JzLCB2OmtleSkgPCAwICYmIChz
OnVwZGF0ZS5mb3JjZSB8fCBzOnVwZGF0ZS5wdWxsIHx8IGhhc19rZXkoczp1cGRhdGUubmV3LCB2
OmtleSkpJykpCiAgICAgIGxldCBbcG9zLCBfXSA9IHM6bG9ncG9zKG5hbWUpCiAgICAgIGlmICFw
b3MKICAgICAgICBjb250aW51ZQogICAgICBlbmRpZgogICAgICBpZiBoYXNfa2V5KHNwZWMsICdj
b21taXQnKQogICAgICAgIGNhbGwgczpsb2c0KG5hbWUsICdDaGVja2luZyBvdXQgJy5zcGVjLmNv
bW1pdCkKICAgICAgICBsZXQgb3V0ID0gczpjaGVja291dChzcGVjKQogICAgICBlbHNlaWYgaGFz
X2tleShzcGVjLCAndGFnJykKICAgICAgICBsZXQgdGFnID0gc3BlYy50YWcKICAgICAgICBpZiB0
YWcgPX4gJ1wqJwogICAgICAgICAgbGV0IHRhZ3MgPSBzOmxpbmVzKHM6c3lzdGVtKCdnaXQgdGFn
IC0tbGlzdCAnLnBsdWcjc2hlbGxlc2NhcGUodGFnKS4nIC0tc29ydCAtdmVyc2lvbjpyZWZuYW1l
IDI+JjEnLCBzcGVjLmRpcikpCiAgICAgICAgICBpZiAhdjpzaGVsbF9lcnJvciAmJiAhZW1wdHko
dGFncykKICAgICAgICAgICAgbGV0IHRhZyA9IHRhZ3NbMF0KICAgICAgICAgICAgY2FsbCBzOmxv
ZzQobmFtZSwgcHJpbnRmKCdMYXRlc3QgdGFnIGZvciAlcyAtPiAlcycsIHNwZWMudGFnLCB0YWcp
KQogICAgICAgICAgICBjYWxsIGFwcGVuZCgzLCAnJykKICAgICAgICAgIGVuZGlmCiAgICAgICAg
ZW5kaWYKICAgICAgICBjYWxsIHM6bG9nNChuYW1lLCAnQ2hlY2tpbmcgb3V0ICcudGFnKQogICAg
ICAgIGxldCBvdXQgPSBzOnN5c3RlbSgnZ2l0IGNoZWNrb3V0IC1xICcucGx1ZyNzaGVsbGVzY2Fw
ZSh0YWcpLicgLS0gMj4mMScsIHNwZWMuZGlyKQogICAgICBlbHNlCiAgICAgICAgbGV0IGJyYW5j
aCA9IHM6Z2l0X29yaWdpbl9icmFuY2goc3BlYykKICAgICAgICBjYWxsIHM6bG9nNChuYW1lLCAn
TWVyZ2luZyBvcmlnaW4vJy5zOmVzYyhicmFuY2gpKQogICAgICAgIGxldCBvdXQgPSBzOnN5c3Rl
bSgnZ2l0IGNoZWNrb3V0IC1xICcucGx1ZyNzaGVsbGVzY2FwZShicmFuY2gpLicgLS0gMj4mMScK
ICAgICAgICAgICAgICBcLiAoaGFzX2tleShzOnVwZGF0ZS5uZXcsIG5hbWUpID8gJycgOiAoJyYm
IGdpdCBtZXJnZSAtLWZmLW9ubHkgJy5wbHVnI3NoZWxsZXNjYXBlKCdvcmlnaW4vJy5icmFuY2gp
LicgMj4mMScpKSwgc3BlYy5kaXIpCiAgICAgIGVuZGlmCiAgICAgIGlmICF2OnNoZWxsX2Vycm9y
ICYmIGZpbGVyZWFkYWJsZShzcGVjLmRpci4nLy5naXRtb2R1bGVzJykgJiYKICAgICAgICAgICAg
XCAoczp1cGRhdGUuZm9yY2UgfHwgaGFzX2tleShzOnVwZGF0ZS5uZXcsIG5hbWUpIHx8IHM6aXNf
dXBkYXRlZChzcGVjLmRpcikpCiAgICAgICAgY2FsbCBzOmxvZzQobmFtZSwgJ1VwZGF0aW5nIHN1
Ym1vZHVsZXMuIFRoaXMgbWF5IHRha2UgYSB3aGlsZS4nKQogICAgICAgIGxldCBvdXQgLj0gczpi
YW5nKCdnaXQgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgLS1yZWN1cnNpdmUnLnM6c3VibW9kdWxl
X29wdC4nIDI+JjEnLCBzcGVjLmRpcikKICAgICAgZW5kaWYKICAgICAgbGV0IG1zZyA9IHM6Zm9y
bWF0X21lc3NhZ2UodjpzaGVsbF9lcnJvciA/ICd4JzogJy0nLCBuYW1lLCBvdXQpCiAgICAgIGlm
IHY6c2hlbGxfZXJyb3IKICAgICAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpCiAg
ICAgICAgY2FsbCBzOnJlZ3Jlc3NfYmFyKCkKICAgICAgICBzaWxlbnQgZXhlY3V0ZSBwb3MgJ2Qg
XycKICAgICAgICBjYWxsIGFwcGVuZCg0LCBtc2cpIHwgNAogICAgICBlbHNlaWYgIWVtcHR5KG91
dCkKICAgICAgICBjYWxsIHNldGxpbmUocG9zLCBtc2dbMF0pCiAgICAgIGVuZGlmCiAgICAgIHJl
ZHJhdwogICAgZW5kZm9yCiAgICBzaWxlbnQgNCBkIF8KICAgIHRyeQogICAgICBjYWxsIHM6ZG8o
czp1cGRhdGUucHVsbCwgczp1cGRhdGUuZm9yY2UsIGZpbHRlcihjb3B5KHM6dXBkYXRlLmFsbCks
ICdpbmRleChzOnVwZGF0ZS5lcnJvcnMsIHY6a2V5KSA8IDAgJiYgaGFzX2tleSh2OnZhbCwgImRv
IiknKSkKICAgIGNhdGNoCiAgICAgIGNhbGwgczp3YXJuKCdlY2hvbScsIHY6ZXhjZXB0aW9uKQog
ICAgICBjYWxsIHM6d2FybignZWNobycsICcnKQogICAgICByZXR1cm4KICAgIGVuZHRyeQogICAg
Y2FsbCBzOmZpbmlzaChzOnVwZGF0ZS5wdWxsKQogICAgY2FsbCBzZXRsaW5lKDEsICdVcGRhdGVk
LiBFbGFwc2VkIHRpbWU6ICcgLiBzcGxpdChyZWx0aW1lc3RyKHJlbHRpbWUoczp1cGRhdGUuc3Rh
cnQpKSlbMF0gLiAnIHNlYy4nKQogICAgY2FsbCBzOnN3aXRjaF9vdXQoJ25vcm1hbCEgZ2cnKQog
IGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpqb2JfYWJvcnQoKQogIGlmICghczpudmlt
ICYmICFzOnZpbTgpIHx8ICFleGlzdHMoJ3M6am9icycpCiAgICByZXR1cm4KICBlbmRpZgoKICBm
b3IgW25hbWUsIGpdIGluIGl0ZW1zKHM6am9icykKICAgIGlmIHM6bnZpbQogICAgICBzaWxlbnQh
IGNhbGwgam9ic3RvcChqLmpvYmlkKQogICAgZWxzZWlmIHM6dmltOAogICAgICBzaWxlbnQhIGNh
bGwgam9iX3N0b3Aoai5qb2JpZCkKICAgIGVuZGlmCiAgICBpZiBqLm5ldwogICAgICBjYWxsIHM6
cm1fcmYoZzpwbHVnc1tuYW1lXS5kaXIpCiAgICBlbmRpZgogIGVuZGZvcgogIGxldCBzOmpvYnMg
PSB7fQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bGFzdF9ub25fZW1wdHlfbGluZShsaW5lcykK
ICBsZXQgbGVuID0gbGVuKGE6bGluZXMpCiAgZm9yIGlkeCBpbiByYW5nZShsZW4pCiAgICBsZXQg
bGluZSA9IGE6bGluZXNbbGVuLWlkeC0xXQogICAgaWYgIWVtcHR5KGxpbmUpCiAgICAgIHJldHVy
biBsaW5lCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rp
b24hIHM6am9iX291dF9jYihzZWxmLCBkYXRhKSBhYm9ydAogIGxldCBzZWxmID0gYTpzZWxmCiAg
bGV0IGRhdGEgPSByZW1vdmUoc2VsZi5saW5lcywgLTEpIC4gYTpkYXRhCiAgbGV0IGxpbmVzID0g
bWFwKHNwbGl0KGRhdGEsICJcbiIsIDEpLCAnc3BsaXQodjp2YWwsICJcciIsIDEpWy0xXScpCiAg
Y2FsbCBleHRlbmQoc2VsZi5saW5lcywgbGluZXMpCiAgIiBUbyByZWR1Y2UgdGhlIG51bWJlciBv
ZiBidWZmZXIgdXBkYXRlcwogIGxldCBzZWxmLnRpY2sgPSBnZXQoc2VsZiwgJ3RpY2snLCAtMSkg
KyAxCiAgaWYgIXNlbGYucnVubmluZyB8fCBzZWxmLnRpY2sgJSBsZW4oczpqb2JzKSA9PSAwCiAg
ICBsZXQgYnVsbGV0ID0gc2VsZi5ydW5uaW5nID8gKHNlbGYubmV3ID8gJysnIDogJyonKSA6IChz
ZWxmLmVycm9yID8gJ3gnIDogJy0nKQogICAgbGV0IHJlc3VsdCA9IHNlbGYuZXJyb3IgPyBqb2lu
KHNlbGYubGluZXMsICJcbiIpIDogczpsYXN0X25vbl9lbXB0eV9saW5lKHNlbGYubGluZXMpCiAg
ICBjYWxsIHM6bG9nKGJ1bGxldCwgc2VsZi5uYW1lLCByZXN1bHQpCiAgZW5kaWYKZW5kZnVuY3Rp
b24KCmZ1bmN0aW9uISBzOmpvYl9leGl0X2NiKHNlbGYsIGRhdGEpIGFib3J0CiAgbGV0IGE6c2Vs
Zi5ydW5uaW5nID0gMAogIGxldCBhOnNlbGYuZXJyb3IgPSBhOmRhdGEgIT0gMAogIGNhbGwgczpy
ZWFwKGE6c2VsZi5uYW1lKQogIGNhbGwgczp0aWNrKCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBz
OmpvYl9jYihmbiwgam9iLCBjaCwgZGF0YSkKICBpZiAhczpwbHVnX3dpbmRvd19leGlzdHMoKSAi
IHBsdWcgd2luZG93IGNsb3NlZAogICAgcmV0dXJuIHM6am9iX2Fib3J0KCkKICBlbmRpZgogIGNh
bGwgY2FsbChhOmZuLCBbYTpqb2IsIGE6ZGF0YV0pCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpu
dmltX2NiKGpvYl9pZCwgZGF0YSwgZXZlbnQpIGRpY3QgYWJvcnQKICByZXR1cm4gKGE6ZXZlbnQg
PT0gJ3N0ZG91dCcgfHwgYTpldmVudCA9PSAnc3RkZXJyJykgPwogICAgXCBzOmpvYl9jYignczpq
b2Jfb3V0X2NiJywgIHNlbGYsIDAsIGpvaW4oYTpkYXRhLCAiXG4iKSkgOgogICAgXCBzOmpvYl9j
Yignczpqb2JfZXhpdF9jYicsIHNlbGYsIDAsIGE6ZGF0YSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9u
ISBzOnNwYXduKG5hbWUsIGNtZCwgb3B0cykKICBsZXQgam9iID0geyAnbmFtZSc6IGE6bmFtZSwg
J3J1bm5pbmcnOiAxLCAnZXJyb3InOiAwLCAnbGluZXMnOiBbJyddLAogICAgICAgICAgICBcICdu
ZXcnOiBnZXQoYTpvcHRzLCAnbmV3JywgMCkgfQogIGxldCBzOmpvYnNbYTpuYW1lXSA9IGpvYgoK
ICBpZiBzOm52aW0KICAgIGlmIGhhc19rZXkoYTpvcHRzLCAnZGlyJykKICAgICAgbGV0IGpvYi5j
d2QgPSBhOm9wdHMuZGlyCiAgICBlbmRpZgogICAgbGV0IGFyZ3YgPSBhOmNtZAogICAgY2FsbCBl
eHRlbmQoam9iLCB7CiAgICBcICdvbl9zdGRvdXQnOiBmdW5jdGlvbignczpudmltX2NiJyksCiAg
ICBcICdvbl9zdGRlcnInOiBmdW5jdGlvbignczpudmltX2NiJyksCiAgICBcICdvbl9leGl0Jzog
ICBmdW5jdGlvbignczpudmltX2NiJyksCiAgICBcIH0pCiAgICBsZXQgamlkID0gczpwbHVnX2Nh
bGwoJ2pvYnN0YXJ0JywgYXJndiwgam9iKQogICAgaWYgamlkID4gMAogICAgICBsZXQgam9iLmpv
YmlkID0gamlkCiAgICBlbHNlCiAgICAgIGxldCBqb2IucnVubmluZyA9IDAKICAgICAgbGV0IGpv
Yi5lcnJvciAgID0gMQogICAgICBsZXQgam9iLmxpbmVzICAgPSBbamlkIDwgMCA/IGFyZ3ZbMF0u
JyBpcyBub3QgZXhlY3V0YWJsZScgOgogICAgICAgICAgICBcICdJbnZhbGlkIGFyZ3VtZW50cyAo
b3Igam9iIHRhYmxlIGlzIGZ1bGwpJ10KICAgIGVuZGlmCiAgZWxzZWlmIHM6dmltOAogICAgbGV0
IGNtZCA9IGpvaW4obWFwKGNvcHkoYTpjbWQpLCAncGx1ZyNzaGVsbGVzY2FwZSh2OnZhbCwgeyJz
Y3JpcHQiOiAwfSknKSkKICAgIGlmIGhhc19rZXkoYTpvcHRzLCAnZGlyJykKICAgICAgbGV0IGNt
ZCA9IHM6d2l0aF9jZChjbWQsIGE6b3B0cy5kaXIsIDApCiAgICBlbmRpZgogICAgbGV0IGFyZ3Yg
PSBzOmlzX3dpbiA/IFsnY21kJywgJy9zJywgJy9jJywgJyInLmNtZC4nIiddIDogWydzaCcsICct
YycsIGNtZF0KICAgIGxldCBqaWQgPSBqb2Jfc3RhcnQoczppc193aW4gPyBqb2luKGFyZ3YsICcg
JykgOiBhcmd2LCB7CiAgICBcICdvdXRfY2InOiAgIGZ1bmN0aW9uKCdzOmpvYl9jYicsIFsnczpq
b2Jfb3V0X2NiJywgIGpvYl0pLAogICAgXCAnZXJyX2NiJzogICBmdW5jdGlvbignczpqb2JfY2In
LCBbJ3M6am9iX291dF9jYicsICBqb2JdKSwKICAgIFwgJ2V4aXRfY2InOiAgZnVuY3Rpb24oJ3M6
am9iX2NiJywgWydzOmpvYl9leGl0X2NiJywgam9iXSksCiAgICBcICdlcnJfbW9kZSc6ICdyYXcn
LAogICAgXCAnb3V0X21vZGUnOiAncmF3JwogICAgXH0pCiAgICBpZiBqb2Jfc3RhdHVzKGppZCkg
PT0gJ3J1bicKICAgICAgbGV0IGpvYi5qb2JpZCA9IGppZAogICAgZWxzZQogICAgICBsZXQgam9i
LnJ1bm5pbmcgPSAwCiAgICAgIGxldCBqb2IuZXJyb3IgICA9IDEKICAgICAgbGV0IGpvYi5saW5l
cyAgID0gWydGYWlsZWQgdG8gc3RhcnQgam9iJ10KICAgIGVuZGlmCiAgZWxzZQogICAgbGV0IGpv
Yi5saW5lcyA9IHM6bGluZXMoY2FsbCgnczpzeXN0ZW0nLCBoYXNfa2V5KGE6b3B0cywgJ2Rpcicp
ID8gW2E6Y21kLCBhOm9wdHMuZGlyXSA6IFthOmNtZF0pKQogICAgbGV0IGpvYi5lcnJvciA9IHY6
c2hlbGxfZXJyb3IgIT0gMAogICAgbGV0IGpvYi5ydW5uaW5nID0gMAogIGVuZGlmCmVuZGZ1bmN0
aW9uCgpmdW5jdGlvbiEgczpyZWFwKG5hbWUpCiAgbGV0IGpvYiA9IHM6am9ic1thOm5hbWVdCiAg
aWYgam9iLmVycm9yCiAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIGE6bmFtZSkKICBlbHNl
aWYgZ2V0KGpvYiwgJ25ldycsIDApCiAgICBsZXQgczp1cGRhdGUubmV3W2E6bmFtZV0gPSAxCiAg
ZW5kaWYKICBsZXQgczp1cGRhdGUuYmFyIC49IGpvYi5lcnJvciA/ICd4JyA6ICc9JwoKICBsZXQg
YnVsbGV0ID0gam9iLmVycm9yID8gJ3gnIDogJy0nCiAgbGV0IHJlc3VsdCA9IGpvYi5lcnJvciA/
IGpvaW4oam9iLmxpbmVzLCAiXG4iKSA6IHM6bGFzdF9ub25fZW1wdHlfbGluZShqb2IubGluZXMp
CiAgY2FsbCBzOmxvZyhidWxsZXQsIGE6bmFtZSwgZW1wdHkocmVzdWx0KSA/ICdPSycgOiByZXN1
bHQpCiAgY2FsbCBzOmJhcigpCgogIGNhbGwgcmVtb3ZlKHM6am9icywgYTpuYW1lKQplbmRmdW5j
dGlvbgoKZnVuY3Rpb24hIHM6YmFyKCkKICBpZiBzOnN3aXRjaF9pbigpCiAgICBsZXQgdG90YWwg
PSBsZW4oczp1cGRhdGUuYWxsKQogICAgY2FsbCBzZXRsaW5lKDEsIChzOnVwZGF0ZS5wdWxsID8g
J1VwZGF0aW5nJyA6ICdJbnN0YWxsaW5nJykuCiAgICAgICAgICBcICcgcGx1Z2lucyAoJy5sZW4o
czp1cGRhdGUuYmFyKS4nLycudG90YWwuJyknKQogICAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCBz
OnVwZGF0ZS5iYXIsIHRvdGFsKQogICAgY2FsbCBzOnN3aXRjaF9vdXQoKQogIGVuZGlmCmVuZGZ1
bmN0aW9uCgpmdW5jdGlvbiEgczpsb2dwb3MobmFtZSkKICBsZXQgbWF4ID0gbGluZSgnJCcpCiAg
Zm9yIGkgaW4gcmFuZ2UoNCwgbWF4ID4gNCA/IG1heCA6IDQpCiAgICBpZiBnZXRsaW5lKGkpID1+
IyAnXlstK3gqXSAnLmE6bmFtZS4nOicKICAgICAgZm9yIGogaW4gcmFuZ2UoaSArIDEsIG1heCA+
IDUgPyBtYXggOiA1KQogICAgICAgIGlmIGdldGxpbmUoaikgIX4gJ14gJwogICAgICAgICAgcmV0
dXJuIFtpLCBqIC0gMV0KICAgICAgICBlbmRpZgogICAgICBlbmRmb3IKICAgICAgcmV0dXJuIFtp
LCBpXQogICAgZW5kaWYKICBlbmRmb3IKICByZXR1cm4gWzAsIDBdCmVuZGZ1bmN0aW9uCgpmdW5j
dGlvbiEgczpsb2coYnVsbGV0LCBuYW1lLCBsaW5lcykKICBpZiBzOnN3aXRjaF9pbigpCiAgICBs
ZXQgW2IsIGVdID0gczpsb2dwb3MoYTpuYW1lKQogICAgaWYgYiA+IDAKICAgICAgc2lsZW50IGV4
ZWN1dGUgcHJpbnRmKCclZCwlZCBkIF8nLCBiLCBlKQogICAgICBpZiBiID4gd2luaGVpZ2h0KCcu
JykKICAgICAgICBsZXQgYiA9IDQKICAgICAgZW5kaWYKICAgIGVsc2UKICAgICAgbGV0IGIgPSA0
CiAgICBlbmRpZgogICAgIiBGSVhNRSBGb3Igc29tZSByZWFzb24sIG5vbW9kaWZpYWJsZSBpcyBz
ZXQgYWZ0ZXIgOmQgaW4gdmltOAogICAgc2V0bG9jYWwgbW9kaWZpYWJsZQogICAgY2FsbCBhcHBl
bmQoYiAtIDEsIHM6Zm9ybWF0X21lc3NhZ2UoYTpidWxsZXQsIGE6bmFtZSwgYTpsaW5lcykpCiAg
ICBjYWxsIHM6c3dpdGNoX291dCgpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVw
ZGF0ZV92aW0oKQogIGxldCBzOmpvYnMgPSB7fQoKICBjYWxsIHM6YmFyKCkKICBjYWxsIHM6dGlj
aygpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczp0aWNrKCkKICBsZXQgcHVsbCA9IHM6dXBkYXRl
LnB1bGwKICBsZXQgcHJvZyA9IHM6cHJvZ3Jlc3Nfb3B0KHM6bnZpbSB8fCBzOnZpbTgpCndoaWxl
IDEgIiBXaXRob3V0IFRDTywgVmltIHN0YWNrIGlzIGJvdW5kIHRvIGV4cGxvZGUKICBpZiBlbXB0
eShzOnVwZGF0ZS50b2RvKQogICAgaWYgZW1wdHkoczpqb2JzKSAmJiAhczp1cGRhdGUuZmluCiAg
ICAgIGNhbGwgczp1cGRhdGVfZmluaXNoKCkKICAgICAgbGV0IHM6dXBkYXRlLmZpbiA9IDEKICAg
IGVuZGlmCiAgICByZXR1cm4KICBlbmRpZgoKICBsZXQgbmFtZSA9IGtleXMoczp1cGRhdGUudG9k
bylbMF0KICBsZXQgc3BlYyA9IHJlbW92ZShzOnVwZGF0ZS50b2RvLCBuYW1lKQogIGxldCBuZXcg
ID0gZW1wdHkoZ2xvYnBhdGgoc3BlYy5kaXIsICcuZ2l0JywgMSkpCgogIGNhbGwgczpsb2cobmV3
ID8gJysnIDogJyonLCBuYW1lLCBwdWxsID8gJ1VwZGF0aW5nIC4uLicgOiAnSW5zdGFsbGluZyAu
Li4nKQogIHJlZHJhdwoKICBsZXQgaGFzX3RhZyA9IGhhc19rZXkoc3BlYywgJ3RhZycpCiAgaWYg
IW5ldwogICAgbGV0IFtlcnJvciwgX10gPSBzOmdpdF92YWxpZGF0ZShzcGVjLCAwKQogICAgaWYg
ZW1wdHkoZXJyb3IpCiAgICAgIGlmIHB1bGwKICAgICAgICBsZXQgY21kID0gczpnaXRfdmVyc2lv
bl9yZXF1aXJlbWVudCgyKSA/IFsnZ2l0JywgJy1jJywgJ2NyZWRlbnRpYWwuaGVscGVyPScsICdm
ZXRjaCddIDogWydnaXQnLCAnZmV0Y2gnXQogICAgICAgIGlmIGhhc190YWcgJiYgIWVtcHR5KGds
b2JwYXRoKHNwZWMuZGlyLCAnLmdpdC9zaGFsbG93JykpCiAgICAgICAgICBjYWxsIGV4dGVuZChj
bWQsIFsnLS1kZXB0aCcsICc5OTk5OTk5OSddKQogICAgICAgIGVuZGlmCiAgICAgICAgaWYgIWVt
cHR5KHByb2cpCiAgICAgICAgICBjYWxsIGFkZChjbWQsIHByb2cpCiAgICAgICAgZW5kaWYKICAg
ICAgICBjYWxsIHM6c3Bhd24obmFtZSwgY21kLCB7ICdkaXInOiBzcGVjLmRpciB9KQogICAgICBl
bHNlCiAgICAgICAgbGV0IHM6am9ic1tuYW1lXSA9IHsgJ3J1bm5pbmcnOiAwLCAnbGluZXMnOiBb
J0FscmVhZHkgaW5zdGFsbGVkJ10sICdlcnJvcic6IDAgfQogICAgICBlbmRpZgogICAgZWxzZQog
ICAgICBsZXQgczpqb2JzW25hbWVdID0geyAncnVubmluZyc6IDAsICdsaW5lcyc6IHM6bGluZXMo
ZXJyb3IpLCAnZXJyb3InOiAxIH0KICAgIGVuZGlmCiAgZWxzZQogICAgbGV0IGNtZCA9IFsnZ2l0
JywgJ2Nsb25lJ10KICAgIGlmICFoYXNfdGFnCiAgICAgIGNhbGwgZXh0ZW5kKGNtZCwgczpjbG9u
ZV9vcHQpCiAgICBlbmRpZgogICAgaWYgIWVtcHR5KHByb2cpCiAgICAgIGNhbGwgYWRkKGNtZCwg
cHJvZykKICAgIGVuZGlmCiAgICBjYWxsIHM6c3Bhd24obmFtZSwgZXh0ZW5kKGNtZCwgW3NwZWMu
dXJpLCBzOnRyaW0oc3BlYy5kaXIpXSksIHsgJ25ldyc6IDEgfSkKICBlbmRpZgoKICBpZiAhczpq
b2JzW25hbWVdLnJ1bm5pbmcKICAgIGNhbGwgczpyZWFwKG5hbWUpCiAgZW5kaWYKICBpZiBsZW4o
czpqb2JzKSA+PSBzOnVwZGF0ZS50aHJlYWRzCiAgICBicmVhawogIGVuZGlmCmVuZHdoaWxlCmVu
ZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczp1cGRhdGVfcHl0aG9uKCkKbGV0IHB5X2V4ZSA9IGhhcygn
cHl0aG9uJykgPyAncHl0aG9uJyA6ICdweXRob24zJwpleGVjdXRlIHB5X2V4ZSAiPDwgRU9GIgpp
bXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGZ1bmN0b29scwppbXBvcnQgb3MKdHJ5OgogIGltcG9ydCBx
dWV1ZQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgaW1wb3J0IFF1ZXVlIGFzIHF1ZXVlCmltcG9ydCBy
YW5kb20KaW1wb3J0IHJlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHNpZ25hbAppbXBvcnQgc3VicHJv
Y2VzcwppbXBvcnQgdGVtcGZpbGUKaW1wb3J0IHRocmVhZGluZyBhcyB0aHIKaW1wb3J0IHRpbWUK
aW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdmltCgpHX05WSU0gPSB2aW0uZXZhbCgiaGFzKCdudmlt
JykiKSA9PSAnMScKR19QVUxMID0gdmltLmV2YWwoJ3M6dXBkYXRlLnB1bGwnKSA9PSAnMScKR19S
RVRSSUVTID0gaW50KHZpbS5ldmFsKCdnZXQoZzosICJwbHVnX3JldHJpZXMiLCAyKScpKSArIDEK
R19USU1FT1VUID0gaW50KHZpbS5ldmFsKCdnZXQoZzosICJwbHVnX3RpbWVvdXQiLCA2MCknKSkK
R19DTE9ORV9PUFQgPSAnICcuam9pbih2aW0uZXZhbCgnczpjbG9uZV9vcHQnKSkKR19QUk9HUkVT
UyA9IHZpbS5ldmFsKCdzOnByb2dyZXNzX29wdCgxKScpCkdfTE9HX1BST0IgPSAxLjAgLyBpbnQo
dmltLmV2YWwoJ3M6dXBkYXRlLnRocmVhZHMnKSkKR19TVE9QID0gdGhyLkV2ZW50KCkKR19JU19X
SU4gPSB2aW0uZXZhbCgnczppc193aW4nKSA9PSAnMScKCmNsYXNzIFBsdWdFcnJvcihFeGNlcHRp
b24pOgogIGRlZiBfX2luaXRfXyhzZWxmLCBtc2cpOgogICAgc2VsZi5tc2cgPSBtc2cKY2xhc3Mg
Q21kVGltZWRPdXQoUGx1Z0Vycm9yKToKICBwYXNzCmNsYXNzIENtZEZhaWxlZChQbHVnRXJyb3Ip
OgogIHBhc3MKY2xhc3MgSW52YWxpZFVSSShQbHVnRXJyb3IpOgogIHBhc3MKY2xhc3MgQWN0aW9u
KG9iamVjdCk6CiAgSU5TVEFMTCwgVVBEQVRFLCBFUlJPUiwgRE9ORSA9IFsnKycsICcqJywgJ3gn
LCAnLSddCgpjbGFzcyBCdWZmZXIob2JqZWN0KToKICBkZWYgX19pbml0X18oc2VsZiwgbG9jaywg
bnVtX3BsdWdzLCBpc19wdWxsKToKICAgIHNlbGYuYmFyID0gJycKICAgIHNlbGYuZXZlbnQgPSAn
VXBkYXRpbmcnIGlmIGlzX3B1bGwgZWxzZSAnSW5zdGFsbGluZycKICAgIHNlbGYubG9jayA9IGxv
Y2sKICAgIHNlbGYubWF4eSA9IGludCh2aW0uZXZhbCgnd2luaGVpZ2h0KCIuIiknKSkKICAgIHNl
bGYubnVtX3BsdWdzID0gbnVtX3BsdWdzCgogIGRlZiBfX3doZXJlKHNlbGYsIG5hbWUpOgogICAg
IiIiIEZpbmQgZmlyc3QgbGluZSB3aXRoIG5hbWUgaW4gY3VycmVudCBidWZmZXIuIFJldHVybiBs
aW5lIG51bS4gIiIiCiAgICBmb3VuZCwgbG51bSA9IEZhbHNlLCAwCiAgICBtYXRjaGVyID0gcmUu
Y29tcGlsZSgnXlstK3gqXSB7MH06Jy5mb3JtYXQobmFtZSkpCiAgICBmb3IgbGluZSBpbiB2aW0u
Y3VycmVudC5idWZmZXI6CiAgICAgIGlmIG1hdGNoZXIuc2VhcmNoKGxpbmUpIGlzIG5vdCBOb25l
OgogICAgICAgIGZvdW5kID0gVHJ1ZQogICAgICAgIGJyZWFrCiAgICAgIGxudW0gKz0gMQoKICAg
IGlmIG5vdCBmb3VuZDoKICAgICAgbG51bSA9IC0xCiAgICByZXR1cm4gbG51bQoKICBkZWYgaGVh
ZGVyKHNlbGYpOgogICAgY3VyYnVmID0gdmltLmN1cnJlbnQuYnVmZmVyCiAgICBjdXJidWZbMF0g
PSBzZWxmLmV2ZW50ICsgJyBwbHVnaW5zICh7MH0vezF9KScuZm9ybWF0KGxlbihzZWxmLmJhciks
IHNlbGYubnVtX3BsdWdzKQoKICAgIG51bV9zcGFjZXMgPSBzZWxmLm51bV9wbHVncyAtIGxlbihz
ZWxmLmJhcikKICAgIGN1cmJ1ZlsxXSA9ICdbezB9ezF9XScuZm9ybWF0KHNlbGYuYmFyLCBudW1f
c3BhY2VzICogJyAnKQoKICAgIHdpdGggc2VsZi5sb2NrOgogICAgICB2aW0uY29tbWFuZCgnbm9y
bWFsISAyRycpCiAgICAgIHZpbS5jb21tYW5kKCdyZWRyYXcnKQoKICBkZWYgd3JpdGUoc2VsZiwg
YWN0aW9uLCBuYW1lLCBsaW5lcyk6CiAgICBmaXJzdCwgcmVzdCA9IGxpbmVzWzBdLCBsaW5lc1sx
Ol0KICAgIG1zZyA9IFsnezB9IHsxfXsyfXszfScuZm9ybWF0KGFjdGlvbiwgbmFtZSwgJzogJyBp
ZiBmaXJzdCBlbHNlICcnLCBmaXJzdCldCiAgICBtc2cuZXh0ZW5kKFsnICAgICcgKyBsaW5lIGZv
ciBsaW5lIGluIHJlc3RdKQoKICAgIHRyeToKICAgICAgaWYgYWN0aW9uID09IEFjdGlvbi5FUlJP
UjoKICAgICAgICBzZWxmLmJhciArPSAneCcKICAgICAgICB2aW0uY29tbWFuZCgiY2FsbCBhZGQo
czp1cGRhdGUuZXJyb3JzLCAnezB9JykiLmZvcm1hdChuYW1lKSkKICAgICAgZWxpZiBhY3Rpb24g
PT0gQWN0aW9uLkRPTkU6CiAgICAgICAgc2VsZi5iYXIgKz0gJz0nCgogICAgICBjdXJidWYgPSB2
aW0uY3VycmVudC5idWZmZXIKICAgICAgbG51bSA9IHNlbGYuX193aGVyZShuYW1lKQogICAgICBp
ZiBsbnVtICE9IC0xOiAjIEZvdW5kIG1hdGNoaW5nIGxpbmUgbnVtCiAgICAgICAgZGVsIGN1cmJ1
ZltsbnVtXQogICAgICAgIGlmIGxudW0gPiBzZWxmLm1heHkgYW5kIGFjdGlvbiBpbiBzZXQoW0Fj
dGlvbi5JTlNUQUxMLCBBY3Rpb24uVVBEQVRFXSk6CiAgICAgICAgICBsbnVtID0gMwogICAgICBl
bHNlOgogICAgICAgIGxudW0gPSAzCiAgICAgIGN1cmJ1Zi5hcHBlbmQobXNnLCBsbnVtKQoKICAg
ICAgc2VsZi5oZWFkZXIoKQogICAgZXhjZXB0IHZpbS5lcnJvcjoKICAgICAgcGFzcwoKY2xhc3Mg
Q29tbWFuZChvYmplY3QpOgogIENEID0gJ2NkIC9kJyBpZiBHX0lTX1dJTiBlbHNlICdjZCcKCiAg
ZGVmIF9faW5pdF9fKHNlbGYsIGNtZCwgY21kX2Rpcj1Ob25lLCB0aW1lb3V0PTYwLCBjYj1Ob25l
LCBjbGVhbj1Ob25lKToKICAgIHNlbGYuY21kID0gY21kCiAgICBpZiBjbWRfZGlyOgogICAgICBz
ZWxmLmNtZCA9ICd7MH0gezF9ICYmIHsyfScuZm9ybWF0KENvbW1hbmQuQ0QsIGNtZF9kaXIsIHNl
bGYuY21kKQogICAgc2VsZi50aW1lb3V0ID0gdGltZW91dAogICAgc2VsZi5jYWxsYmFjayA9IGNi
IGlmIGNiIGVsc2UgKGxhbWJkYSBtc2c6IE5vbmUpCiAgICBzZWxmLmNsZWFuID0gY2xlYW4gaWYg
Y2xlYW4gZWxzZSAobGFtYmRhOiBOb25lKQogICAgc2VsZi5wcm9jID0gTm9uZQoKICBAcHJvcGVy
dHkKICBkZWYgYWxpdmUoc2VsZik6CiAgICAiIiIgUmV0dXJucyB0cnVlIG9ubHkgaWYgY29tbWFu
ZCBzdGlsbCBydW5uaW5nLiAiIiIKICAgIHJldHVybiBzZWxmLnByb2MgYW5kIHNlbGYucHJvYy5w
b2xsKCkgaXMgTm9uZQoKICBkZWYgZXhlY3V0ZShzZWxmLCBudHJpZXM9Myk6CiAgICAiIiIgRXhl
Y3V0ZSB0aGUgY29tbWFuZCB3aXRoIG50cmllcyBpZiBDbWRUaW1lZE91dC4KICAgICAgICBSZXR1
cm5zIHRoZSBvdXRwdXQgb2YgdGhlIGNvbW1hbmQgaWYgbm8gRXhjZXB0aW9uLgogICAgIiIiCiAg
ICBhdHRlbXB0LCBmaW5pc2hlZCwgbGltaXQgPSAwLCBGYWxzZSwgc2VsZi50aW1lb3V0CgogICAg
d2hpbGUgbm90IGZpbmlzaGVkOgogICAgICB0cnk6CiAgICAgICAgYXR0ZW1wdCArPSAxCiAgICAg
ICAgcmVzdWx0ID0gc2VsZi50cnlfY29tbWFuZCgpCiAgICAgICAgZmluaXNoZWQgPSBUcnVlCiAg
ICAgICAgcmV0dXJuIHJlc3VsdAogICAgICBleGNlcHQgQ21kVGltZWRPdXQ6CiAgICAgICAgaWYg
YXR0ZW1wdCAhPSBudHJpZXM6CiAgICAgICAgICBzZWxmLm5vdGlmeV9yZXRyeSgpCiAgICAgICAg
ICBzZWxmLnRpbWVvdXQgKz0gbGltaXQKICAgICAgICBlbHNlOgogICAgICAgICAgcmFpc2UKCiAg
ZGVmIG5vdGlmeV9yZXRyeShzZWxmKToKICAgICIiIiBSZXRyeSByZXF1aXJlZCBmb3IgY29tbWFu
ZCwgbm90aWZ5IHVzZXIuICIiIgogICAgZm9yIGNvdW50IGluIHJhbmdlKDMsIDAsIC0xKToKICAg
ICAgaWYgR19TVE9QLmlzX3NldCgpOgogICAgICAgIHJhaXNlIEtleWJvYXJkSW50ZXJydXB0CiAg
ICAgIG1zZyA9ICdUaW1lb3V0LiBXaWxsIHJldHJ5IGluIHswfSBzZWNvbmR7MX0gLi4uJy5mb3Jt
YXQoCiAgICAgICAgICAgIGNvdW50LCAncycgaWYgY291bnQgIT0gMSBlbHNlICcnKQogICAgICBz
ZWxmLmNhbGxiYWNrKFttc2ddKQogICAgICB0aW1lLnNsZWVwKDEpCiAgICBzZWxmLmNhbGxiYWNr
KFsnUmV0cnlpbmcgLi4uJ10pCgogIGRlZiB0cnlfY29tbWFuZChzZWxmKToKICAgICIiIiBFeGVj
dXRlIGEgY21kICYgcG9sbCBmb3IgY2FsbGJhY2suIFJldHVybnMgbGlzdCBvZiBvdXRwdXQuCiAg
ICAgICAgUmFpc2VzIENtZEZhaWxlZCAgIC0+IHJldHVybiBjb2RlIGZvciBQb3BlbiBpc24ndCAw
CiAgICAgICAgUmFpc2VzIENtZFRpbWVkT3V0IC0+IGNvbW1hbmQgZXhjZWVkZWQgdGltZW91dCB3
aXRob3V0IG5ldyBvdXRwdXQKICAgICIiIgogICAgZmlyc3RfbGluZSA9IFRydWUKCiAgICB0cnk6
CiAgICAgIHRmaWxlID0gdGVtcGZpbGUuTmFtZWRUZW1wb3JhcnlGaWxlKG1vZGU9J3crYicpCiAg
ICAgIHByZWV4ZWNfZm4gPSBub3QgR19JU19XSU4gYW5kIG9zLnNldHNpZCBvciBOb25lCiAgICAg
IHNlbGYucHJvYyA9IHN1YnByb2Nlc3MuUG9wZW4oc2VsZi5jbWQsIHN0ZG91dD10ZmlsZSwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRlcnI9c3VicHJvY2Vzcy5TVERPVVQs
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkaW49c3VicHJvY2Vzcy5QSVBF
LCBzaGVsbD1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWV4ZWNf
Zm49cHJlZXhlY19mbikKICAgICAgdGhyZCA9IHRoci5UaHJlYWQodGFyZ2V0PShsYW1iZGEgcHJv
YzogcHJvYy53YWl0KCkpLCBhcmdzPShzZWxmLnByb2MsKSkKICAgICAgdGhyZC5zdGFydCgpCgog
ICAgICB0aHJlYWRfbm90X3N0YXJ0ZWQgPSBUcnVlCiAgICAgIHdoaWxlIHRocmVhZF9ub3Rfc3Rh
cnRlZDoKICAgICAgICB0cnk6CiAgICAgICAgICB0aHJkLmpvaW4oMC4xKQogICAgICAgICAgdGhy
ZWFkX25vdF9zdGFydGVkID0gRmFsc2UKICAgICAgICBleGNlcHQgUnVudGltZUVycm9yOgogICAg
ICAgICAgcGFzcwoKICAgICAgd2hpbGUgc2VsZi5hbGl2ZToKICAgICAgICBpZiBHX1NUT1AuaXNf
c2V0KCk6CiAgICAgICAgICByYWlzZSBLZXlib2FyZEludGVycnVwdAoKICAgICAgICBpZiBmaXJz
dF9saW5lIG9yIHJhbmRvbS5yYW5kb20oKSA8IEdfTE9HX1BST0I6CiAgICAgICAgICBmaXJzdF9s
aW5lID0gRmFsc2UKICAgICAgICAgIGxpbmUgPSAnJyBpZiBHX0lTX1dJTiBlbHNlIG5vbmJsb2Nr
X3JlYWQodGZpbGUubmFtZSkKICAgICAgICAgIGlmIGxpbmU6CiAgICAgICAgICAgIHNlbGYuY2Fs
bGJhY2soW2xpbmVdKQoKICAgICAgICB0aW1lX2RpZmYgPSB0aW1lLnRpbWUoKSAtIG9zLnBhdGgu
Z2V0bXRpbWUodGZpbGUubmFtZSkKICAgICAgICBpZiB0aW1lX2RpZmYgPiBzZWxmLnRpbWVvdXQ6
CiAgICAgICAgICByYWlzZSBDbWRUaW1lZE91dChbJ1RpbWVvdXQhJ10pCgogICAgICAgIHRocmQu
am9pbigwLjUpCgogICAgICB0ZmlsZS5zZWVrKDApCiAgICAgIHJlc3VsdCA9IFtsaW5lLmRlY29k
ZSgndXRmLTgnLCAncmVwbGFjZScpLnJzdHJpcCgpIGZvciBsaW5lIGluIHRmaWxlXQoKICAgICAg
aWYgc2VsZi5wcm9jLnJldHVybmNvZGUgIT0gMDoKICAgICAgICByYWlzZSBDbWRGYWlsZWQoWycn
XSArIHJlc3VsdCkKCiAgICAgIHJldHVybiByZXN1bHQKICAgIGV4Y2VwdDoKICAgICAgc2VsZi50
ZXJtaW5hdGUoKQogICAgICByYWlzZQoKICBkZWYgdGVybWluYXRlKHNlbGYpOgogICAgIiIiIFRl
cm1pbmF0ZSBwcm9jZXNzIGFuZCBjbGVhbnVwLiAiIiIKICAgIGlmIHNlbGYuYWxpdmU6CiAgICAg
IGlmIEdfSVNfV0lOOgogICAgICAgIG9zLmtpbGwoc2VsZi5wcm9jLnBpZCwgc2lnbmFsLlNJR0lO
VCkKICAgICAgZWxzZToKICAgICAgICBvcy5raWxscGcoc2VsZi5wcm9jLnBpZCwgc2lnbmFsLlNJ
R1RFUk0pCiAgICBzZWxmLmNsZWFuKCkKCmNsYXNzIFBsdWdpbihvYmplY3QpOgogIGRlZiBfX2lu
aXRfXyhzZWxmLCBuYW1lLCBhcmdzLCBidWZfcSwgbG9jayk6CiAgICBzZWxmLm5hbWUgPSBuYW1l
CiAgICBzZWxmLmFyZ3MgPSBhcmdzCiAgICBzZWxmLmJ1Zl9xID0gYnVmX3EKICAgIHNlbGYubG9j
ayA9IGxvY2sKICAgIHNlbGYudGFnID0gYXJncy5nZXQoJ3RhZycsIDApCgogIGRlZiBtYW5hZ2Uo
c2VsZik6CiAgICB0cnk6CiAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHNlbGYuYXJnc1snZGlyJ10p
OgogICAgICAgIHNlbGYudXBkYXRlKCkKICAgICAgZWxzZToKICAgICAgICBzZWxmLmluc3RhbGwo
KQogICAgICAgIHdpdGggc2VsZi5sb2NrOgogICAgICAgICAgdGhyZWFkX3ZpbV9jb21tYW5kKCJs
ZXQgczp1cGRhdGUubmV3Wyd7MH0nXSA9IDEiLmZvcm1hdChzZWxmLm5hbWUpKQogICAgZXhjZXB0
IFBsdWdFcnJvciBhcyBleGM6CiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkVSUk9SLCBzZWxmLm5h
bWUsIGV4Yy5tc2cpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgIEdfU1RPUC5z
ZXQoKQogICAgICBzZWxmLndyaXRlKEFjdGlvbi5FUlJPUiwgc2VsZi5uYW1lLCBbJ0ludGVycnVw
dGVkISddKQogICAgZXhjZXB0OgogICAgICAjIEFueSBleGNlcHRpb24gZXhjZXB0IHRob3NlIGFi
b3ZlIHByaW50IHN0YWNrIHRyYWNlCiAgICAgIG1zZyA9ICdUcmFjZTpcbnswfScuZm9ybWF0KHRy
YWNlYmFjay5mb3JtYXRfZXhjKCkucnN0cmlwKCkpCiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkVS
Uk9SLCBzZWxmLm5hbWUsIG1zZy5zcGxpdCgnXG4nKSkKICAgICAgcmFpc2UKCiAgZGVmIGluc3Rh
bGwoc2VsZik6CiAgICB0YXJnZXQgPSBzZWxmLmFyZ3NbJ2RpciddCiAgICBpZiB0YXJnZXRbLTFd
ID09ICdcXCc6CiAgICAgIHRhcmdldCA9IHRhcmdldFswOi0xXQoKICAgIGRlZiBjbGVhbih0YXJn
ZXQpOgogICAgICBkZWYgX2NsZWFuKCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgc2h1dGlsLnJt
dHJlZSh0YXJnZXQpCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICBwYXNzCiAgICAg
IHJldHVybiBfY2xlYW4KCiAgICBzZWxmLndyaXRlKEFjdGlvbi5JTlNUQUxMLCBzZWxmLm5hbWUs
IFsnSW5zdGFsbGluZyAuLi4nXSkKICAgIGNhbGxiYWNrID0gZnVuY3Rvb2xzLnBhcnRpYWwoc2Vs
Zi53cml0ZSwgQWN0aW9uLklOU1RBTEwsIHNlbGYubmFtZSkKICAgIGNtZCA9ICdnaXQgY2xvbmUg
ezB9IHsxfSB7Mn0gezN9IDI+JjEnLmZvcm1hdCgKICAgICAgICAgICcnIGlmIHNlbGYudGFnIGVs
c2UgR19DTE9ORV9PUFQsIEdfUFJPR1JFU1MsIHNlbGYuYXJnc1sndXJpJ10sCiAgICAgICAgICBl
c2ModGFyZ2V0KSkKICAgIGNvbSA9IENvbW1hbmQoY21kLCBOb25lLCBHX1RJTUVPVVQsIGNhbGxi
YWNrLCBjbGVhbih0YXJnZXQpKQogICAgcmVzdWx0ID0gY29tLmV4ZWN1dGUoR19SRVRSSUVTKQog
ICAgc2VsZi53cml0ZShBY3Rpb24uRE9ORSwgc2VsZi5uYW1lLCByZXN1bHRbLTE6XSkKCiAgZGVm
IHJlcG9fdXJpKHNlbGYpOgogICAgY21kID0gJ2dpdCByZXYtcGFyc2UgLS1hYmJyZXYtcmVmIEhF
QUQgMj4mMSAmJiBnaXQgY29uZmlnIC1mIC5naXQvY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsJwog
ICAgY29tbWFuZCA9IENvbW1hbmQoY21kLCBzZWxmLmFyZ3NbJ2RpciddLCBHX1RJTUVPVVQsKQog
ICAgcmVzdWx0ID0gY29tbWFuZC5leGVjdXRlKEdfUkVUUklFUykKICAgIHJldHVybiByZXN1bHRb
LTFdCgogIGRlZiB1cGRhdGUoc2VsZik6CiAgICBhY3R1YWxfdXJpID0gc2VsZi5yZXBvX3VyaSgp
CiAgICBleHBlY3RfdXJpID0gc2VsZi5hcmdzWyd1cmknXQogICAgcmVnZXggPSByZS5jb21waWxl
KHInXig/Olx3KzovLyk/KD86W15AL10qQCk/KFteOi9dKig/OjpbMC05XSopPylbOi9dKC4qPyko
PzpcLmdpdCk/Lz8kJykKICAgIG1hID0gcmVnZXgubWF0Y2goYWN0dWFsX3VyaSkKICAgIG1iID0g
cmVnZXgubWF0Y2goZXhwZWN0X3VyaSkKICAgIGlmIG1hIGlzIE5vbmUgb3IgbWIgaXMgTm9uZSBv
ciBtYS5ncm91cHMoKSAhPSBtYi5ncm91cHMoKToKICAgICAgbXNnID0gWycnLAogICAgICAgICAg
ICAgJ0ludmFsaWQgVVJJOiB7MH0nLmZvcm1hdChhY3R1YWxfdXJpKSwKICAgICAgICAgICAgICdF
eHBlY3RlZCAgICAgezB9Jy5mb3JtYXQoZXhwZWN0X3VyaSksCiAgICAgICAgICAgICAnUGx1Z0Ns
ZWFuIHJlcXVpcmVkLiddCiAgICAgIHJhaXNlIEludmFsaWRVUkkobXNnKQoKICAgIGlmIEdfUFVM
TDoKICAgICAgc2VsZi53cml0ZShBY3Rpb24uVVBEQVRFLCBzZWxmLm5hbWUsIFsnVXBkYXRpbmcg
Li4uJ10pCiAgICAgIGNhbGxiYWNrID0gZnVuY3Rvb2xzLnBhcnRpYWwoc2VsZi53cml0ZSwgQWN0
aW9uLlVQREFURSwgc2VsZi5uYW1lKQogICAgICBmZXRjaF9vcHQgPSAnLS1kZXB0aCA5OTk5OTk5
OScgaWYgc2VsZi50YWcgYW5kIG9zLnBhdGguaXNmaWxlKG9zLnBhdGguam9pbihzZWxmLmFyZ3Nb
J2RpciddLCAnLmdpdC9zaGFsbG93JykpIGVsc2UgJycKICAgICAgY21kID0gJ2dpdCBmZXRjaCB7
MH0gezF9IDI+JjEnLmZvcm1hdChmZXRjaF9vcHQsIEdfUFJPR1JFU1MpCiAgICAgIGNvbSA9IENv
bW1hbmQoY21kLCBzZWxmLmFyZ3NbJ2RpciddLCBHX1RJTUVPVVQsIGNhbGxiYWNrKQogICAgICBy
ZXN1bHQgPSBjb20uZXhlY3V0ZShHX1JFVFJJRVMpCiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkRP
TkUsIHNlbGYubmFtZSwgcmVzdWx0Wy0xOl0pCiAgICBlbHNlOgogICAgICBzZWxmLndyaXRlKEFj
dGlvbi5ET05FLCBzZWxmLm5hbWUsIFsnQWxyZWFkeSBpbnN0YWxsZWQnXSkKCiAgZGVmIHdyaXRl
KHNlbGYsIGFjdGlvbiwgbmFtZSwgbXNnKToKICAgIHNlbGYuYnVmX3EucHV0KChhY3Rpb24sIG5h
bWUsIG1zZykpCgpjbGFzcyBQbHVnVGhyZWFkKHRoci5UaHJlYWQpOgogIGRlZiBfX2luaXRfXyhz
ZWxmLCB0bmFtZSwgYXJncyk6CiAgICBzdXBlcihQbHVnVGhyZWFkLCBzZWxmKS5fX2luaXRfXygp
CiAgICBzZWxmLnRuYW1lID0gdG5hbWUKICAgIHNlbGYuYXJncyA9IGFyZ3MKCiAgZGVmIHJ1bihz
ZWxmKToKICAgIHRoci5jdXJyZW50X3RocmVhZCgpLm5hbWUgPSBzZWxmLnRuYW1lCiAgICBidWZf
cSwgd29ya19xLCBsb2NrID0gc2VsZi5hcmdzCgogICAgdHJ5OgogICAgICB3aGlsZSBub3QgR19T
VE9QLmlzX3NldCgpOgogICAgICAgIG5hbWUsIGFyZ3MgPSB3b3JrX3EuZ2V0X25vd2FpdCgpCiAg
ICAgICAgcGx1ZyA9IFBsdWdpbihuYW1lLCBhcmdzLCBidWZfcSwgbG9jaykKICAgICAgICBwbHVn
Lm1hbmFnZSgpCiAgICAgICAgd29ya19xLnRhc2tfZG9uZSgpCiAgICBleGNlcHQgcXVldWUuRW1w
dHk6CiAgICAgIHBhc3MKCmNsYXNzIFJlZnJlc2hUaHJlYWQodGhyLlRocmVhZCk6CiAgZGVmIF9f
aW5pdF9fKHNlbGYsIGxvY2spOgogICAgc3VwZXIoUmVmcmVzaFRocmVhZCwgc2VsZikuX19pbml0
X18oKQogICAgc2VsZi5sb2NrID0gbG9jawogICAgc2VsZi5ydW5uaW5nID0gVHJ1ZQoKICBkZWYg
cnVuKHNlbGYpOgogICAgd2hpbGUgc2VsZi5ydW5uaW5nOgogICAgICB3aXRoIHNlbGYubG9jazoK
ICAgICAgICB0aHJlYWRfdmltX2NvbW1hbmQoJ25vYXV0b2NtZCBub3JtYWwhIGEnKQogICAgICB0
aW1lLnNsZWVwKDAuMzMpCgogIGRlZiBzdG9wKHNlbGYpOgogICAgc2VsZi5ydW5uaW5nID0gRmFs
c2UKCmlmIEdfTlZJTToKICBkZWYgdGhyZWFkX3ZpbV9jb21tYW5kKGNtZCk6CiAgICB2aW0uc2Vz
c2lvbi50aHJlYWRzYWZlX2NhbGwobGFtYmRhOiB2aW0uY29tbWFuZChjbWQpKQplbHNlOgogIGRl
ZiB0aHJlYWRfdmltX2NvbW1hbmQoY21kKToKICAgIHZpbS5jb21tYW5kKGNtZCkKCmRlZiBlc2Mo
bmFtZSk6CiAgcmV0dXJuICciJyArIG5hbWUucmVwbGFjZSgnIicsICdcIicpICsgJyInCgpkZWYg
bm9uYmxvY2tfcmVhZChmbmFtZSk6CiAgIiIiIFJlYWQgYSBmaWxlIHdpdGggbm9uYmxvY2sgZmxh
Zy4gUmV0dXJuIHRoZSBsYXN0IGxpbmUuICIiIgogIGZyZWFkID0gb3Mub3BlbihmbmFtZSwgb3Mu
T19SRE9OTFkgfCBvcy5PX05PTkJMT0NLKQogIGJ1ZiA9IG9zLnJlYWQoZnJlYWQsIDEwMDAwMCku
ZGVjb2RlKCd1dGYtOCcsICdyZXBsYWNlJykKICBvcy5jbG9zZShmcmVhZCkKCiAgbGluZSA9IGJ1
Zi5yc3RyaXAoJ1xyXG4nKQogIGxlZnQgPSBtYXgobGluZS5yZmluZCgnXHInKSwgbGluZS5yZmlu
ZCgnXG4nKSkKICBpZiBsZWZ0ICE9IC0xOgogICAgbGVmdCArPSAxCiAgICBsaW5lID0gbGluZVts
ZWZ0Ol0KCiAgcmV0dXJuIGxpbmUKCmRlZiBtYWluKCk6CiAgdGhyLmN1cnJlbnRfdGhyZWFkKCku
bmFtZSA9ICdtYWluJwogIG50aHJlYWRzID0gaW50KHZpbS5ldmFsKCdzOnVwZGF0ZS50aHJlYWRz
JykpCiAgcGx1Z3MgPSB2aW0uZXZhbCgnczp1cGRhdGUudG9kbycpCiAgbWFjX2d1aSA9IHZpbS5l
dmFsKCdzOm1hY19ndWknKSA9PSAnMScKCiAgbG9jayA9IHRoci5Mb2NrKCkKICBidWYgPSBCdWZm
ZXIobG9jaywgbGVuKHBsdWdzKSwgR19QVUxMKQogIGJ1Zl9xLCB3b3JrX3EgPSBxdWV1ZS5RdWV1
ZSgpLCBxdWV1ZS5RdWV1ZSgpCiAgZm9yIHdvcmsgaW4gcGx1Z3MuaXRlbXMoKToKICAgIHdvcmtf
cS5wdXQod29yaykKCiAgc3RhcnRfY250ID0gdGhyLmFjdGl2ZV9jb3VudCgpCiAgZm9yIG51bSBp
biByYW5nZShudGhyZWFkcyk6CiAgICB0bmFtZSA9ICdQbHVnVC17MDowMn0nLmZvcm1hdChudW0p
CiAgICB0aHJlYWQgPSBQbHVnVGhyZWFkKHRuYW1lLCAoYnVmX3EsIHdvcmtfcSwgbG9jaykpCiAg
ICB0aHJlYWQuc3RhcnQoKQogIGlmIG1hY19ndWk6CiAgICBydGhyZWFkID0gUmVmcmVzaFRocmVh
ZChsb2NrKQogICAgcnRocmVhZC5zdGFydCgpCgogIHdoaWxlIG5vdCBidWZfcS5lbXB0eSgpIG9y
IHRoci5hY3RpdmVfY291bnQoKSAhPSBzdGFydF9jbnQ6CiAgICB0cnk6CiAgICAgIGFjdGlvbiwg
bmFtZSwgbXNnID0gYnVmX3EuZ2V0KFRydWUsIDAuMjUpCiAgICAgIGJ1Zi53cml0ZShhY3Rpb24s
IG5hbWUsIFsnT0snXSBpZiBub3QgbXNnIGVsc2UgbXNnKQogICAgICBidWZfcS50YXNrX2RvbmUo
KQogICAgZXhjZXB0IHF1ZXVlLkVtcHR5OgogICAgICBwYXNzCiAgICBleGNlcHQgS2V5Ym9hcmRJ
bnRlcnJ1cHQ6CiAgICAgIEdfU1RPUC5zZXQoKQoKICBpZiBtYWNfZ3VpOgogICAgcnRocmVhZC5z
dG9wKCkKICAgIHJ0aHJlYWQuam9pbigpCgptYWluKCkKRU9GCmVuZGZ1bmN0aW9uCgpmdW5jdGlv
biEgczp1cGRhdGVfcnVieSgpCiAgcnVieSA8PCBFT0YKICBtb2R1bGUgUGx1Z1N0cmVhbQogICAg
U0VQID0gWyJcciIsICJcbiIsIG5pbF0KICAgIGRlZiBnZXRfbGluZQogICAgICBidWZmZXIgPSAn
JwogICAgICBsb29wIGRvCiAgICAgICAgY2hhciA9IHJlYWRjaGFyIHJlc2N1ZSByZXR1cm4KICAg
ICAgICBpZiBTRVAuaW5jbHVkZT8gY2hhci5jaHIKICAgICAgICAgIGJ1ZmZlciA8PCAkLwogICAg
ICAgICAgYnJlYWsKICAgICAgICBlbHNlCiAgICAgICAgICBidWZmZXIgPDwgY2hhcgogICAgICAg
IGVuZAogICAgICBlbmQKICAgICAgYnVmZmVyCiAgICBlbmQKICBlbmQgdW5sZXNzIGRlZmluZWQ/
KFBsdWdTdHJlYW0pCgogIGRlZiBlc2MgYXJnCiAgICAlWyIje2FyZy5nc3ViKCciJywgJ1wiJyl9
Il0KICBlbmQKCiAgZGVmIGtpbGxhbGwgcGlkCiAgICBwaWRzID0gW3BpZF0KICAgIGlmIC9tc3dp
bnxtaW5nd3xiY2N3aW4vID1+IFJVQllfUExBVEZPUk0KICAgICAgcGlkcy5lYWNoIHsgfHBpZHwg
UHJvY2Vzcy5raWxsICdJTlQnLCBwaWQudG9faSByZXNjdWUgbmlsIH0KICAgIGVsc2UKICAgICAg
dW5sZXNzIGB3aGljaCBwZ3JlcCAyPiAvZGV2L251bGxgLmVtcHR5PwogICAgICAgIGNoaWxkcmVu
ID0gcGlkcwogICAgICAgIHVudGlsIGNoaWxkcmVuLmVtcHR5PwogICAgICAgICAgY2hpbGRyZW4g
PSBjaGlsZHJlbi5tYXAgeyB8cGlkfAogICAgICAgICAgICBgcGdyZXAgLVAgI3twaWR9YC5saW5l
cy5tYXAgeyB8bHwgbC5jaG9tcCB9CiAgICAgICAgICB9LmZsYXR0ZW4KICAgICAgICAgIHBpZHMg
Kz0gY2hpbGRyZW4KICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHBpZHMuZWFjaCB7IHxwaWR8
IFByb2Nlc3Mua2lsbCAnVEVSTScsIHBpZC50b19pIHJlc2N1ZSBuaWwgfQogICAgZW5kCiAgZW5k
CgogIGRlZiBjb21wYXJlX2dpdF91cmkgYSwgYgogICAgcmVnZXggPSAlcnteKD86XHcrOi8vKT8o
PzpbXkAvXSpAKT8oW146L10qKD86OlswLTldKik/KVs6L10oLio/KSg/OlwuZ2l0KT8vPyR9CiAg
ICByZWdleC5tYXRjaChhKS50b19hLmRyb3AoMSkgPT0gcmVnZXgubWF0Y2goYikudG9fYS5kcm9w
KDEpCiAgZW5kCgogIHJlcXVpcmUgJ3RocmVhZCcKICByZXF1aXJlICdmaWxldXRpbHMnCiAgcmVx
dWlyZSAndGltZW91dCcKICBydW5uaW5nID0gdHJ1ZQogIGlzd2luID0gVklNOjpldmFsdWF0ZSgn
czppc193aW4nKS50b19pID09IDEKICBwdWxsICA9IFZJTTo6ZXZhbHVhdGUoJ3M6dXBkYXRlLnB1
bGwnKS50b19pID09IDEKICBiYXNlICA9IFZJTTo6ZXZhbHVhdGUoJ2c6cGx1Z19ob21lJykKICBh
bGwgICA9IFZJTTo6ZXZhbHVhdGUoJ3M6dXBkYXRlLnRvZG8nKQogIGxpbWl0ID0gVklNOjpldmFs
dWF0ZSgnZ2V0KGc6LCAicGx1Z190aW1lb3V0IiwgNjApJykKICB0cmllcyA9IFZJTTo6ZXZhbHVh
dGUoJ2dldChnOiwgInBsdWdfcmV0cmllcyIsIDIpJykgKyAxCiAgbnRociAgPSBWSU06OmV2YWx1
YXRlKCdzOnVwZGF0ZS50aHJlYWRzJykudG9faQogIG1heHkgID0gVklNOjpldmFsdWF0ZSgnd2lu
aGVpZ2h0KCIuIiknKS50b19pCiAgdmltNyAgPSBWSU06OmV2YWx1YXRlKCd2OnZlcnNpb24nKS50
b19pIDw9IDcwMyAmJiBSVUJZX1BMQVRGT1JNID1+IC9kYXJ3aW4vCiAgY2QgICAgPSBpc3dpbiA/
ICdjZCAvZCcgOiAnY2QnCiAgdG90ICAgPSBWSU06OmV2YWx1YXRlKCdsZW4oczp1cGRhdGUudG9k
byknKSB8fCAwCiAgYmFyICAgPSAnJwogIHNraXAgID0gJ0FscmVhZHkgaW5zdGFsbGVkJwogIG10
eCAgID0gTXV0ZXgubmV3CiAgdGFrZTEgPSBwcm9jIHsgbXR4LnN5bmNocm9uaXplIHsgcnVubmlu
ZyAmJiBhbGwuc2hpZnQgfSB9CiAgbG9naCAgPSBwcm9jIHsKICAgIGNudCA9IGJhci5sZW5ndGgK
ICAgICRjdXJidWZbMV0gPSAiI3twdWxsID8gJ1VwZGF0aW5nJyA6ICdJbnN0YWxsaW5nJ30gcGx1
Z2lucyAoI3tjbnR9LyN7dG90fSkiCiAgICAkY3VyYnVmWzJdID0gJ1snICsgYmFyLmxqdXN0KHRv
dCkgKyAnXScKICAgIFZJTTo6Y29tbWFuZCgnbm9ybWFsISAyRycpCiAgICBWSU06OmNvbW1hbmQo
J3JlZHJhdycpCiAgfQogIHdoZXJlID0gcHJvYyB7IHxuYW1lfCAoMS4uKCRjdXJidWYubGVuZ3Ro
KSkuZmluZCB7IHxsfCAkY3VyYnVmW2xdID1+IC9eWy0reCpdICN7bmFtZX06LyB9IH0KICBsb2cg
ICA9IHByb2MgeyB8bmFtZSwgcmVzdWx0LCB0eXBlfAogICAgbXR4LnN5bmNocm9uaXplIGRvCiAg
ICAgIGluZyAgPSAhW3RydWUsIGZhbHNlXS5pbmNsdWRlPyh0eXBlKQogICAgICBiYXIgKz0gdHlw
ZSA/ICc9JyA6ICd4JyB1bmxlc3MgaW5nCiAgICAgIGIgPSBjYXNlIHR5cGUKICAgICAgICAgIHdo
ZW4gOmluc3RhbGwgIHRoZW4gJysnIHdoZW4gOnVwZGF0ZSB0aGVuICcqJwogICAgICAgICAgd2hl
biB0cnVlLCBuaWwgdGhlbiAnLScgZWxzZQogICAgICAgICAgICBWSU06OmNvbW1hbmQoImNhbGwg
YWRkKHM6dXBkYXRlLmVycm9ycywgJyN7bmFtZX0nKSIpCiAgICAgICAgICAgICd4JwogICAgICAg
ICAgZW5kCiAgICAgIHJlc3VsdCA9CiAgICAgICAgaWYgdHlwZSB8fCB0eXBlLm5pbD8KICAgICAg
ICAgIFsiI3tifSAje25hbWV9OiAje3Jlc3VsdC5saW5lcy50b19hLmxhc3QgfHwgJ09LJ30iXQog
ICAgICAgIGVsc2lmIHJlc3VsdCA9fiAvXkludGVycnVwdGVkfF5UaW1lb3V0LwogICAgICAgICAg
WyIje2J9ICN7bmFtZX06ICN7cmVzdWx0fSJdCiAgICAgICAgZWxzZQogICAgICAgICAgWyIje2J9
ICN7bmFtZX0iXSArIHJlc3VsdC5saW5lcy5tYXAgeyB8bHwgIiAgICAiIDw8IGwgfQogICAgICAg
IGVuZAogICAgICBpZiBsbnVtID0gd2hlcmUuY2FsbChuYW1lKQogICAgICAgICRjdXJidWYuZGVs
ZXRlIGxudW0KICAgICAgICBsbnVtID0gNCBpZiBpbmcgJiYgbG51bSA+IG1heHkKICAgICAgZW5k
CiAgICAgIHJlc3VsdC5lYWNoX3dpdGhfaW5kZXggZG8gfGxpbmUsIG9mZnNldHwKICAgICAgICAk
Y3VyYnVmLmFwcGVuZCgobG51bSB8fCA0KSAtIDEgKyBvZmZzZXQsIGxpbmUuZ3N1YigvXGVcWy4v
LCAnJykuY2hvbXApCiAgICAgIGVuZAogICAgICBsb2doLmNhbGwKICAgIGVuZAogIH0KICBidCA9
IHByb2MgeyB8Y21kLCBuYW1lLCB0eXBlLCBjbGVhbnVwfAogICAgdHJpZWQgPSB0aW1lb3V0ID0g
MAogICAgYmVnaW4KICAgICAgdHJpZWQgKz0gMQogICAgICB0aW1lb3V0ICs9IGxpbWl0CiAgICAg
IGZkID0gbmlsCiAgICAgIGRhdGEgPSAnJwogICAgICBpZiBpc3dpbgogICAgICAgIFRpbWVvdXQ6
OnRpbWVvdXQodGltZW91dCkgZG8KICAgICAgICAgIHRtcCA9IFZJTTo6ZXZhbHVhdGUoJ3RlbXBu
YW1lKCknKQogICAgICAgICAgc3lzdGVtKCIoI3tjbWR9KSA+ICN7dG1wfSIpCiAgICAgICAgICBk
YXRhID0gRmlsZS5yZWFkKHRtcCkuY2hvbXAKICAgICAgICAgIEZpbGUudW5saW5rIHRtcCByZXNj
dWUgbmlsCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBmZCA9IElPLnBvcGVuKGNtZCku
ZXh0ZW5kKFBsdWdTdHJlYW0pCiAgICAgICAgZmlyc3RfbGluZSA9IHRydWUKICAgICAgICBsb2df
cHJvYiA9IDEuMCAvIG50aHIKICAgICAgICB3aGlsZSBsaW5lID0gVGltZW91dDo6dGltZW91dCh0
aW1lb3V0KSB7IGZkLmdldF9saW5lIH0KICAgICAgICAgIGRhdGEgPDwgbGluZQogICAgICAgICAg
bG9nLmNhbGwgbmFtZSwgbGluZS5jaG9tcCwgdHlwZSBpZiBuYW1lICYmIChmaXJzdF9saW5lIHx8
IHJhbmQgPCBsb2dfcHJvYikKICAgICAgICAgIGZpcnN0X2xpbmUgPSBmYWxzZQogICAgICAgIGVu
ZAogICAgICAgIGZkLmNsb3NlCiAgICAgIGVuZAogICAgICBbJD8gPT0gMCwgZGF0YS5jaG9tcF0K
ICAgIHJlc2N1ZSBUaW1lb3V0OjpFcnJvciwgSW50ZXJydXB0ID0+IGUKICAgICAgaWYgZmQgJiYg
IWZkLmNsb3NlZD8KICAgICAgICBraWxsYWxsIGZkLnBpZAogICAgICAgIGZkLmNsb3NlCiAgICAg
IGVuZAogICAgICBjbGVhbnVwLmNhbGwgaWYgY2xlYW51cAogICAgICBpZiBlLmlzX2E/KFRpbWVv
dXQ6OkVycm9yKSAmJiB0cmllZCA8IHRyaWVzCiAgICAgICAgMy5kb3dudG8oMSkgZG8gfGNvdW50
ZG93bnwKICAgICAgICAgIHMgPSBjb3VudGRvd24gPiAxID8gJ3MnIDogJycKICAgICAgICAgIGxv
Zy5jYWxsIG5hbWUsICJUaW1lb3V0LiBXaWxsIHJldHJ5IGluICN7Y291bnRkb3dufSBzZWNvbmQj
e3N9IC4uLiIsIHR5cGUKICAgICAgICAgIHNsZWVwIDEKICAgICAgICBlbmQKICAgICAgICBsb2cu
Y2FsbCBuYW1lLCAnUmV0cnlpbmcgLi4uJywgdHlwZQogICAgICAgIHJldHJ5CiAgICAgIGVuZAog
ICAgICBbZmFsc2UsIGUuaXNfYT8oSW50ZXJydXB0KSA/ICJJbnRlcnJ1cHRlZCEiIDogIlRpbWVv
dXQhIl0KICAgIGVuZAogIH0KICBtYWluID0gVGhyZWFkLmN1cnJlbnQKICB0aHJlYWRzID0gW10K
ICB3YXRjaGVyID0gVGhyZWFkLm5ldyB7CiAgICBpZiB2aW03CiAgICAgIHdoaWxlIFZJTTo6ZXZh
bHVhdGUoJ2dldGNoYXIoMSknKQogICAgICAgIHNsZWVwIDAuMQogICAgICBlbmQKICAgIGVsc2UK
ICAgICAgcmVxdWlyZSAnaW8vY29uc29sZScgIyA+PSBSdWJ5IDEuOQogICAgICBuaWwgdW50aWwg
SU8uY29uc29sZS5nZXRjaCA9PSAzLmNocgogICAgZW5kCiAgICBtdHguc3luY2hyb25pemUgZG8K
ICAgICAgcnVubmluZyA9IGZhbHNlCiAgICAgIHRocmVhZHMuZWFjaCB7IHx0fCB0LnJhaXNlIElu
dGVycnVwdCB9IHVubGVzcyB2aW03CiAgICBlbmQKICAgIHRocmVhZHMuZWFjaCB7IHx0fCB0Lmpv
aW4gcmVzY3VlIG5pbCB9CiAgICBtYWluLmtpbGwKICB9CiAgcmVmcmVzaCA9IFRocmVhZC5uZXcg
ewogICAgd2hpbGUgdHJ1ZQogICAgICBtdHguc3luY2hyb25pemUgZG8KICAgICAgICBicmVhayB1
bmxlc3MgcnVubmluZwogICAgICAgIFZJTTo6Y29tbWFuZCgnbm9hdXRvY21kIG5vcm1hbCEgYScp
CiAgICAgIGVuZAogICAgICBzbGVlcCAwLjIKICAgIGVuZAogIH0gaWYgVklNOjpldmFsdWF0ZSgn
czptYWNfZ3VpJykgPT0gMQoKICBjbG9uZV9vcHQgPSBWSU06OmV2YWx1YXRlKCdzOmNsb25lX29w
dCcpLmpvaW4oJyAnKQogIHByb2dyZXNzID0gVklNOjpldmFsdWF0ZSgnczpwcm9ncmVzc19vcHQo
MSknKQogIG50aHIudGltZXMgZG8KICAgIG10eC5zeW5jaHJvbml6ZSBkbwogICAgICB0aHJlYWRz
IDw8IFRocmVhZC5uZXcgewogICAgICAgIHdoaWxlIHBhaXIgPSB0YWtlMS5jYWxsCiAgICAgICAg
ICBuYW1lID0gcGFpci5maXJzdAogICAgICAgICAgZGlyLCB1cmksIHRhZyA9IHBhaXIubGFzdC52
YWx1ZXNfYXQgKiV3W2RpciB1cmkgdGFnXQogICAgICAgICAgZXhpc3RzID0gRmlsZS5kaXJlY3Rv
cnk/IGRpcgogICAgICAgICAgb2ssIHJlc3VsdCA9CiAgICAgICAgICAgIGlmIGV4aXN0cwogICAg
ICAgICAgICAgIGNoZGlyID0gIiN7Y2R9ICN7aXN3aW4gPyBkaXIgOiBlc2MoZGlyKX0iCiAgICAg
ICAgICAgICAgcmV0LCBkYXRhID0gYnQuY2FsbCAiI3tjaGRpcn0gJiYgZ2l0IHJldi1wYXJzZSAt
LWFiYnJldi1yZWYgSEVBRCAyPiYxICYmIGdpdCBjb25maWcgLWYgLmdpdC9jb25maWcgcmVtb3Rl
Lm9yaWdpbi51cmwiLCBuaWwsIG5pbCwgbmlsCiAgICAgICAgICAgICAgY3VycmVudF91cmkgPSBk
YXRhLmxpbmVzLnRvX2EubGFzdAogICAgICAgICAgICAgIGlmICFyZXQKICAgICAgICAgICAgICAg
IGlmIGRhdGEgPX4gL15JbnRlcnJ1cHRlZHxeVGltZW91dC8KICAgICAgICAgICAgICAgICAgW2Zh
bHNlLCBkYXRhXQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICBbZmFsc2Us
IFtkYXRhLmNob21wLCAiUGx1Z0NsZWFuIHJlcXVpcmVkLiJdLmpvaW4oJC8pXQogICAgICAgICAg
ICAgICAgZW5kCiAgICAgICAgICAgICAgZWxzaWYgIWNvbXBhcmVfZ2l0X3VyaShjdXJyZW50X3Vy
aSwgdXJpKQogICAgICAgICAgICAgICAgW2ZhbHNlLCBbIkludmFsaWQgVVJJOiAje2N1cnJlbnRf
dXJpfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAiRXhwZWN0ZWQ6ICAgICN7dXJpfSIsCiAg
ICAgICAgICAgICAgICAgICAgICAgICAiUGx1Z0NsZWFuIHJlcXVpcmVkLiJdLmpvaW4oJC8pXQog
ICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGlmIHB1bGwKICAgICAgICAgICAgICAg
ICAgbG9nLmNhbGwgbmFtZSwgJ1VwZGF0aW5nIC4uLicsIDp1cGRhdGUKICAgICAgICAgICAgICAg
ICAgZmV0Y2hfb3B0ID0gKHRhZyAmJiBGaWxlLmV4aXN0PyhGaWxlLmpvaW4oZGlyLCAnLmdpdC9z
aGFsbG93JykpKSA/ICctLWRlcHRoIDk5OTk5OTk5JyA6ICcnCiAgICAgICAgICAgICAgICAgIGJ0
LmNhbGwgIiN7Y2hkaXJ9ICYmIGdpdCBmZXRjaCAje2ZldGNoX29wdH0gI3twcm9ncmVzc30gMj4m
MSIsIG5hbWUsIDp1cGRhdGUsIG5pbAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAg
ICAgICBbdHJ1ZSwgc2tpcF0KICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIGVuZAog
ICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgZCA9IGVzYyBkaXIuc3ViKCVye1tcXC9dKyR9
LCAnJykKICAgICAgICAgICAgICBsb2cuY2FsbCBuYW1lLCAnSW5zdGFsbGluZyAuLi4nLCA6aW5z
dGFsbAogICAgICAgICAgICAgIGJ0LmNhbGwgImdpdCBjbG9uZSAje2Nsb25lX29wdCB1bmxlc3Mg
dGFnfSAje3Byb2dyZXNzfSAje3VyaX0gI3tkfSAyPiYxIiwgbmFtZSwgOmluc3RhbGwsIHByb2Mg
ewogICAgICAgICAgICAgICAgRmlsZVV0aWxzLnJtX3JmIGRpcgogICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgZW5kCiAgICAgICAgICBtdHguc3luY2hyb25pemUgeyBWSU06OmNvbW1hbmQoImxl
dCBzOnVwZGF0ZS5uZXdbJyN7bmFtZX0nXSA9IDEiKSB9IGlmICFleGlzdHMgJiYgb2sKICAgICAg
ICAgIGxvZy5jYWxsIG5hbWUsIHJlc3VsdCwgb2sKICAgICAgICBlbmQKICAgICAgfSBpZiBydW5u
aW5nCiAgICBlbmQKICBlbmQKICB0aHJlYWRzLmVhY2ggeyB8dHwgdC5qb2luIHJlc2N1ZSBuaWwg
fQogIGxvZ2guY2FsbAogIHJlZnJlc2gua2lsbCBpZiByZWZyZXNoCiAgd2F0Y2hlci5raWxsCkVP
RgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c2hlbGxlc2NfY21kKGFyZywgc2NyaXB0KQogIGxl
dCBlc2NhcGVkID0gc3Vic3RpdHV0ZSgnIicuYTphcmcuJyInLCAnWyZ8PD4oKUBeISJdJywgJ14m
JywgJ2cnKQogIHJldHVybiBzdWJzdGl0dXRlKGVzY2FwZWQsICclJywgKGE6c2NyaXB0ID8gJyUn
IDogJ14nKSAuICcmJywgJ2cnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c2hlbGxlc2NfcHMx
KGFyZykKICByZXR1cm4gIiciLnN1YnN0aXR1dGUoZXNjYXBlKGE6YXJnLCAnXCInKSwgIiciLCAi
JyciLCAnZycpLiInIgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c2hlbGxlc2Nfc2goYXJnKQog
IHJldHVybiAiJyIuc3Vic3RpdHV0ZShhOmFyZywgIiciLCAiJ1xcXFwnJyIsICdnJykuIiciCmVu
ZGZ1bmN0aW9uCgoiIEVzY2FwZSB0aGUgc2hlbGwgYXJndW1lbnQgYmFzZWQgb24gdGhlIHNoZWxs
LgoiIFZpbSBhbmQgTmVvdmltJ3Mgc2hlbGxlc2NhcGUoKSBhcmUgaW5zdWZmaWNpZW50LgoiIDEu
IHNoZWxsc2xhc2ggZGV0ZXJtaW5lcyB3aGV0aGVyIHRvIHVzZSBzaW5nbGUvZG91YmxlIHF1b3Rl
cy4KIiAgICBEb3VibGUtcXVvdGUgZXNjYXBpbmcgaXMgZnJhZ2lsZSBmb3IgY21kLmV4ZS4KIiAy
LiBJdCBkb2VzIG5vdCB3b3JrIGZvciBwb3dlcnNoZWxsLgoiIDMuIEl0IGRvZXMgbm90IHdvcmsg
Zm9yICpzaCBzaGVsbHMgaWYgdGhlIGNvbW1hbmQgaXMgZXhlY3V0ZWQKIiAgICB2aWEgY21kLmV4
ZSAoaWUuIGNtZC5leGUgL2Mgc2ggLWMgY29tbWFuZCBjb21tYW5kX2FyZ3MpCiIgNC4gSXQgZG9l
cyBub3Qgc3VwcG9ydCBiYXRjaGZpbGUgc3ludGF4LgoiCiIgQWNjZXB0cyBhbiBvcHRpb25hbCBk
aWN0aW9uYXJ5IHdpdGggdGhlIGZvbGxvd2luZyBrZXlzOgoiIC0gc2hlbGw6IHNhbWUgYXMgVmlt
L05lb3ZpbSAnc2hlbGwnIG9wdGlvbi4KIiAgICAgICAgICBJZiB1bnNldCwgZmFsbGJhY2sgdG8g
J2NtZC5leGUnIG9uIFdpbmRvd3Mgb3IgJ3NoJy4KIiAtIHNjcmlwdDogSWYgdHJ1dGh5IGFuZCBz
aGVsbCBpcyBjbWQuZXhlLCBlc2NhcGUgZm9yIGJhdGNoZmlsZSBzeW50YXguCmZ1bmN0aW9uISBw
bHVnI3NoZWxsZXNjYXBlKGFyZywgLi4uKQogIGlmIGE6YXJnID1+IyAnXltBLVphLXowLTlfLzou
LV1cKyQnCiAgICByZXR1cm4gYTphcmcKICBlbmRpZgogIGxldCBvcHRzID0gYTowID4gMCAmJiB0
eXBlKGE6MSkgPT0gczpUWVBFLmRpY3QgPyBhOjEgOiB7fQogIGxldCBzaGVsbCA9IGdldChvcHRz
LCAnc2hlbGwnLCBzOmlzX3dpbiA/ICdjbWQuZXhlJyA6ICdzaCcpCiAgbGV0IHNjcmlwdCA9IGdl
dChvcHRzLCAnc2NyaXB0JywgMSkKICBpZiBzaGVsbCA9fiMgJ2NtZFwoXC5leGVcKVw/JCcKICAg
IHJldHVybiBzOnNoZWxsZXNjX2NtZChhOmFyZywgc2NyaXB0KQogIGVsc2VpZiBzOmlzX3Bvd2Vy
c2hlbGwoc2hlbGwpCiAgICByZXR1cm4gczpzaGVsbGVzY19wczEoYTphcmcpCiAgZW5kaWYKICBy
ZXR1cm4gczpzaGVsbGVzY19zaChhOmFyZykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdsb2Jf
ZGlyKHBhdGgpCiAgcmV0dXJuIG1hcChmaWx0ZXIoczpnbG9iKGE6cGF0aCwgJyoqJyksICdpc2Rp
cmVjdG9yeSh2OnZhbCknKSwgJ3M6ZGlycGF0aCh2OnZhbCknKQplbmRmdW5jdGlvbgoKZnVuY3Rp
b24hIHM6cHJvZ3Jlc3NfYmFyKGxpbmUsIGJhciwgdG90YWwpCiAgY2FsbCBzZXRsaW5lKGE6bGlu
ZSwgJ1snIC4gczpscGFkKGE6YmFyLCBhOnRvdGFsKSAuICddJykKZW5kZnVuY3Rpb24KCmZ1bmN0
aW9uISBzOmNvbXBhcmVfZ2l0X3VyaShhLCBiKQogICIgU2VlIGBnaXQgaGVscCBjbG9uZScKICAi
IGh0dHBzOi8vIFt1c2VyQF0gZ2l0aHViLmNvbVs6cG9ydF0gLyBqdW5lZ3Vubi92aW0tcGx1ZyBb
LmdpdF0KICAiICAgICAgICAgIFtnaXRAXSAgZ2l0aHViLmNvbVs6cG9ydF0gOiBqdW5lZ3Vubi92
aW0tcGx1ZyBbLmdpdF0KICAiIGZpbGU6Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyBq
dW5lZ3Vubi92aW0tcGx1ZyAgICAgICAgWy9dCiAgIiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIC8ganVuZWd1bm4vdmltLXBsdWcgICAgICAgIFsvXQogIGxldCBwYXQgPSAnXlwl
KFx3XCs6Ly9cKVw9Jy4nXCUoW15AL10qQFwpXD0nLidcKFteOi9dKlwlKDpbMC05XSpcKVw9XCkn
LidbOi9dJy4nXCguXHstfVwpJy4nXCUoXC5naXRcKVw9L1w/JCcKICBsZXQgbWEgPSBtYXRjaGxp
c3QoYTphLCBwYXQpCiAgbGV0IG1iID0gbWF0Y2hsaXN0KGE6YiwgcGF0KQogIHJldHVybiBtYVsx
OjJdID09IyBtYlsxOjJdCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpmb3JtYXRfbWVzc2FnZShi
dWxsZXQsIG5hbWUsIG1lc3NhZ2UpCiAgaWYgYTpidWxsZXQgIT0gJ3gnCiAgICByZXR1cm4gW3By
aW50ZignJXMgJXM6ICVzJywgYTpidWxsZXQsIGE6bmFtZSwgczpsYXN0bGluZShhOm1lc3NhZ2Up
KV0KICBlbHNlCiAgICBsZXQgbGluZXMgPSBtYXAoczpsaW5lcyhhOm1lc3NhZ2UpLCAnIiAgICAi
LnY6dmFsJykKICAgIHJldHVybiBleHRlbmQoW3ByaW50ZigneCAlczonLCBhOm5hbWUpXSwgbGlu
ZXMpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOndpdGhfY2QoY21kLCBkaXIsIC4u
LikKICBsZXQgc2NyaXB0ID0gYTowID4gMCA/IGE6MSA6IDEKICByZXR1cm4gcHJpbnRmKCdjZCVz
ICVzICYmICVzJywgczppc193aW4gPyAnIC9kJyA6ICcnLCBwbHVnI3NoZWxsZXNjYXBlKGE6ZGly
LCB7J3NjcmlwdCc6IHNjcmlwdH0pLCBhOmNtZCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN5
c3RlbShjbWQsIC4uLikKICBsZXQgYmF0Y2hmaWxlID0gJycKICB0cnkKICAgIGxldCBbc2gsIHNo
ZWxsY21kZmxhZywgc2hyZF0gPSBzOmNoc2goMSkKICAgIGlmIHR5cGUoYTpjbWQpID09IHM6VFlQ
RS5saXN0CiAgICAgICIgTmVvdmltJ3Mgc3lzdGVtKCkgc3VwcG9ydHMgbGlzdCBhcmd1bWVudCB0
byBieXBhc3MgdGhlIHNoZWxsCiAgICAgICIgYnV0IGl0IGNhbm5vdCBzZXQgdGhlIHdvcmtpbmcg
ZGlyZWN0b3J5IGZvciB0aGUgY29tbWFuZC4KICAgICAgIiBBc3N1bWUgdGhhdCB0aGUgY29tbWFu
ZCBkb2VzIG5vdCByZWx5IG9uIHRoZSBzaGVsbC4KICAgICAgaWYgaGFzKCdudmltJykgJiYgYTow
ID09IDAKICAgICAgICByZXR1cm4gc3lzdGVtKGE6Y21kKQogICAgICBlbmRpZgogICAgICBsZXQg
Y21kID0gam9pbihtYXAoY29weShhOmNtZCksICdwbHVnI3NoZWxsZXNjYXBlKHY6dmFsLCB7InNo
ZWxsIjogJnNoZWxsLCAic2NyaXB0IjogMH0pJykpCiAgICAgIGlmIHM6aXNfcG93ZXJzaGVsbCgm
c2hlbGwpCiAgICAgICAgbGV0IGNtZCA9ICcmICcgLiBjbWQKICAgICAgZW5kaWYKICAgIGVsc2UK
ICAgICAgbGV0IGNtZCA9IGE6Y21kCiAgICBlbmRpZgogICAgaWYgYTowID4gMAogICAgICBsZXQg
Y21kID0gczp3aXRoX2NkKGNtZCwgYToxLCB0eXBlKGE6Y21kKSAhPSBzOlRZUEUubGlzdCkKICAg
IGVuZGlmCiAgICBpZiBzOmlzX3dpbiAmJiB0eXBlKGE6Y21kKSAhPSBzOlRZUEUubGlzdAogICAg
ICBsZXQgW2JhdGNoZmlsZSwgY21kXSA9IHM6YmF0Y2hmaWxlKGNtZCkKICAgIGVuZGlmCiAgICBy
ZXR1cm4gc3lzdGVtKGNtZCkKICBmaW5hbGx5CiAgICBsZXQgWyZzaGVsbCwgJnNoZWxsY21kZmxh
ZywgJnNoZWxscmVkaXJdID0gW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdCiAgICBpZiBzOmlzX3dp
biAmJiBmaWxlcmVhZGFibGUoYmF0Y2hmaWxlKQogICAgICBjYWxsIGRlbGV0ZShiYXRjaGZpbGUp
CiAgICBlbmRpZgogIGVuZHRyeQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c3lzdGVtX2Nob21w
KC4uLikKICBsZXQgcmV0ID0gY2FsbCgnczpzeXN0ZW0nLCBhOjAwMCkKICByZXR1cm4gdjpzaGVs
bF9lcnJvciA/ICcnIDogc3Vic3RpdHV0ZShyZXQsICdcbiQnLCAnJywgJycpCmVuZGZ1bmN0aW9u
CgpmdW5jdGlvbiEgczpnaXRfdmFsaWRhdGUoc3BlYywgY2hlY2tfYnJhbmNoKQogIGxldCBlcnIg
PSAnJwogIGlmIGlzZGlyZWN0b3J5KGE6c3BlYy5kaXIpCiAgICBsZXQgcmVzdWx0ID0gW3M6Z2l0
X2xvY2FsX2JyYW5jaChhOnNwZWMuZGlyKSwgczpnaXRfb3JpZ2luX3VybChhOnNwZWMuZGlyKV0K
ICAgIGxldCByZW1vdGUgPSByZXN1bHRbLTFdCiAgICBpZiBlbXB0eShyZW1vdGUpCiAgICAgIGxl
dCBlcnIgPSBqb2luKFtyZW1vdGUsICdQbHVnQ2xlYW4gcmVxdWlyZWQuJ10sICJcbiIpCiAgICBl
bHNlaWYgIXM6Y29tcGFyZV9naXRfdXJpKHJlbW90ZSwgYTpzcGVjLnVyaSkKICAgICAgbGV0IGVy
ciA9IGpvaW4oWydJbnZhbGlkIFVSSTogJy5yZW1vdGUsCiAgICAgICAgICAgICAgICAgICAgXCAn
RXhwZWN0ZWQ6ICAgICcuYTpzcGVjLnVyaSwKICAgICAgICAgICAgICAgICAgICBcICdQbHVnQ2xl
YW4gcmVxdWlyZWQuJ10sICJcbiIpCiAgICBlbHNlaWYgYTpjaGVja19icmFuY2ggJiYgaGFzX2tl
eShhOnNwZWMsICdjb21taXQnKQogICAgICBsZXQgc2hhID0gczpnaXRfcmV2aXNpb24oYTpzcGVj
LmRpcikKICAgICAgaWYgZW1wdHkoc2hhKQogICAgICAgIGxldCBlcnIgPSBqb2luKGFkZChyZXN1
bHQsICdQbHVnQ2xlYW4gcmVxdWlyZWQuJyksICJcbiIpCiAgICAgIGVsc2VpZiAhczpoYXNoX21h
dGNoKHNoYSwgYTpzcGVjLmNvbW1pdCkKICAgICAgICBsZXQgZXJyID0gam9pbihbcHJpbnRmKCdJ
bnZhbGlkIEhFQUQgKGV4cGVjdGVkOiAlcywgYWN0dWFsOiAlcyknLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBcIGE6c3BlYy5jb21taXRbOjZdLCBzaGFbOjZdKSwKICAgICAgICAgICAg
ICAgICAgICAgIFwgJ1BsdWdVcGRhdGUgcmVxdWlyZWQuJ10sICJcbiIpCiAgICAgIGVuZGlmCiAg
ICBlbHNlaWYgYTpjaGVja19icmFuY2gKICAgICAgbGV0IGN1cnJlbnRfYnJhbmNoID0gcmVzdWx0
WzBdCiAgICAgICIgQ2hlY2sgdGFnCiAgICAgIGxldCBvcmlnaW5fYnJhbmNoID0gczpnaXRfb3Jp
Z2luX2JyYW5jaChhOnNwZWMpCiAgICAgIGlmIGhhc19rZXkoYTpzcGVjLCAndGFnJykKICAgICAg
ICBsZXQgdGFnID0gczpzeXN0ZW1fY2hvbXAoJ2dpdCBkZXNjcmliZSAtLWV4YWN0LW1hdGNoIC0t
dGFncyBIRUFEIDI+JjEnLCBhOnNwZWMuZGlyKQogICAgICAgIGlmIGE6c3BlYy50YWcgIT0jIHRh
ZyAmJiBhOnNwZWMudGFnICF+ICdcKicKICAgICAgICAgIGxldCBlcnIgPSBwcmludGYoJ0ludmFs
aWQgdGFnOiAlcyAoZXhwZWN0ZWQ6ICVzKS4gVHJ5IFBsdWdVcGRhdGUuJywKICAgICAgICAgICAg
ICAgIFwgKGVtcHR5KHRhZykgPyAnTi9BJyA6IHRhZyksIGE6c3BlYy50YWcpCiAgICAgICAgZW5k
aWYKICAgICAgIiBDaGVjayBicmFuY2gKICAgICAgZWxzZWlmIG9yaWdpbl9icmFuY2ggIT0jIGN1
cnJlbnRfYnJhbmNoCiAgICAgICAgbGV0IGVyciA9IHByaW50ZignSW52YWxpZCBicmFuY2g6ICVz
IChleHBlY3RlZDogJXMpLiBUcnkgUGx1Z1VwZGF0ZS4nLAogICAgICAgICAgICAgIFwgY3VycmVu
dF9icmFuY2gsIG9yaWdpbl9icmFuY2gpCiAgICAgIGVuZGlmCiAgICAgIGlmIGVtcHR5KGVycikK
ICAgICAgICBsZXQgW2FoZWFkLCBiZWhpbmRdID0gc3BsaXQoczpsYXN0bGluZShzOnN5c3RlbShb
CiAgICAgICAgXCAnZ2l0JywgJ3Jldi1saXN0JywgJy0tY291bnQnLCAnLS1sZWZ0LXJpZ2h0JywK
ICAgICAgICBcIHByaW50ZignSEVBRC4uLm9yaWdpbi8lcycsIG9yaWdpbl9icmFuY2gpCiAgICAg
ICAgXCBdLCBhOnNwZWMuZGlyKSksICdcdCcpCiAgICAgICAgaWYgIXY6c2hlbGxfZXJyb3IgJiYg
YWhlYWQKICAgICAgICAgIGlmIGJlaGluZAogICAgICAgICAgICAiIE9ubHkgbWVudGlvbiBQbHVn
Q2xlYW4gaWYgZGl2ZXJnZWQsIG90aGVyd2lzZSBpdCdzIGxpa2VseSB0byBiZQogICAgICAgICAg
ICAiIHB1c2hhYmxlIChhbmQgcHJvYmFibHkgbm90IHRoYXQgbWVzc2VkIHVwKS4KICAgICAgICAg
ICAgbGV0IGVyciA9IHByaW50ZigKICAgICAgICAgICAgICAgICAgXCAiRGl2ZXJnZWQgZnJvbSBv
cmlnaW4vJXMgKCVkIGNvbW1pdChzKSBhaGVhZCBhbmQgJWQgY29tbWl0KHMpIGJlaGluZCFcbiIK
ICAgICAgICAgICAgICAgICAgXCAuJ0JhY2t1cCBsb2NhbCBjaGFuZ2VzIGFuZCBydW4gUGx1Z0Ns
ZWFuIGFuZCBQbHVnVXBkYXRlIHRvIHJlaW5zdGFsbCBpdC4nLCBvcmlnaW5fYnJhbmNoLCBhaGVh
ZCwgYmVoaW5kKQogICAgICAgICAgZWxzZQogICAgICAgICAgICBsZXQgZXJyID0gcHJpbnRmKCJB
aGVhZCBvZiBvcmlnaW4vJXMgYnkgJWQgY29tbWl0KHMpLlxuIgogICAgICAgICAgICAgICAgICBc
IC4nQ2Fubm90IHVwZGF0ZSB1bnRpbCBsb2NhbCBjaGFuZ2VzIGFyZSBwdXNoZWQuJywKICAgICAg
ICAgICAgICAgICAgXCBvcmlnaW5fYnJhbmNoLCBhaGVhZCkKICAgICAgICAgIGVuZGlmCiAgICAg
ICAgZW5kaWYKICAgICAgZW5kaWYKICAgIGVuZGlmCiAgZWxzZQogICAgbGV0IGVyciA9ICdOb3Qg
Zm91bmQnCiAgZW5kaWYKICByZXR1cm4gW2VyciwgZXJyID1+IyAnUGx1Z0NsZWFuJ10KZW5kZnVu
Y3Rpb24KCmZ1bmN0aW9uISBzOnJtX3JmKGRpcikKICBpZiBpc2RpcmVjdG9yeShhOmRpcikKICAg
IHJldHVybiBzOnN5c3RlbShzOmlzX3dpbgogICAgXCA/ICdybWRpciAvUyAvUSAnLnBsdWcjc2hl
bGxlc2NhcGUoYTpkaXIpCiAgICBcIDogWydybScsICctcmYnLCBhOmRpcl0pCiAgZW5kaWYKZW5k
ZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNsZWFuKGZvcmNlKQogIGNhbGwgczpwcmVwYXJlKCkKICBj
YWxsIGFwcGVuZCgwLCAnU2VhcmNoaW5nIGZvciBpbnZhbGlkIHBsdWdpbnMgaW4gJy5nOnBsdWdf
aG9tZSkKICBjYWxsIGFwcGVuZCgxLCAnJykKCiAgIiBMaXN0IG9mIHZhbGlkIGRpcmVjdG9yaWVz
CiAgbGV0IGRpcnMgPSBbXQogIGxldCBlcnJzID0ge30KICBsZXQgW2NudCwgdG90YWxdID0gWzAs
IGxlbihnOnBsdWdzKV0KICBmb3IgW25hbWUsIHNwZWNdIGluIGl0ZW1zKGc6cGx1Z3MpCiAgICBp
ZiAhczppc19tYW5hZ2VkKG5hbWUpCiAgICAgIGNhbGwgYWRkKGRpcnMsIHNwZWMuZGlyKQogICAg
ZWxzZQogICAgICBsZXQgW2VyciwgY2xlYW5dID0gczpnaXRfdmFsaWRhdGUoc3BlYywgMSkKICAg
ICAgaWYgY2xlYW4KICAgICAgICBsZXQgZXJyc1tzcGVjLmRpcl0gPSBzOmxpbmVzKGVycilbMF0K
ICAgICAgZWxzZQogICAgICAgIGNhbGwgYWRkKGRpcnMsIHNwZWMuZGlyKQogICAgICBlbmRpZgog
ICAgZW5kaWYKICAgIGxldCBjbnQgKz0gMQogICAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCByZXBl
YXQoJz0nLCBjbnQpLCB0b3RhbCkKICAgIG5vcm1hbCEgMkcKICAgIHJlZHJhdwogIGVuZGZvcgoK
ICBsZXQgYWxsb3dlZCA9IHt9CiAgZm9yIGRpciBpbiBkaXJzCiAgICBsZXQgYWxsb3dlZFtzOmRp
cnBhdGgoczpwbHVnX2ZuYW1lbW9kaWZ5KGRpciwgJzpoOmgnKSldID0gMQogICAgbGV0IGFsbG93
ZWRbZGlyXSA9IDEKICAgIGZvciBjaGlsZCBpbiBzOmdsb2JfZGlyKGRpcikKICAgICAgbGV0IGFs
bG93ZWRbY2hpbGRdID0gMQogICAgZW5kZm9yCiAgZW5kZm9yCgogIGxldCB0b2RvID0gW10KICBs
ZXQgZm91bmQgPSBzb3J0KHM6Z2xvYl9kaXIoZzpwbHVnX2hvbWUpKQogIHdoaWxlICFlbXB0eShm
b3VuZCkKICAgIGxldCBmID0gcmVtb3ZlKGZvdW5kLCAwKQogICAgaWYgIWhhc19rZXkoYWxsb3dl
ZCwgZikgJiYgaXNkaXJlY3RvcnkoZikKICAgICAgY2FsbCBhZGQodG9kbywgZikKICAgICAgY2Fs
bCBhcHBlbmQobGluZSgnJCcpLCAnLSAnIC4gZikKICAgICAgaWYgaGFzX2tleShlcnJzLCBmKQog
ICAgICAgIGNhbGwgYXBwZW5kKGxpbmUoJyQnKSwgJyAgICAnIC4gZXJyc1tmXSkKICAgICAgZW5k
aWYKICAgICAgbGV0IGZvdW5kID0gZmlsdGVyKGZvdW5kLCAnc3RyaWR4KHY6dmFsLCBmKSAhPSAw
JykKICAgIGVuZAogIGVuZHdoaWxlCgogIDQKICByZWRyYXcKICBpZiBlbXB0eSh0b2RvKQogICAg
Y2FsbCBhcHBlbmQobGluZSgnJCcpLCAnQWxyZWFkeSBjbGVhbi4nKQogIGVsc2UKICAgIGxldCBz
OmNsZWFuX2NvdW50ID0gMAogICAgY2FsbCBhcHBlbmQoMywgWydEaXJlY3RvcmllcyB0byBkZWxl
dGU6JywgJyddKQogICAgcmVkcmF3IQogICAgaWYgYTpmb3JjZSB8fCBzOmFza19ub19pbnRlcnJ1
cHQoJ0RlbGV0ZSBhbGwgZGlyZWN0b3JpZXM/JykKICAgICAgY2FsbCBzOmRlbGV0ZShbNiwgbGlu
ZSgnJCcpXSwgMSkKICAgIGVsc2UKICAgICAgY2FsbCBzZXRsaW5lKDQsICdDYW5jZWxsZWQuJykK
ICAgICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gZCA6c2V0IG9wZnVuYz08c2lkPmRlbGV0
ZV9vcDxjcj5nQAogICAgICBubWFwICAgICA8c2lsZW50PiA8YnVmZmVyPiBkZCBkXwogICAgICB4
bm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBkIDo8Yy11PmNhbGwgPHNpZD5kZWxldGVfb3Aodmlz
dWFsbW9kZSgpLCAxKTxjcj4KICAgICAgZWNobyAnRGVsZXRlIHRoZSBsaW5lcyAoZHttb3Rpb259
KSB0byBkZWxldGUgdGhlIGNvcnJlc3BvbmRpbmcgZGlyZWN0b3JpZXMnCiAgICBlbmRpZgogIGVu
ZGlmCiAgNAogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6
ZGVsZXRlX29wKHR5cGUsIC4uLikKICBjYWxsIHM6ZGVsZXRlKGE6MCA/IFtsaW5lKCInPCIpLCBs
aW5lKCInPiIpXSA6IFtsaW5lKCInWyIpLCBsaW5lKCInXSIpXSwgMCkKZW5kZnVuY3Rpb24KCmZ1
bmN0aW9uISBzOmRlbGV0ZShyYW5nZSwgZm9yY2UpCiAgbGV0IFtsMSwgbDJdID0gYTpyYW5nZQog
IGxldCBmb3JjZSA9IGE6Zm9yY2UKICBsZXQgZXJyX2NvdW50ID0gMAogIHdoaWxlIGwxIDw9IGwy
CiAgICBsZXQgbGluZSA9IGdldGxpbmUobDEpCiAgICBpZiBsaW5lID1+ICdeLSAnICYmIGlzZGly
ZWN0b3J5KGxpbmVbMjpdKQogICAgICBleGVjdXRlIGwxCiAgICAgIHJlZHJhdyEKICAgICAgbGV0
IGFuc3dlciA9IGZvcmNlID8gMSA6IHM6YXNrKCdEZWxldGUgJy5saW5lWzI6XS4nPycsIDEpCiAg
ICAgIGxldCBmb3JjZSA9IGZvcmNlIHx8IGFuc3dlciA+IDEKICAgICAgaWYgYW5zd2VyCiAgICAg
ICAgbGV0IGVyciA9IHM6cm1fcmYobGluZVsyOl0pCiAgICAgICAgc2V0bG9jYWwgbW9kaWZpYWJs
ZQogICAgICAgIGlmIGVtcHR5KGVycikKICAgICAgICAgIGNhbGwgc2V0bGluZShsMSwgJ34nLmxp
bmVbMTpdKQogICAgICAgICAgbGV0IHM6Y2xlYW5fY291bnQgKz0gMQogICAgICAgIGVsc2UKICAg
ICAgICAgIGRlbGV0ZSBfCiAgICAgICAgICBjYWxsIGFwcGVuZChsMSAtIDEsIHM6Zm9ybWF0X21l
c3NhZ2UoJ3gnLCBsaW5lWzE6XSwgZXJyKSkKICAgICAgICAgIGxldCBsMiArPSBsZW4oczpsaW5l
cyhlcnIpKQogICAgICAgICAgbGV0IGVycl9jb3VudCArPSAxCiAgICAgICAgZW5kaWYKICAgICAg
ICBsZXQgbXNnID0gcHJpbnRmKCdSZW1vdmVkICVkIGRpcmVjdG9yaWVzLicsIHM6Y2xlYW5fY291
bnQpCiAgICAgICAgaWYgZXJyX2NvdW50ID4gMAogICAgICAgICAgbGV0IG1zZyAuPSBwcmludGYo
JyBGYWlsZWQgdG8gcmVtb3ZlICVkIGRpcmVjdG9yaWVzLicsIGVycl9jb3VudCkKICAgICAgICBl
bmRpZgogICAgICAgIGNhbGwgc2V0bGluZSg0LCBtc2cpCiAgICAgICAgc2V0bG9jYWwgbm9tb2Rp
ZmlhYmxlCiAgICAgIGVuZGlmCiAgICBlbmRpZgogICAgbGV0IGwxICs9IDEKICBlbmR3aGlsZQpl
bmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBncmFkZSgpCiAgZWNobyAnRG93bmxvYWRpbmcgdGhl
IGxhdGVzdCB2ZXJzaW9uIG9mIHZpbS1wbHVnJwogIHJlZHJhdwogIGxldCB0bXAgPSBzOnBsdWdf
dGVtcG5hbWUoKQogIGxldCBuZXcgPSB0bXAgLiAnL3BsdWcudmltJwoKICB0cnkKICAgIGxldCBv
dXQgPSBzOnN5c3RlbShbJ2dpdCcsICdjbG9uZScsICctLWRlcHRoJywgJzEnLCBzOnBsdWdfc3Jj
LCB0bXBdKQogICAgaWYgdjpzaGVsbF9lcnJvcgogICAgICByZXR1cm4gczplcnIoJ0Vycm9yIHVw
Z3JhZGluZyB2aW0tcGx1ZzogJy4gb3V0KQogICAgZW5kaWYKCiAgICBpZiByZWFkZmlsZShzOm1l
KSA9PSMgcmVhZGZpbGUobmV3KQogICAgICBlY2hvICd2aW0tcGx1ZyBpcyBhbHJlYWR5IHVwLXRv
LWRhdGUnCiAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgIGNhbGwgcmVuYW1lKHM6bWUsIHM6
bWUgLiAnLm9sZCcpCiAgICAgIGNhbGwgcmVuYW1lKG5ldywgczptZSkKICAgICAgdW5sZXQgZzps
b2FkZWRfcGx1ZwogICAgICBlY2hvICd2aW0tcGx1ZyBoYXMgYmVlbiB1cGdyYWRlZCcKICAgICAg
cmV0dXJuIDEKICAgIGVuZGlmCiAgZmluYWxseQogICAgc2lsZW50ISBjYWxsIHM6cm1fcmYodG1w
KQogIGVuZHRyeQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBncmFkZV9zcGVjcygpCiAgZm9y
IHNwZWMgaW4gdmFsdWVzKGc6cGx1Z3MpCiAgICBsZXQgc3BlYy5mcm96ZW4gPSBnZXQoc3BlYywg
J2Zyb3plbicsIDApCiAgZW5kZm9yCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzdGF0dXMoKQog
IGNhbGwgczpwcmVwYXJlKCkKICBjYWxsIGFwcGVuZCgwLCAnQ2hlY2tpbmcgcGx1Z2lucycpCiAg
Y2FsbCBhcHBlbmQoMSwgJycpCgogIGxldCBlY250ID0gMAogIGxldCB1bmxvYWRlZCA9IDAKICBs
ZXQgW2NudCwgdG90YWxdID0gWzAsIGxlbihnOnBsdWdzKV0KICBmb3IgW25hbWUsIHNwZWNdIGlu
IGl0ZW1zKGc6cGx1Z3MpCiAgICBsZXQgaXNfZGlyID0gaXNkaXJlY3Rvcnkoc3BlYy5kaXIpCiAg
ICBpZiBoYXNfa2V5KHNwZWMsICd1cmknKQogICAgICBpZiBpc19kaXIKICAgICAgICBsZXQgW2Vy
ciwgX10gPSBzOmdpdF92YWxpZGF0ZShzcGVjLCAxKQogICAgICAgIGxldCBbdmFsaWQsIG1zZ10g
PSBbZW1wdHkoZXJyKSwgZW1wdHkoZXJyKSA/ICdPSycgOiBlcnJdCiAgICAgIGVsc2UKICAgICAg
ICBsZXQgW3ZhbGlkLCBtc2ddID0gWzAsICdOb3QgZm91bmQuIFRyeSBQbHVnSW5zdGFsbC4nXQog
ICAgICBlbmRpZgogICAgZWxzZQogICAgICBpZiBpc19kaXIKICAgICAgICBsZXQgW3ZhbGlkLCBt
c2ddID0gWzEsICdPSyddCiAgICAgIGVsc2UKICAgICAgICBsZXQgW3ZhbGlkLCBtc2ddID0gWzAs
ICdOb3QgZm91bmQuJ10KICAgICAgZW5kaWYKICAgIGVuZGlmCiAgICBsZXQgY250ICs9IDEKICAg
IGxldCBlY250ICs9ICF2YWxpZAogICAgIiBgczpsb2FkZWRgIGVudHJ5IGNhbiBiZSBtaXNzaW5n
IGlmIFBsdWdVcGdyYWRlZAogICAgaWYgaXNfZGlyICYmIGdldChzOmxvYWRlZCwgbmFtZSwgLTEp
ID09IDAKICAgICAgbGV0IHVubG9hZGVkID0gMQogICAgICBsZXQgbXNnIC49ICcgKG5vdCBsb2Fk
ZWQpJwogICAgZW5kaWYKICAgIGNhbGwgczpwcm9ncmVzc19iYXIoMiwgcmVwZWF0KCc9JywgY250
KSwgdG90YWwpCiAgICBjYWxsIGFwcGVuZCgzLCBzOmZvcm1hdF9tZXNzYWdlKHZhbGlkID8gJy0n
IDogJ3gnLCBuYW1lLCBtc2cpKQogICAgbm9ybWFsISAyRwogICAgcmVkcmF3CiAgZW5kZm9yCiAg
Y2FsbCBzZXRsaW5lKDEsICdGaW5pc2hlZC4gJy5lY250LicgZXJyb3IocykuJykKICBub3JtYWwh
IGdnCiAgc2V0bG9jYWwgbm9tb2RpZmlhYmxlCiAgaWYgdW5sb2FkZWQKICAgIGVjaG8gIlByZXNz
ICdMJyBvbiBlYWNoIGxpbmUgdG8gbG9hZCBwbHVnaW4sIG9yICdVJyB0byB1cGRhdGUiCiAgICBu
bm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBMIDpjYWxsIDxTSUQ+c3RhdHVzX2xvYWQobGluZSgn
LicpKTxjcj4KICAgIHhub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IEwgOmNhbGwgPFNJRD5zdGF0
dXNfbG9hZChsaW5lKCcuJykpPGNyPgogIGVuZAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZXh0
cmFjdF9uYW1lKHN0ciwgcHJlZml4LCBzdWZmaXgpCiAgcmV0dXJuIG1hdGNoc3RyKGE6c3RyLCAn
XicuYTpwcmVmaXguJyBcenNbXjpdXCtcemU6LionLmE6c3VmZml4LickJykKZW5kZnVuY3Rpb24K
CmZ1bmN0aW9uISBzOnN0YXR1c19sb2FkKGxudW0pCiAgbGV0IGxpbmUgPSBnZXRsaW5lKGE6bG51
bSkKICBsZXQgbmFtZSA9IHM6ZXh0cmFjdF9uYW1lKGxpbmUsICctJywgJyhub3QgbG9hZGVkKScp
CiAgaWYgIWVtcHR5KG5hbWUpCiAgICBjYWxsIHBsdWcjbG9hZChuYW1lKQogICAgc2V0bG9jYWwg
bW9kaWZpYWJsZQogICAgY2FsbCBzZXRsaW5lKGE6bG51bSwgc3Vic3RpdHV0ZShsaW5lLCAnIChu
b3QgbG9hZGVkKSQnLCAnJywgJycpKQogICAgc2V0bG9jYWwgbm9tb2RpZmlhYmxlCiAgZW5kaWYK
ZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN0YXR1c191cGRhdGUoKSByYW5nZQogIGxldCBsaW5l
cyA9IGdldGxpbmUoYTpmaXJzdGxpbmUsIGE6bGFzdGxpbmUpCiAgbGV0IG5hbWVzID0gZmlsdGVy
KG1hcChsaW5lcywgJ3M6ZXh0cmFjdF9uYW1lKHY6dmFsLCAiW3gtXSIsICIiKScpLCAnIWVtcHR5
KHY6dmFsKScpCiAgaWYgIWVtcHR5KG5hbWVzKQogICAgZWNobwogICAgZXhlY3V0ZSAnUGx1Z1Vw
ZGF0ZScgam9pbihuYW1lcykKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aXNfcHJl
dmlld193aW5kb3dfb3BlbigpCiAgc2lsZW50ISB3aW5jbWQgUAogIGlmICZwcmV2aWV3d2luZG93
CiAgICB3aW5jbWQgcAogICAgcmV0dXJuIDEKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24h
IHM6ZmluZF9uYW1lKGxudW0pCiAgZm9yIGxudW0gaW4gcmV2ZXJzZShyYW5nZSgxLCBhOmxudW0p
KQogICAgbGV0IGxpbmUgPSBnZXRsaW5lKGxudW0pCiAgICBpZiBlbXB0eShsaW5lKQogICAgICBy
ZXR1cm4gJycKICAgIGVuZGlmCiAgICBsZXQgbmFtZSA9IHM6ZXh0cmFjdF9uYW1lKGxpbmUsICct
JywgJycpCiAgICBpZiAhZW1wdHkobmFtZSkKICAgICAgcmV0dXJuIG5hbWUKICAgIGVuZGlmCiAg
ZW5kZm9yCiAgcmV0dXJuICcnCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwcmV2aWV3X2NvbW1p
dCgpCiAgaWYgYjpwbHVnX3ByZXZpZXcgPCAwCiAgICBsZXQgYjpwbHVnX3ByZXZpZXcgPSAhczpp
c19wcmV2aWV3X3dpbmRvd19vcGVuKCkKICBlbmRpZgoKICBsZXQgc2hhID0gbWF0Y2hzdHIoZ2V0
bGluZSgnLicpLCAnXiAgXFgqXHpzWzAtOWEtZl1cezcsOX0nKQogIGlmIGVtcHR5KHNoYSkKICAg
IHJldHVybgogIGVuZGlmCgogIGxldCBuYW1lID0gczpmaW5kX25hbWUobGluZSgnLicpKQogIGlm
IGVtcHR5KG5hbWUpIHx8ICFoYXNfa2V5KGc6cGx1Z3MsIG5hbWUpIHx8ICFpc2RpcmVjdG9yeShn
OnBsdWdzW25hbWVdLmRpcikKICAgIHJldHVybgogIGVuZGlmCgogIGlmIGV4aXN0cygnZzpwbHVn
X3B3aW5kb3cnKSAmJiAhczppc19wcmV2aWV3X3dpbmRvd19vcGVuKCkKICAgIGV4ZWN1dGUgZzpw
bHVnX3B3aW5kb3cKICAgIGV4ZWN1dGUgJ2UnIHNoYQogIGVsc2UKICAgIGV4ZWN1dGUgJ3BlZGl0
JyBzaGEKICAgIHdpbmNtZCBQCiAgZW5kaWYKICBzZXRsb2NhbCBwcmV2aWV3d2luZG93IGZpbGV0
eXBlPWdpdCBidWZ0eXBlPW5vZmlsZSBub2J1Zmxpc3RlZCBtb2RpZmlhYmxlCiAgbGV0IGJhdGNo
ZmlsZSA9ICcnCiAgdHJ5CiAgICBsZXQgW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdID0gczpjaHNo
KDEpCiAgICBsZXQgY21kID0gJ2NkICcucGx1ZyNzaGVsbGVzY2FwZShnOnBsdWdzW25hbWVdLmRp
cikuJyAmJiBnaXQgc2hvdyAtLW5vLWNvbG9yIC0tcHJldHR5PW1lZGl1bSAnLnNoYQogICAgaWYg
czppc193aW4KICAgICAgbGV0IFtiYXRjaGZpbGUsIGNtZF0gPSBzOmJhdGNoZmlsZShjbWQpCiAg
ICBlbmRpZgogICAgZXhlY3V0ZSAnc2lsZW50ICUhJyBjbWQKICBmaW5hbGx5CiAgICBsZXQgWyZz
aGVsbCwgJnNoZWxsY21kZmxhZywgJnNoZWxscmVkaXJdID0gW3NoLCBzaGVsbGNtZGZsYWcsIHNo
cmRdCiAgICBpZiBzOmlzX3dpbiAmJiBmaWxlcmVhZGFibGUoYmF0Y2hmaWxlKQogICAgICBjYWxs
IGRlbGV0ZShiYXRjaGZpbGUpCiAgICBlbmRpZgogIGVuZHRyeQogIHNldGxvY2FsIG5vbW9kaWZp
YWJsZQogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IHEgOnE8Y3I+CiAgd2luY21kIHAKZW5k
ZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNlY3Rpb24oZmxhZ3MpCiAgY2FsbCBzZWFyY2goJ1woXlt4
LV0gXClcQDw9W146XVwrOicsIGE6ZmxhZ3MpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpmb3Jt
YXRfZ2l0X2xvZyhsaW5lKQogIGxldCBpbmRlbnQgPSAnICAnCiAgbGV0IHRva2VucyA9IHNwbGl0
KGE6bGluZSwgbnIyY2hhcigxKSkKICBpZiBsZW4odG9rZW5zKSAhPSA1CiAgICByZXR1cm4gaW5k
ZW50LnN1YnN0aXR1dGUoYTpsaW5lLCAnXHMqJCcsICcnLCAnJykKICBlbmRpZgogIGxldCBbZ3Jh
cGgsIHNoYSwgcmVmcywgc3ViamVjdCwgZGF0ZV0gPSB0b2tlbnMKICBsZXQgdGFnID0gbWF0Y2hz
dHIocmVmcywgJ3RhZzogW14sKV1cKycpCiAgbGV0IHRhZyA9IGVtcHR5KHRhZykgPyAnICcgOiAn
ICgnLnRhZy4nKSAnCiAgcmV0dXJuIHByaW50ZignJXMlcyVzJXMlcyAoJXMpJywgaW5kZW50LCBn
cmFwaCwgc2hhLCB0YWcsIHN1YmplY3QsIGRhdGUpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczph
cHBlbmRfdWwobG51bSwgdGV4dCkKICBjYWxsIGFwcGVuZChhOmxudW0sIFsnJywgYTp0ZXh0LCBy
ZXBlYXQoJy0nLCBsZW4oYTp0ZXh0KSldKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZGlmZigp
CiAgY2FsbCBzOnByZXBhcmUoKQogIGNhbGwgYXBwZW5kKDAsIFsnQ29sbGVjdGluZyBjaGFuZ2Vz
IC4uLicsICcnXSkKICBsZXQgY250cyA9IFswLCAwXQogIGxldCBiYXIgPSAnJwogIGxldCB0b3Rh
bCA9IGZpbHRlcihjb3B5KGc6cGx1Z3MpLCAnczppc19tYW5hZ2VkKHY6a2V5KSAmJiBpc2RpcmVj
dG9yeSh2OnZhbC5kaXIpJykKICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIGJhciwgbGVuKHRvdGFs
KSkKICBmb3Igb3JpZ2luIGluIFsxLCAwXQogICAgbGV0IHBsdWdzID0gcmV2ZXJzZShzb3J0KGl0
ZW1zKGZpbHRlcihjb3B5KHRvdGFsKSwgKG9yaWdpbiA/ICcnIDogJyEnKS4nKGhhc19rZXkodjp2
YWwsICJjb21taXQiKSB8fCBoYXNfa2V5KHY6dmFsLCAidGFnIikpJykpKSkKICAgIGlmIGVtcHR5
KHBsdWdzKQogICAgICBjb250aW51ZQogICAgZW5kaWYKICAgIGNhbGwgczphcHBlbmRfdWwoMiwg
b3JpZ2luID8gJ1BlbmRpbmcgdXBkYXRlczonIDogJ0xhc3QgdXBkYXRlOicpCiAgICBmb3IgW2ss
IHZdIGluIHBsdWdzCiAgICAgIGxldCBicmFuY2ggPSBzOmdpdF9vcmlnaW5fYnJhbmNoKHYpCiAg
ICAgIGlmIGxlbihicmFuY2gpCiAgICAgICAgbGV0IHJhbmdlID0gb3JpZ2luID8gJy4ub3JpZ2lu
LycuYnJhbmNoIDogJ0hFQURAezF9Li4nCiAgICAgICAgbGV0IGNtZCA9IFsnZ2l0JywgJ2xvZycs
ICctLWdyYXBoJywgJy0tY29sb3I9bmV2ZXInXQogICAgICAgIGlmIHM6Z2l0X3ZlcnNpb25fcmVx
dWlyZW1lbnQoMiwgMTAsIDApCiAgICAgICAgICBjYWxsIGFkZChjbWQsICctLW5vLXNob3ctc2ln
bmF0dXJlJykKICAgICAgICBlbmRpZgogICAgICAgIGNhbGwgZXh0ZW5kKGNtZCwgWyctLXByZXR0
eT1mb3JtYXQ6JXgwMSVoJXgwMSVkJXgwMSVzJXgwMSVjcicsIHJhbmdlXSkKICAgICAgICBpZiBo
YXNfa2V5KHYsICdydHAnKQogICAgICAgICAgY2FsbCBleHRlbmQoY21kLCBbJy0tJywgdi5ydHBd
KQogICAgICAgIGVuZGlmCiAgICAgICAgbGV0IGRpZmYgPSBzOnN5c3RlbV9jaG9tcChjbWQsIHYu
ZGlyKQogICAgICAgIGlmICFlbXB0eShkaWZmKQogICAgICAgICAgbGV0IHJlZiA9IGhhc19rZXko
diwgJ3RhZycpID8gKCcgKHRhZzogJy52LnRhZy4nKScpIDogaGFzX2tleSh2LCAnY29tbWl0Jykg
PyAoJyAnLnYuY29tbWl0KSA6ICcnCiAgICAgICAgICBjYWxsIGFwcGVuZCg1LCBleHRlbmQoWycn
LCAnLSAnLmsuJzonLnJlZl0sIG1hcChzOmxpbmVzKGRpZmYpLCAnczpmb3JtYXRfZ2l0X2xvZyh2
OnZhbCknKSkpCiAgICAgICAgICBsZXQgY250c1tvcmlnaW5dICs9IDEKICAgICAgICBlbmRpZgog
ICAgICBlbmRpZgogICAgICBsZXQgYmFyIC49ICc9JwogICAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFy
KDIsIGJhciwgbGVuKHRvdGFsKSkKICAgICAgbm9ybWFsISAyRwogICAgICByZWRyYXcKICAgIGVu
ZGZvcgogICAgaWYgIWNudHNbb3JpZ2luXQogICAgICBjYWxsIGFwcGVuZCg1LCBbJycsICdOL0En
XSkKICAgIGVuZGlmCiAgZW5kZm9yCiAgY2FsbCBzZXRsaW5lKDEsIHByaW50ZignJWQgcGx1Z2lu
KHMpIHVwZGF0ZWQuJywgY250c1swXSkKICAgICAgICBcIC4gKGNudHNbMV0gPyBwcmludGYoJyAl
ZCBwbHVnaW4ocykgaGF2ZSBwZW5kaW5nIHVwZGF0ZXMuJywgY250c1sxXSkgOiAnJykpCgogIGlm
IGNudHNbMF0gfHwgY250c1sxXQogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gPHBsdWc+
KHBsdWctcHJldmlldykgOnNpbGVudCEgY2FsbCA8U0lEPnByZXZpZXdfY29tbWl0KCk8Y3I+CiAg
ICBpZiBlbXB0eShtYXBhcmcoIlw8Y3I+IiwgJ24nKSkKICAgICAgbm1hcCA8YnVmZmVyPiA8Y3I+
IDxwbHVnPihwbHVnLXByZXZpZXcpCiAgICBlbmRpZgogICAgaWYgZW1wdHkobWFwYXJnKCdvJywg
J24nKSkKICAgICAgbm1hcCA8YnVmZmVyPiBvIDxwbHVnPihwbHVnLXByZXZpZXcpCiAgICBlbmRp
ZgogIGVuZGlmCiAgaWYgY250c1swXQogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gWCA6
Y2FsbCA8U0lEPnJldmVydCgpPGNyPgogICAgZWNobyAiUHJlc3MgJ1gnIG9uIGVhY2ggYmxvY2sg
dG8gcmV2ZXJ0IHRoZSB1cGRhdGUiCiAgZW5kaWYKICBub3JtYWwhIGdnCiAgc2V0bG9jYWwgbm9t
b2RpZmlhYmxlCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZXZlcnQoKQogIGlmIHNlYXJjaCgn
XlBlbmRpbmcgdXBkYXRlcycsICdiblcnKQogICAgcmV0dXJuCiAgZW5kaWYKCiAgbGV0IG5hbWUg
PSBzOmZpbmRfbmFtZShsaW5lKCcuJykpCiAgaWYgZW1wdHkobmFtZSkgfHwgIWhhc19rZXkoZzpw
bHVncywgbmFtZSkgfHwKICAgIFwgaW5wdXQocHJpbnRmKCdSZXZlcnQgdGhlIHVwZGF0ZSBvZiAl
cz8gKHkvTikgJywgbmFtZSkpICF+PyAnXnknCiAgICByZXR1cm4KICBlbmRpZgoKICBjYWxsIHM6
c3lzdGVtKCdnaXQgcmVzZXQgLS1oYXJkIEhFQURAezF9ICYmIGdpdCBjaGVja291dCAnLnBsdWcj
c2hlbGxlc2NhcGUoZzpwbHVnc1tuYW1lXS5icmFuY2gpLicgLS0nLCBnOnBsdWdzW25hbWVdLmRp
cikKICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgbm9ybWFsISAiX2RhcAogIHNldGxvY2FsIG5vbW9k
aWZpYWJsZQogIGVjaG8gJ1JldmVydGVkJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c25hcHNo
b3QoZm9yY2UsIC4uLikgYWJvcnQKICBjYWxsIHM6cHJlcGFyZSgpCiAgc2V0ZiB2aW0KICBjYWxs
IGFwcGVuZCgwLCBbJyIgR2VuZXJhdGVkIGJ5IHZpbS1wbHVnJywKICAgICAgICAgICAgICAgIFwg
JyIgJy5zdHJmdGltZSgiJWMiKSwKICAgICAgICAgICAgICAgIFwgJyIgOnNvdXJjZSB0aGlzIGZp
bGUgaW4gdmltIHRvIHJlc3RvcmUgdGhlIHNuYXBzaG90JywKICAgICAgICAgICAgICAgIFwgJyIg
b3IgZXhlY3V0ZTogdmltIC1TIHNuYXBzaG90LnZpbScsCiAgICAgICAgICAgICAgICBcICcnLCAn
JywgJ1BsdWdVcGRhdGUhJ10pCiAgMQogIGxldCBhbmNob3IgPSBsaW5lKCckJykgLSAzCiAgbGV0
IG5hbWVzID0gc29ydChrZXlzKGZpbHRlcihjb3B5KGc6cGx1Z3MpLAogICAgICAgIFwnaGFzX2tl
eSh2OnZhbCwgInVyaSIpICYmICFoYXNfa2V5KHY6dmFsLCAiY29tbWl0IikgJiYgaXNkaXJlY3Rv
cnkodjp2YWwuZGlyKScpKSkKICBmb3IgbmFtZSBpbiByZXZlcnNlKG5hbWVzKQogICAgbGV0IHNo
YSA9IHM6Z2l0X3JldmlzaW9uKGc6cGx1Z3NbbmFtZV0uZGlyKQogICAgaWYgIWVtcHR5KHNoYSkK
ICAgICAgY2FsbCBhcHBlbmQoYW5jaG9yLCBwcmludGYoInNpbGVudCEgbGV0IGc6cGx1Z3NbJyVz
J10uY29tbWl0ID0gJyVzJyIsIG5hbWUsIHNoYSkpCiAgICAgIHJlZHJhdwogICAgZW5kaWYKICBl
bmRmb3IKCiAgaWYgYTowID4gMAogICAgbGV0IGZuID0gczpwbHVnX2V4cGFuZChhOjEpCiAgICBp
ZiBmaWxlcmVhZGFibGUoZm4pICYmICEoYTpmb3JjZSB8fCBzOmFzayhhOjEuJyBhbHJlYWR5IGV4
aXN0cy4gT3ZlcndyaXRlPycpKQogICAgICByZXR1cm4KICAgIGVuZGlmCiAgICBjYWxsIHdyaXRl
ZmlsZShnZXRsaW5lKDEsICckJyksIGZuKQogICAgZWNobyAnU2F2ZWQgYXMgJy5hOjEKICAgIHNp
bGVudCBleGVjdXRlICdlJyBzOmVzYyhmbikKICAgIHNldGYgdmltCiAgZW5kaWYKZW5kZnVuY3Rp
b24KCmZ1bmN0aW9uISBzOnNwbGl0X3J0cCgpCiAgcmV0dXJuIHNwbGl0KCZydHAsICdcXFxAPCEs
JykKZW5kZnVuY3Rpb24KCmxldCBzOmZpcnN0X3J0cCA9IHM6ZXNjcnRwKGdldChzOnNwbGl0X3J0
cCgpLCAwLCAnJykpCmxldCBzOmxhc3RfcnRwICA9IHM6ZXNjcnRwKGdldChzOnNwbGl0X3J0cCgp
LCAtMSwgJycpKQoKaWYgZXhpc3RzKCdnOnBsdWdzJykKICBsZXQgZzpwbHVnc19vcmRlciA9IGdl
dChnOiwgJ3BsdWdzX29yZGVyJywga2V5cyhnOnBsdWdzKSkKICBjYWxsIHM6dXBncmFkZV9zcGVj
cygpCiAgY2FsbCBzOmRlZmluZV9jb21tYW5kcygpCmVuZGlmCgpsZXQgJmNwbyA9IHM6Y3BvX3Nh
dmUKdW5sZXQgczpjcG9fc2F2ZQo=" | base64 -d | tee ~/.config/nvim/autoload/plug.vim

echo -n "Y2FsbCBwbHVnI2JlZ2luKCd+Ly5jb25maWcvbnZpbS9wbHVnZ2VkJykKClBsdWcgJ3Njcm9vbG9v
c2UvbmVyZHRyZWUnLCB7ICdvbic6ICAnTkVSRFRyZWVUb2dnbGUnIH0KClBsdWcgJ2p1bmVndW5u
L2Z6ZicsIHsgJ2Rpcic6ICd+Ly5memYnLCAnZG8nOiAnLi9pbnN0YWxsIC0tYWxsJyB9CgpjYWxs
IHBsdWcjZW5kKCkK" | base64 -d | tee ~/.config/nvim/init.vim

rm -rf ~/.config/nvim/plugged/nerdtree
echo -e "\n" | git clone git@github.com:scrooloose/nerdtree.git  ~/.config/nvim/plugged/nerdtree
if [ $? -ne 0 ]; then echo "git clone demo" &&  exit 1 ;fi

rm -rf ~/.fzf
echo -e "\n" | git clone git@github.com:junegunn/fzf.git  ~/.fzf
if [ $? -ne 0 ]; then echo "git clone demo" &&  exit 1 ;fi

dos2unix ~/.fzf/*
dos2unix -R ~/.fzf/shell/*

result=$(cat ~/.bashrc | grep "vim=")
if [ -n "$result" ]; then
    echo "alias vim exist"
else
    echo "alias vim not exist, adding ..."
    sed -i '$a\alias vim="vim"'  ~/.bashrc
fi

result=$(cat ~/.bashrc | grep "g=")
if [ -n "$result" ]; then
    echo "alias grep exist"
else
    echo "alias grep not exist, adding ..."
    sed -i '$a\alias g="grep -rn "'  ~/.bashrc
fi

result=$(cat ~/.bashrc | grep "f=")
if [ -n "$result" ]; then
    echo "alias find exist"
else
    echo "alias find not exist, adding ..."
    sed -i '$a\alias f="find . -name "'  ~/.bashrc
fi


